{
  "hints": {
    "createApplication(uint64,address)void": {
      "call_config": {
        "no_op": "CREATE"
      }
    },
    "updateApplication()void": {
      "call_config": {
        "update_application": "CALL"
      }
    },
    "changeMaintainer(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "changeFees(uint64,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "optinAsset(pay,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "getDropCreateCost()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "getPerClaimerMbrCost()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "getPerClaimerFee()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "getDropInfo(uint64)(uint64,address,uint64,uint64,uint64,(uint64,uint64,uint64,uint8,address,uint64[4],uint64))": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "createDrop(pay,axfer,(uint64,uint64,uint64,uint8,address,uint64[4],uint64))uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "cancelDrop(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "claimDrop(pay,uint64,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "claimClaimerBoxCost(uint64,address,address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "cleanupDrop(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    }
  },
  "bare_call_config": {
    "no_op": "NEVER",
    "opt_in": "NEVER",
    "close_out": "NEVER",
    "update_application": "NEVER",
    "delete_application": "NEVER"
  },
  "schema": {
    "local": {
      "declared": {},
      "reserved": {}
    },
    "global": {
      "declared": {
        "nfdRegistryAppId": {
          "type": "uint64",
          "key": "nfdRegistryId"
        },
        "maintainerAddress": {
          "type": "bytes",
          "key": "maintainerAddress"
        },
        "creationFeeAmount": {
          "type": "uint64",
          "key": "creationFeeAmount"
        },
        "perClaimFeeAmount": {
          "type": "uint64",
          "key": "perClaimFeeAmount"
        },
        "totalClaims": {
          "type": "uint64",
          "key": "totalClaims"
        },
        "lastDropId": {
          "type": "uint64",
          "key": "lastDropId"
        }
      },
      "reserved": {}
    }
  },
  "state": {
    "global": {
      "num_byte_slices": 5,
      "num_uints": 5
    },
    "local": {
      "num_byte_slices": 0,
      "num_uints": 0
    }
  },
  "source": {
    "approval": "I3ByYWdtYSB2ZXJzaW9uIDExCmludGNibG9jayAxIDAgOCAzMiAyIDQgNiA2NCAzIDcgNDAgNTYgNjAKYnl0ZWNibG9jayAweCAweDY0IDB4NjM3MjY1NjE3NDY5NmY2ZTQ2NjU2NTQxNmQ2Zjc1NmU3NCAweDE1MWY3Yzc1IDB4NzQ2ZjZiIDB4NmQ2MTY5NmU3NDYxNjk2ZTY1NzI0MTY0NjQ3MjY1NzM3MyAweDU0NmY2YjY1NmU0NDcyNmY3MDIwNjY2NTY1IDB4NmM2MTczNzQ0NDcyNmY3MDQ5NjQgMHg3MDY1NzI0MzZjNjE2OTZkNDY2NTY1NDE2ZDZmNzU2ZTc0IDB4NzQ2Zjc0NjE2YzQzNmM2MTY5NmQ3MyAweDYzIDB4NmU2NjY0NTI2NTY3Njk3Mzc0NzI3OTQ5NjQgMHg2OTJlNmY3NzZlNjU3MjJlNjEgMHg2YzEzZWRlNAoKLy8gVGhpcyBURUFMIHdhcyBnZW5lcmF0ZWQgYnkgVEVBTFNjcmlwdCB2MC4xMDYuMwovLyBodHRwczovL2dpdGh1Yi5jb20vYWxnb3JhbmRmb3VuZGF0aW9uL1RFQUxTY3JpcHQKCi8vIFRoaXMgY29udHJhY3QgaXMgY29tcGxpYW50IHdpdGggYW5kL29yIGltcGxlbWVudHMgdGhlIGZvbGxvd2luZyBBUkNzOiBbIEFSQzQgXQoKLy8gVGhlIGZvbGxvd2luZyB0ZW4gbGluZXMgb2YgVEVBTCBoYW5kbGUgaW5pdGlhbCBwcm9ncmFtIGZsb3cKLy8gVGhpcyBwYXR0ZXJuIGlzIHVzZWQgdG8gbWFrZSBpdCBlYXN5IGZvciBhbnlvbmUgdG8gcGFyc2UgdGhlIHN0YXJ0IG9mIHRoZSBwcm9ncmFtIGFuZCBkZXRlcm1pbmUgaWYgYSBzcGVjaWZpYyBhY3Rpb24gaXMgYWxsb3dlZAovLyBIZXJlLCBhY3Rpb24gcmVmZXJzIHRvIHRoZSBPbkNvbXBsZXRlIGluIGNvbWJpbmF0aW9uIHdpdGggd2hldGhlciB0aGUgYXBwIGlzIGJlaW5nIGNyZWF0ZWQgb3IgY2FsbGVkCi8vIEV2ZXJ5IHBvc3NpYmxlIGFjdGlvbiBmb3IgdGhpcyBjb250cmFjdCBpcyByZXByZXNlbnRlZCBpbiB0aGUgc3dpdGNoIHN0YXRlbWVudAovLyBJZiB0aGUgYWN0aW9uIGlzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGUgY29udHJhY3QsIGl0cyByZXNwZWN0aXZlIGJyYW5jaCB3aWxsIGJlICIqTk9UX0lNUExFTUVOVEVEIiB3aGljaCBqdXN0IGNvbnRhaW5zICJlcnIiCnR4biBBcHBsaWNhdGlvbklECiEKaW50YyA2IC8vIDYKKgp0eG4gT25Db21wbGV0aW9uCisKc3dpdGNoICpjYWxsX05vT3AgKk5PVF9JTVBMRU1FTlRFRCAqTk9UX0lNUExFTUVOVEVEICpOT1RfSU1QTEVNRU5URUQgKmNhbGxfVXBkYXRlQXBwbGljYXRpb24gKk5PVF9JTVBMRU1FTlRFRCAqY3JlYXRlX05vT3AgKk5PVF9JTVBMRU1FTlRFRCAqTk9UX0lNUExFTUVOVEVEICpOT1RfSU1QTEVNRU5URUQgKk5PVF9JTVBMRU1FTlRFRCAqTk9UX0lNUExFTUVOVEVECgoqTk9UX0lNUExFTUVOVEVEOgoJLy8gVGhlIHJlcXVlc3RlZCBhY3Rpb24gaXMgbm90IGltcGxlbWVudGVkIGluIHRoaXMgY29udHJhY3QuIEFyZSB5b3UgdXNpbmcgdGhlIGNvcnJlY3QgT25Db21wbGV0ZT8gRGlkIHlvdSBzZXQgeW91ciBhcHAgSUQ/CgllcnIKCi8vIGNyZWF0ZUFwcGxpY2F0aW9uKHVpbnQ2NCxhZGRyZXNzKXZvaWQKKmFiaV9yb3V0ZV9jcmVhdGVBcHBsaWNhdGlvbjoKCS8vIG1haW50YWluZXJBZGRyZXNzOiBhZGRyZXNzCgl0eG5hIEFwcGxpY2F0aW9uQXJncyAyCglkdXAKCWxlbgoJaW50YyAzIC8vIDMyCgk9PQoKCS8vIGFyZ3VtZW50IDAgKG1haW50YWluZXJBZGRyZXNzKSBmb3IgY3JlYXRlQXBwbGljYXRpb24gbXVzdCBiZSBhIGFkZHJlc3MKCWFzc2VydAoKCS8vIG5mZFJlZ2lzdHJ5SWQ6IHVpbnQ2NAoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQoJYnRvaQoKCS8vIGV4ZWN1dGUgY3JlYXRlQXBwbGljYXRpb24odWludDY0LGFkZHJlc3Mpdm9pZAoJY2FsbHN1YiBjcmVhdGVBcHBsaWNhdGlvbgoJaW50YyAwIC8vIDEKCXJldHVybgoKLy8gY3JlYXRlQXBwbGljYXRpb24obmZkUmVnaXN0cnlJZDogQXBwSUQsIG1haW50YWluZXJBZGRyZXNzOiBBZGRyZXNzKTogdm9pZApjcmVhdGVBcHBsaWNhdGlvbjoKCXByb3RvIDIgMAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo4OAoJLy8gdGhpcy5uZmRSZWdpc3RyeUFwcElkLnZhbHVlID0gbmZkUmVnaXN0cnlJZAoJYnl0ZWMgMTEgLy8gICJuZmRSZWdpc3RyeUlkIgoJZnJhbWVfZGlnIC0xIC8vIG5mZFJlZ2lzdHJ5SWQ6IEFwcElECglhcHBfZ2xvYmFsX3B1dAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo4OQoJLy8gdGhpcy5tYWludGFpbmVyQWRkcmVzcy52YWx1ZSA9IG1haW50YWluZXJBZGRyZXNzCglieXRlYyA1IC8vICAibWFpbnRhaW5lckFkZHJlc3MiCglmcmFtZV9kaWcgLTIgLy8gbWFpbnRhaW5lckFkZHJlc3M6IEFkZHJlc3MKCWFwcF9nbG9iYWxfcHV0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjkwCgkvLyB0aGlzLnRvdGFsQ2xhaW1zLnZhbHVlID0gMAoJYnl0ZWMgOSAvLyAgInRvdGFsQ2xhaW1zIgoJaW50YyAxIC8vIDAKCWFwcF9nbG9iYWxfcHV0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjkxCgkvLyB0aGlzLmxhc3REcm9wSWQudmFsdWUgPSAwCglieXRlYyA3IC8vICAibGFzdERyb3BJZCIKCWludGMgMSAvLyAwCglhcHBfZ2xvYmFsX3B1dAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo5MgoJLy8gdGhpcy5jcmVhdGlvbkZlZUFtb3VudC52YWx1ZSA9IDEwXzAwMF8wMDAKCWJ5dGVjIDIgLy8gICJjcmVhdGlvbkZlZUFtb3VudCIKCXB1c2hpbnQgMTBfMDAwXzAwMAoJYXBwX2dsb2JhbF9wdXQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6OTMKCS8vIHRoaXMucGVyQ2xhaW1GZWVBbW91bnQudmFsdWUgPSAxMDBfMDAwCglieXRlYyA4IC8vICAicGVyQ2xhaW1GZWVBbW91bnQiCglwdXNoaW50IDEwMF8wMDAKCWFwcF9nbG9iYWxfcHV0CglyZXRzdWIKCi8vIHVwZGF0ZUFwcGxpY2F0aW9uKCl2b2lkCiphYmlfcm91dGVfdXBkYXRlQXBwbGljYXRpb246CgkvLyBleGVjdXRlIHVwZGF0ZUFwcGxpY2F0aW9uKCl2b2lkCgljYWxsc3ViIHVwZGF0ZUFwcGxpY2F0aW9uCglpbnRjIDAgLy8gMQoJcmV0dXJuCgovLyB1cGRhdGVBcHBsaWNhdGlvbigpOiB2b2lkCnVwZGF0ZUFwcGxpY2F0aW9uOgoJcHJvdG8gMCAwCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjk4CgkvLyBhc3NlcnQodGhpcy50eG4uc2VuZGVyID09PSB0aGlzLmFwcC5jcmVhdG9yLCAnT25seSB0aGUgY3JlYXRvciBjYW4gdXBkYXRlIHRoZSBhcHBsaWNhdGlvbicpCgl0eG4gU2VuZGVyCgl0eG5hIEFwcGxpY2F0aW9ucyAwCglhcHBfcGFyYW1zX2dldCBBcHBDcmVhdG9yCglwb3AKCT09CgoJLy8gT25seSB0aGUgY3JlYXRvciBjYW4gdXBkYXRlIHRoZSBhcHBsaWNhdGlvbgoJYXNzZXJ0CglyZXRzdWIKCi8vIGNoYW5nZU1haW50YWluZXIoYWRkcmVzcyl2b2lkCiphYmlfcm91dGVfY2hhbmdlTWFpbnRhaW5lcjoKCS8vIG5ld01haW50YWluZXI6IGFkZHJlc3MKCXR4bmEgQXBwbGljYXRpb25BcmdzIDEKCWR1cAoJbGVuCglpbnRjIDMgLy8gMzIKCT09CgoJLy8gYXJndW1lbnQgMCAobmV3TWFpbnRhaW5lcikgZm9yIGNoYW5nZU1haW50YWluZXIgbXVzdCBiZSBhIGFkZHJlc3MKCWFzc2VydAoKCS8vIGV4ZWN1dGUgY2hhbmdlTWFpbnRhaW5lcihhZGRyZXNzKXZvaWQKCWNhbGxzdWIgY2hhbmdlTWFpbnRhaW5lcgoJaW50YyAwIC8vIDEKCXJldHVybgoKLy8gY2hhbmdlTWFpbnRhaW5lcihuZXdNYWludGFpbmVyOiBBZGRyZXNzKTogdm9pZAovLwovLyBVcGRhdGVzIHRoZSBtYWludGFpbmVyIGFkZHJlc3Mgb2YgdGhlIGFwcGxpY2F0aW9uLgovLwovLyBUaGlzIG1ldGhvZCBhbGxvd3MgdGhlIGNyZWF0b3Igb2YgdGhlIGFwcGxpY2F0aW9uIHRvIHNldCBhIG5ldyBtYWludGFpbmVyIGFkZHJlc3MgZm9yIHJlY2VpdmluZyBoYWxmIHRoZSBjcmVhdGlvbgovLyBmZWVzCmNoYW5nZU1haW50YWluZXI6Cglwcm90byAxIDAKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MTA4CgkvLyBhc3NlcnQodGhpcy50eG4uc2VuZGVyID09PSB0aGlzLmFwcC5jcmVhdG9yLCAnT25seSB0aGUgY3JlYXRvciBjYW4gY2FsbCcpCgl0eG4gU2VuZGVyCgl0eG5hIEFwcGxpY2F0aW9ucyAwCglhcHBfcGFyYW1zX2dldCBBcHBDcmVhdG9yCglwb3AKCT09CgoJLy8gT25seSB0aGUgY3JlYXRvciBjYW4gY2FsbAoJYXNzZXJ0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjEwOQoJLy8gdGhpcy5tYWludGFpbmVyQWRkcmVzcy52YWx1ZSA9IG5ld01haW50YWluZXIKCWJ5dGVjIDUgLy8gICJtYWludGFpbmVyQWRkcmVzcyIKCWZyYW1lX2RpZyAtMSAvLyBuZXdNYWludGFpbmVyOiBBZGRyZXNzCglhcHBfZ2xvYmFsX3B1dAoJcmV0c3ViCgovLyBjaGFuZ2VGZWVzKHVpbnQ2NCx1aW50NjQpdm9pZAoqYWJpX3JvdXRlX2NoYW5nZUZlZXM6CgkvLyBwZXJDbGFpbUZlZTogdWludDY0Cgl0eG5hIEFwcGxpY2F0aW9uQXJncyAyCglidG9pCgoJLy8gY3JlYXRpb25GZWU6IHVpbnQ2NAoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQoJYnRvaQoKCS8vIGV4ZWN1dGUgY2hhbmdlRmVlcyh1aW50NjQsdWludDY0KXZvaWQKCWNhbGxzdWIgY2hhbmdlRmVlcwoJaW50YyAwIC8vIDEKCXJldHVybgoKLy8gY2hhbmdlRmVlcyhjcmVhdGlvbkZlZTogdWludDY0LCBwZXJDbGFpbUZlZTogdWludDY0KTogdm9pZAovLwovLyBVcGRhdGVzIHRoZSBjcmVhdGlvbiBmZWUgYW1vdW50IHJlcXVpcmVkIGF0IGRyb3AgY3JlYXRpb24gKHNwbGl0IGJldHdlZW4gbWFpbnRhaW5lciBhbmQgZmVlIHNpbmspCi8vIFRoaXMgbWV0aG9kIGNhbiBvbmx5IGJlIGNhbGxlZCBieSB0aGUgY3JlYXRvciBvZiB0aGUgYXBwbGljYXRpb24gYW5kIHRoZSBmZWUgbXVzdCBiZSBhdCBsZWFzdCAyIEFMR08KLy8gMSBBTEdPIHRvIG1haW50YWluZXIgYWRkcmVzcywgMSB0byBmZWUgc2luay4KLy8gVGhlIHBlci1jbGFpbSBmZWUgaGFzIHRvIGJlIGF0IGxlYXN0IGRvdWJsZSB0aGUgcGVyLWNsYWltIE1CUi4KLy8gQXQgY2xhaW0sIDUwJSBpcyBzZW50IHRvIHRoZSBtYWludGFpbmVyIGFkZHJlc3MsIHRoZSBtYnIgaXMgc3VidHJhY3RlZCBvdXQsIGFuZCByZW1haW5kZXIgZ29lcyB0byBmZWUgc2luawpjaGFuZ2VGZWVzOgoJcHJvdG8gMiAwCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjEyMAoJLy8gYXNzZXJ0KHRoaXMudHhuLnNlbmRlciA9PT0gdGhpcy5hcHAuY3JlYXRvciwgJ09ubHkgdGhlIGNyZWF0b3IgY2FuIGNhbGwnKQoJdHhuIFNlbmRlcgoJdHhuYSBBcHBsaWNhdGlvbnMgMAoJYXBwX3BhcmFtc19nZXQgQXBwQ3JlYXRvcgoJcG9wCgk9PQoKCS8vIE9ubHkgdGhlIGNyZWF0b3IgY2FuIGNhbGwKCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoxMjEKCS8vIGFzc2VydChjcmVhdGlvbkZlZSA+IDJfMDAwXzAwMCwgJ2ZlZSBtdXN0IGJlIGF0IGxlYXN0IDIgYWxnbycpCglmcmFtZV9kaWcgLTEgLy8gY3JlYXRpb25GZWU6IHVpbnQ2NAoJcHVzaGludCAyXzAwMF8wMDAKCT4KCgkvLyBmZWUgbXVzdCBiZSBhdCBsZWFzdCAyIGFsZ28KCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoxMjIKCS8vIGFzc2VydChjcmVhdGlvbkZlZSAlIDIgPT09IDAsICdmZWUgbXVzdCBiZSBldmVuIGFtb3VudCcpCglmcmFtZV9kaWcgLTEgLy8gY3JlYXRpb25GZWU6IHVpbnQ2NAoJaW50YyA0IC8vIDIKCSUKCWludGMgMSAvLyAwCgk9PQoKCS8vIGZlZSBtdXN0IGJlIGV2ZW4gYW1vdW50Cglhc3NlcnQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MTIzCgkvLyBhc3NlcnQocGVyQ2xhaW1GZWUgPj0gdGhpcy5nZXRQZXJDbGFpbWVyTWJyQ29zdCgpICogMiwgJ3Blci1jbGFpbSBmZWUgbXVzdCA+PSBkb3VibGUgbWJyIGNvc3QnKQoJZnJhbWVfZGlnIC0yIC8vIHBlckNsYWltRmVlOiB1aW50NjQKCWNhbGxzdWIgZ2V0UGVyQ2xhaW1lck1ickNvc3QKCWludGMgNCAvLyAyCgkqCgk+PQoKCS8vIHBlci1jbGFpbSBmZWUgbXVzdCA+PSBkb3VibGUgbWJyIGNvc3QKCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoxMjQKCS8vIHRoaXMuY3JlYXRpb25GZWVBbW91bnQudmFsdWUgPSBjcmVhdGlvbkZlZQoJYnl0ZWMgMiAvLyAgImNyZWF0aW9uRmVlQW1vdW50IgoJZnJhbWVfZGlnIC0xIC8vIGNyZWF0aW9uRmVlOiB1aW50NjQKCWFwcF9nbG9iYWxfcHV0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjEyNQoJLy8gdGhpcy5wZXJDbGFpbUZlZUFtb3VudC52YWx1ZSA9IHBlckNsYWltRmVlCglieXRlYyA4IC8vICAicGVyQ2xhaW1GZWVBbW91bnQiCglmcmFtZV9kaWcgLTIgLy8gcGVyQ2xhaW1GZWU6IHVpbnQ2NAoJYXBwX2dsb2JhbF9wdXQKCXJldHN1YgoKLy8gb3B0aW5Bc3NldChwYXksdWludDY0KXZvaWQKKmFiaV9yb3V0ZV9vcHRpbkFzc2V0OgoJLy8gYXNzZXRJZDogdWludDY0Cgl0eG5hIEFwcGxpY2F0aW9uQXJncyAxCglidG9pCgoJLy8gbWJyUGF5bWVudDogcGF5Cgl0eG4gR3JvdXBJbmRleAoJaW50YyAwIC8vIDEKCS0KCWR1cAoJZ3R4bnMgVHlwZUVudW0KCWludGMgMCAvLyAgcGF5Cgk9PQoKCS8vIGFyZ3VtZW50IDEgKG1iclBheW1lbnQpIGZvciBvcHRpbkFzc2V0IG11c3QgYmUgYSBwYXkgdHJhbnNhY3Rpb24KCWFzc2VydAoKCS8vIGV4ZWN1dGUgb3B0aW5Bc3NldChwYXksdWludDY0KXZvaWQKCWNhbGxzdWIgb3B0aW5Bc3NldAoJaW50YyAwIC8vIDEKCXJldHVybgoKLy8gb3B0aW5Bc3NldChtYnJQYXltZW50OiBQYXlUeG4sIGFzc2V0SWQ6IEFzc2V0SUQpOiB2b2lkCi8vCi8vIE9wdHMgaW4gdGhlIGFwcGxpY2F0aW9uIHRvIGFuIGFzc2V0IGlmIG5vdCBhbHJlYWR5IG9wdGVkIGluLgovLyBWZXJpZmllcyB0aGUgcHJvdmlkZWQgcGF5bWVudCB0cmFuc2FjdGlvbiBmb3Igc3VmZmljaWVudCBmdW5kaW5nIHRvIGNvdmVyCi8vIHRoZSBtaW5pbXVtIGJhbGFuY2UgcmVxdWlyZWQgZm9yIGFzc2V0IG9wdC1pbiBhbmQgcmVsZXZhbnQgdHJhbnNhY3Rpb24gZmVlcyAoLjEwMiBhbGdvKQovLyBJbml0aWF0ZXMgYW4gYXNzZXQgdHJhbnNmZXIgdHJhbnNhY3Rpb24gdG8gY29tcGxldGUgdGhlIG9wdC1pbiBwcm9jZXNzLgovLwovLyBAcGFyYW0ge1BheVR4bn0gbWJyUGF5bWVudCAtIFRoZSBwYXltZW50IHRyYW5zYWN0aW9uIGNvdmVyaW5nIHRoZSBtaW5pbXVtIGJhbGFuY2UgYW5kIGZlZXMuCi8vIEBwYXJhbSB7QXNzZXRJRH0gYXNzZXRJZCAtIFRoZSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgYXNzZXQgdG8gb3B0IGludG8uCm9wdGluQXNzZXQ6Cglwcm90byAyIDAKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MTM4CgkvLyB2ZXJpZnlQYXlUeG4obWJyUGF5bWVudCwgewoJLy8gICAgICAgICAgICAgcmVjZWl2ZXI6IHRoaXMuYXBwLmFkZHJlc3MsCgkvLyAgICAgICAgICAgICBhbW91bnQ6IGdsb2JhbHMuYXNzZXRPcHRJbk1pbkJhbGFuY2UsCgkvLyAgICAgICAgIH0pCgkvLyB2ZXJpZnkgcmVjZWl2ZXIKCWZyYW1lX2RpZyAtMSAvLyBtYnJQYXltZW50OiBQYXlUeG4KCWd0eG5zIFJlY2VpdmVyCglnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwoJPT0KCgkvLyB0cmFuc2FjdGlvbiB2ZXJpZmljYXRpb24gZmFpbGVkOiB7InR4biI6Im1iclBheW1lbnQiLCJmaWVsZCI6InJlY2VpdmVyIiwiZXhwZWN0ZWQiOiJ0aGlzLmFwcC5hZGRyZXNzIn0KCWFzc2VydAoKCS8vIHZlcmlmeSBhbW91bnQKCWZyYW1lX2RpZyAtMSAvLyBtYnJQYXltZW50OiBQYXlUeG4KCWd0eG5zIEFtb3VudAoJZ2xvYmFsIEFzc2V0T3B0SW5NaW5CYWxhbmNlCgk9PQoKCS8vIHRyYW5zYWN0aW9uIHZlcmlmaWNhdGlvbiBmYWlsZWQ6IHsidHhuIjoibWJyUGF5bWVudCIsImZpZWxkIjoiYW1vdW50IiwiZXhwZWN0ZWQiOiJnbG9iYWxzLmFzc2V0T3B0SW5NaW5CYWxhbmNlIn0KCWFzc2VydAoKCS8vICppZjBfY29uZGl0aW9uCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MTQzCgkvLyB0aGlzLmFwcC5hZGRyZXNzLmlzT3B0ZWRJblRvQXNzZXQoYXNzZXRJZCkKCWdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCglmcmFtZV9kaWcgLTIgLy8gYXNzZXRJZDogQXNzZXRJRAoJYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCglzd2FwCglwb3AKCWJ6ICppZjBfZW5kCgoJLy8gKmlmMF9jb25zZXF1ZW50CgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MTQ0CgkvLyBzZW5kUGF5bWVudCh7CgkvLyAgICAgICAgICAgICAgICAgcmVjZWl2ZXI6IHRoaXMudHhuLnNlbmRlciwKCS8vICAgICAgICAgICAgICAgICBhbW91bnQ6IGdsb2JhbHMuYXNzZXRPcHRJbk1pbkJhbGFuY2UsCgkvLyAgICAgICAgICAgICAgICAgbm90ZTogJ29wdGluIHJlZnVuZCcsCgkvLyAgICAgICAgICAgICB9KQoJaXR4bl9iZWdpbgoJaW50YyAwIC8vICBwYXkKCWl0eG5fZmllbGQgVHlwZUVudW0KCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MTQ1CgkvLyByZWNlaXZlcjogdGhpcy50eG4uc2VuZGVyCgl0eG4gU2VuZGVyCglpdHhuX2ZpZWxkIFJlY2VpdmVyCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjE0NgoJLy8gYW1vdW50OiBnbG9iYWxzLmFzc2V0T3B0SW5NaW5CYWxhbmNlCglnbG9iYWwgQXNzZXRPcHRJbk1pbkJhbGFuY2UKCWl0eG5fZmllbGQgQW1vdW50CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjE0NwoJLy8gbm90ZTogJ29wdGluIHJlZnVuZCcKCXB1c2hieXRlcyAweDZmNzA3NDY5NmUyMDcyNjU2Njc1NmU2NCAvLyAib3B0aW4gcmVmdW5kIgoJaXR4bl9maWVsZCBOb3RlCgoJLy8gRmVlIGZpZWxkIG5vdCBzZXQsIGRlZmF1bHRpbmcgdG8gMAoJaW50YyAxIC8vIDAKCWl0eG5fZmllbGQgRmVlCgoJLy8gU3VibWl0IGlubmVyIHRyYW5zYWN0aW9uCglpdHhuX3N1Ym1pdAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoxNDkKCS8vIHJldHVybgoJcmV0c3ViCgoqaWYwX2VuZDoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoxNTIKCS8vIHNlbmRBc3NldFRyYW5zZmVyKHsKCS8vICAgICAgICAgICAgIHhmZXJBc3NldDogYXNzZXRJZCwKCS8vICAgICAgICAgICAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMuYXBwLmFkZHJlc3MsCgkvLyAgICAgICAgICAgICBhc3NldEFtb3VudDogMCwKCS8vICAgICAgICAgfSkKCWl0eG5fYmVnaW4KCWludGMgNSAvLyAgYXhmZXIKCWl0eG5fZmllbGQgVHlwZUVudW0KCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MTUzCgkvLyB4ZmVyQXNzZXQ6IGFzc2V0SWQKCWZyYW1lX2RpZyAtMiAvLyBhc3NldElkOiBBc3NldElECglpdHhuX2ZpZWxkIFhmZXJBc3NldAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoxNTQKCS8vIGFzc2V0UmVjZWl2ZXI6IHRoaXMuYXBwLmFkZHJlc3MKCWdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCglpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MTU1CgkvLyBhc3NldEFtb3VudDogMAoJaW50YyAxIC8vIDAKCWl0eG5fZmllbGQgQXNzZXRBbW91bnQKCgkvLyBGZWUgZmllbGQgbm90IHNldCwgZGVmYXVsdGluZyB0byAwCglpbnRjIDEgLy8gMAoJaXR4bl9maWVsZCBGZWUKCgkvLyBTdWJtaXQgaW5uZXIgdHJhbnNhY3Rpb24KCWl0eG5fc3VibWl0CglyZXRzdWIKCi8vIGdldERyb3BDcmVhdGVDb3N0KCl1aW50NjQKKmFiaV9yb3V0ZV9nZXREcm9wQ3JlYXRlQ29zdDoKCS8vIFRoZSBBQkkgcmV0dXJuIHByZWZpeAoJYnl0ZWMgMyAvLyAweDE1MWY3Yzc1CgoJLy8gZXhlY3V0ZSBnZXREcm9wQ3JlYXRlQ29zdCgpdWludDY0CgljYWxsc3ViIGdldERyb3BDcmVhdGVDb3N0CglpdG9iCgljb25jYXQKCWxvZwoJaW50YyAwIC8vIDEKCXJldHVybgoKLy8gZ2V0RHJvcENyZWF0ZUNvc3QoKTogdWludDY0Ci8vCi8vIENhbGN1bGF0ZXMgdGhlIGZlZXMgcmVxdWlyZWQgYW5kIE1CUiBjb3N0cyByZXF1aXJlZCBmb3IgYm94IHN0b3JhZ2UgZm9yIGNyZWF0aW5nIGEgZHJvcCB3aXRoIGEgc3BlY2lmaWVkIG1heGltdW0KLy8gbnVtYmVyIG9mIGNsYWltZXJzLiAgVGhpcyBmZWUgbXVzdCBiZSBzZW50IGFzIGEgcGF5bWVudCB0byB0aGUgY29udHJhY3QgcHJpb3IgdG8gdGhlIGNhbGwgdG8gY3JlYXRlRHJvcC4KLy8gVGhlIGFjdHVhbCBmZWUgKGNyZWF0aW9uRmVlQW1vdW50KSBpcyBzcGxpdCBiZXR3ZWVuIGEgbWFpbnRhaW5lciBhY2NvdW50IGFuZCB0aGUgZmVlIHNpbmsuICBUaGUgZmVlIGlzIHRvIGhlbHAKLy8gcHJldmVudCAnc3BhbScgZHJvcHMgb3IgZHJvcHMgY3JlYXRlZCBzb2xlbHkgdG8gYmxvY2sgZHJvcHMgZm9yIHNwZWNpZmljIGFzc2V0cy4KLy8KLy8gQHJldHVybiB7dWludDY0fSBUaGUgdG90YWwgTUJSIHJlcXVpcmVkIHRvIGNvdmVyIHRoZSBuZWNlc3NhcnkgdXAtZnJvbnQgYm94IHN0b3JhZ2UgY29zdHMuCmdldERyb3BDcmVhdGVDb3N0OgoJcHJvdG8gMCAxCgoJLy8gUHVzaCBlbXB0eSBieXRlcyBhZnRlciB0aGUgZnJhbWUgcG9pbnRlciB0byByZXNlcnZlIHNwYWNlIGZvciBsb2NhbCB2YXJpYWJsZXMKCWJ5dGVjIDAgLy8gMHgKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MTY5CgkvLyBmZWVOZWVkZWQ6IHVpbnQ2NCA9IHRoaXMuY3JlYXRpb25GZWVBbW91bnQudmFsdWUKCWJ5dGVjIDIgLy8gICJjcmVhdGlvbkZlZUFtb3VudCIKCWFwcF9nbG9iYWxfZ2V0CglmcmFtZV9idXJ5IDAgLy8gZmVlTmVlZGVkOiB1aW50NjQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MTczCgkvLyBmZWVOZWVkZWQgKz0gdGhpcy5jb3N0Rm9yQm94U3RvcmFnZSgxIC8qICdkJyAqLyArIGxlbjxUb2tlbkRyb3BJZD4oKSArIGxlbjxUb2tlbkRyb3BJbmZvPigpKQoJZnJhbWVfZGlnIDAgLy8gZmVlTmVlZGVkOiB1aW50NjQKCXB1c2hpbnQgMTcwCgljYWxsc3ViIGNvc3RGb3JCb3hTdG9yYWdlCgkrCglmcmFtZV9idXJ5IDAgLy8gZmVlTmVlZGVkOiB1aW50NjQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MTc1CgkvLyBmZWVOZWVkZWQgKz0gdGhpcy5jb3N0Rm9yQm94U3RvcmFnZSgzIC8qICd0b2snICovICsgbGVuPEFzc2V0SUQ+KCkgKyBsZW48VG9rZW5Ecm9wSWQ+KCkpCglmcmFtZV9kaWcgMCAvLyBmZWVOZWVkZWQ6IHVpbnQ2NAoJcHVzaGludCAxOQoJY2FsbHN1YiBjb3N0Rm9yQm94U3RvcmFnZQoJKwoJZnJhbWVfYnVyeSAwIC8vIGZlZU5lZWRlZDogdWludDY0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjE3NgoJLy8gcmV0dXJuIGZlZU5lZWRlZAoJZnJhbWVfZGlnIDAgLy8gZmVlTmVlZGVkOiB1aW50NjQKCgkvLyBzZXQgdGhlIHN1YnJvdXRpbmUgcmV0dXJuIHZhbHVlCglmcmFtZV9idXJ5IDAKCXJldHN1YgoKLy8gZ2V0UGVyQ2xhaW1lck1ickNvc3QoKXVpbnQ2NAoqYWJpX3JvdXRlX2dldFBlckNsYWltZXJNYnJDb3N0OgoJLy8gVGhlIEFCSSByZXR1cm4gcHJlZml4CglieXRlYyAzIC8vIDB4MTUxZjdjNzUKCgkvLyBleGVjdXRlIGdldFBlckNsYWltZXJNYnJDb3N0KCl1aW50NjQKCWNhbGxzdWIgZ2V0UGVyQ2xhaW1lck1ickNvc3QKCWl0b2IKCWNvbmNhdAoJbG9nCglpbnRjIDAgLy8gMQoJcmV0dXJuCgovLyBnZXRQZXJDbGFpbWVyTWJyQ29zdCgpOiB1aW50NjQKLy8KLy8gUmV0dXJucyB0aGUgTUJSIGJveCBjb3N0IGZvciBhIHNpbmdsZSBjbGFpbWVyIChjbGFpbWFibGUgYnkgYW55b25lIGxhdGVyKQpnZXRQZXJDbGFpbWVyTWJyQ29zdDoKCXByb3RvIDAgMQoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoxODUKCS8vIHJldHVybiB0aGlzLmNvc3RGb3JCb3hTdG9yYWdlKDEgLyogJ2MnICovICsgbGVuPEFkZHJlc3NDbGFpbUtleT4oKSArIGxlbjxDbGFpbWVkSW5mbz4oKSkKCXB1c2hpbnQgNzMKCWNhbGxzdWIgY29zdEZvckJveFN0b3JhZ2UKCXJldHN1YgoKLy8gZ2V0UGVyQ2xhaW1lckZlZSgpdWludDY0CiphYmlfcm91dGVfZ2V0UGVyQ2xhaW1lckZlZToKCS8vIFRoZSBBQkkgcmV0dXJuIHByZWZpeAoJYnl0ZWMgMyAvLyAweDE1MWY3Yzc1CgoJLy8gZXhlY3V0ZSBnZXRQZXJDbGFpbWVyRmVlKCl1aW50NjQKCWNhbGxzdWIgZ2V0UGVyQ2xhaW1lckZlZQoJaXRvYgoJY29uY2F0Cglsb2cKCWludGMgMCAvLyAxCglyZXR1cm4KCi8vIGdldFBlckNsYWltZXJGZWUoKTogdWludDY0Ci8vCi8vIFJldHVybnMgdGhlIHBlci1jbGFpbSBmZWUgcGFpZCAobm90IHJlY2xhaW1hYmxlKQpnZXRQZXJDbGFpbWVyRmVlOgoJcHJvdG8gMCAxCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjE5MwoJLy8gcmV0dXJuIHRoaXMucGVyQ2xhaW1GZWVBbW91bnQudmFsdWUKCWJ5dGVjIDggLy8gICJwZXJDbGFpbUZlZUFtb3VudCIKCWFwcF9nbG9iYWxfZ2V0CglyZXRzdWIKCi8vIGdldERyb3BJbmZvKHVpbnQ2NCkodWludDY0LGFkZHJlc3MsdWludDY0LHVpbnQ2NCx1aW50NjQsKHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ4LGFkZHJlc3MsdWludDY0WzRdLHVpbnQ2NCkpCiphYmlfcm91dGVfZ2V0RHJvcEluZm86CgkvLyBUaGUgQUJJIHJldHVybiBwcmVmaXgKCWJ5dGVjIDMgLy8gMHgxNTFmN2M3NQoKCS8vIHRva2VuRHJvcElkOiB1aW50NjQKCXR4bmEgQXBwbGljYXRpb25BcmdzIDEKCWJ0b2kKCgkvLyBleGVjdXRlIGdldERyb3BJbmZvKHVpbnQ2NCkodWludDY0LGFkZHJlc3MsdWludDY0LHVpbnQ2NCx1aW50NjQsKHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ4LGFkZHJlc3MsdWludDY0WzRdLHVpbnQ2NCkpCgljYWxsc3ViIGdldERyb3BJbmZvCgljb25jYXQKCWxvZwoJaW50YyAwIC8vIDEKCXJldHVybgoKLy8gZ2V0RHJvcEluZm8odG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkKTogVG9rZW5Ecm9wSW5mbwovLwovLyBSZXRyaWV2ZXMgdGhlIFRva2VuRHJvcEluZm8gc3RydWN0IGZvciBhIHNwZWNpZmljIChzdGlsbCBhY3RpdmUpIHRva2VuIGRyb3AgYmFzZWQgb24gdGhlIHByb3ZpZGVkIHRva2VuIGRyb3AgSUQuCi8vCi8vIEBwYXJhbSB7VG9rZW5Ecm9wSWR9IHRva2VuRHJvcElkIC0gVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdG9rZW4gZHJvcC4KLy8gQHJldHVybiB7VG9rZW5Ecm9wSW5mb30gQW4gb2JqZWN0IGNvbnRhaW5pbmcgZGV0YWlscyBhYm91dCB0aGUgc3BlY2lmaWVkIHRva2VuIGRyb3AuCmdldERyb3BJbmZvOgoJcHJvdG8gMSAxCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjIwNAoJLy8gcmV0dXJuIHRoaXMuYWxsRHJvcHModG9rZW5Ecm9wSWQpLnZhbHVlCglieXRlYyAxIC8vICAiZCIKCWZyYW1lX2RpZyAtMSAvLyB0b2tlbkRyb3BJZDogVG9rZW5Ecm9wSWQKCWl0b2IKCWNvbmNhdAoJYm94X2dldAoKCS8vIGJveCB2YWx1ZSBkb2VzIG5vdCBleGlzdDogdGhpcy5hbGxEcm9wcyh0b2tlbkRyb3BJZCkudmFsdWUKCWFzc2VydAoJcmV0c3ViCgovLyBjcmVhdGVEcm9wKHBheSxheGZlciwodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDgsYWRkcmVzcyx1aW50NjRbNF0sdWludDY0KSl1aW50NjQKKmFiaV9yb3V0ZV9jcmVhdGVEcm9wOgoJLy8gVGhlIEFCSSByZXR1cm4gcHJlZml4CglieXRlYyAzIC8vIDB4MTUxZjdjNzUKCgkvLyB0b2tlbkRyb3BDb25maWc6ICh1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50OCxhZGRyZXNzLHVpbnQ2NFs0XSx1aW50NjQpCgl0eG5hIEFwcGxpY2F0aW9uQXJncyAxCglkdXAKCWxlbgoJcHVzaGludCA5NwoJPT0KCgkvLyBhcmd1bWVudCAwICh0b2tlbkRyb3BDb25maWcpIGZvciBjcmVhdGVEcm9wIG11c3QgYmUgYSAodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDgsYWRkcmVzcyx1aW50NjRbNF0sdWludDY0KQoJYXNzZXJ0CgoJLy8gYXNzZXRUeG46IGF4ZmVyCgl0eG4gR3JvdXBJbmRleAoJaW50YyAwIC8vIDEKCS0KCWR1cAoJZ3R4bnMgVHlwZUVudW0KCWludGMgNSAvLyAgYXhmZXIKCT09CgoJLy8gYXJndW1lbnQgMSAoYXNzZXRUeG4pIGZvciBjcmVhdGVEcm9wIG11c3QgYmUgYSBheGZlciB0cmFuc2FjdGlvbgoJYXNzZXJ0CgoJLy8gZmVlQW5kTWJyUGF5bWVudDogcGF5Cgl0eG4gR3JvdXBJbmRleAoJaW50YyA0IC8vIDIKCS0KCWR1cAoJZ3R4bnMgVHlwZUVudW0KCWludGMgMCAvLyAgcGF5Cgk9PQoKCS8vIGFyZ3VtZW50IDIgKGZlZUFuZE1iclBheW1lbnQpIGZvciBjcmVhdGVEcm9wIG11c3QgYmUgYSBwYXkgdHJhbnNhY3Rpb24KCWFzc2VydAoKCS8vIGV4ZWN1dGUgY3JlYXRlRHJvcChwYXksYXhmZXIsKHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ4LGFkZHJlc3MsdWludDY0WzRdLHVpbnQ2NCkpdWludDY0CgljYWxsc3ViIGNyZWF0ZURyb3AKCWl0b2IKCWNvbmNhdAoJbG9nCglpbnRjIDAgLy8gMQoJcmV0dXJuCgovLyBjcmVhdGVEcm9wKGZlZUFuZE1iclBheW1lbnQ6IFBheVR4biwgYXNzZXRUeG46IEFzc2V0VHJhbnNmZXJUeG4sIHRva2VuRHJvcENvbmZpZzogVG9rZW5Ecm9wQ29uZmlnKTogdWludDY0Ci8vCi8vIENyZWF0ZXMgYSBuZXcgdG9rZW4gZHJvcCBhbmQgcmVnaXN0ZXJzIGl0IGluIHRoZSBzeXN0ZW0uCi8vCi8vIFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBhbmQgcHJvY2Vzc2VzIGEgdG9rZW4gZHJvcCwgZW5zdXJpbmcgYWxsIHJlcXVpcmVkIGNvbmRpdGlvbnMKLy8gYXJlIG1ldC4gSXQgcmVnaXN0ZXJzIHRoZSB0b2tlbiBkcm9wIHdpdGggYW4gYXNzaWduZWQgdW5pcXVlIERyb3BJZCwgdXBkYXRlcyB0aGUKLy8gcmVsZXZhbnQgc3RhdGUgdmFyaWFibGVzLCBhbmQgZW5zdXJlcyB0aGF0IHRoZSBkcm9wIGNvbXBsaWVzIHdpdGggZ2F0aW5nIHJ1bGVzCi8vIGFuZCBsaW1pdHMuCi8vCi8vIEBwYXJhbSB7UGF5VHhufSBmZWVBbmRNYnJQYXltZW50IC0gcHJvY2VlZGluZyBwYXltZW50IHR4biBpbnRvIGNvbnRyYWN0IGFjY291bnQgdG8gY292ZXIgZXh0cmEgbWJyIG5lZWRlZCBmb3IgYm94Ci8vIHN0b3JhZ2UgYXMgd2VsbCBhcyBGVVRVUkUgYm94IHN0b3JhZ2UgZm9yIGFsbCBwb3NzaWJsZSBjbGFpbXMuICBpZTogMTBLIHRva2VucywgMUsgZWFjaCAtIDEwIHBvc3NpYmxlIGNsYWltcywKLy8gc28gdGhlIGNvc3QgcGVyIGNsYWltIC0gdGhlIGRyb3AgY3JlYXRvciBoYXMgdG8gcGF5IHRoYXQgdXBmcm9udCBhcyB3ZWxsLgovLyBAcGFyYW0ge0Fzc2V0VHJhbnNmZXJUeG59IGFzc2V0VHhuIC0gVGhlIGFzc2V0IHRyYW5zZmVyIHRyYW5zYWN0aW9uIHRoYXQgdHJhbnNmZXJzIHRva2VucyBmb3IgdGhpcyBkcm9wLgovLyBAcGFyYW0ge1Rva2VuRHJvcEluZm99IHRva2VuRHJvcENvbmZpZyAtIFRoZSBtZXRhZGF0YSByZWxhdGVkIHRvIHRoZSB0b2tlbiBkcm9wLCBpbmNsdWRpbmcgZHJvcCBjcmVhdG9yLCB0b2tlbiBkZXRhaWxzLAovLyBhbW91bnQgcGVyIGNsYWltLCBhaXJkcm9wIGVuZCB0aW1lLCBhbmQgcmVsYXRlZCBnYXRpbmcgaW5mby4KLy8gQHJldHVybiB7dWludDY0fSBSZXR1cm5zIHRoZSB0b2tlbiBkcm9wIGlkIGFzc2lnbmVkIGZvciB0aGlzIGRyb3AuCmNyZWF0ZURyb3A6Cglwcm90byAzIDEKCgkvLyBQdXNoIGVtcHR5IGJ5dGVzIGFmdGVyIHRoZSBmcmFtZSBwb2ludGVyIHRvIHJlc2VydmUgc3BhY2UgZm9yIGxvY2FsIHZhcmlhYmxlcwoJYnl0ZWMgMCAvLyAweAoJZHVwbiAzCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjIyNAoJLy8gdmVyaWZ5QXNzZXRUcmFuc2ZlclR4bihhc3NldFR4biwgeyBhc3NldFJlY2VpdmVyOiB0aGlzLmFwcC5hZGRyZXNzIH0pCgkvLyB2ZXJpZnkgYXNzZXRSZWNlaXZlcgoJZnJhbWVfZGlnIC0yIC8vIGFzc2V0VHhuOiBBc3NldFRyYW5zZmVyVHhuCglndHhucyBBc3NldFJlY2VpdmVyCglnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwoJPT0KCgkvLyB0cmFuc2FjdGlvbiB2ZXJpZmljYXRpb24gZmFpbGVkOiB7InR4biI6ImFzc2V0VHhuIiwiZmllbGQiOiJhc3NldFJlY2VpdmVyIiwiZXhwZWN0ZWQiOiJ0aGlzLmFwcC5hZGRyZXNzIn0KCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyMjUKCS8vIGFzc2VydChhc3NldFR4bi5hc3NldEFtb3VudCA+IDAsICdtdXN0IGhhdmUgYSBwb3NpdGl2ZSBhbW91bnQnKQoJZnJhbWVfZGlnIC0yIC8vIGFzc2V0VHhuOiBBc3NldFRyYW5zZmVyVHhuCglndHhucyBBc3NldEFtb3VudAoJaW50YyAxIC8vIDAKCT4KCgkvLyBtdXN0IGhhdmUgYSBwb3NpdGl2ZSBhbW91bnQKCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyMjcKCS8vIGFzc2VydChhc3NldFR4bi54ZmVyQXNzZXQgPT09IHRva2VuRHJvcENvbmZpZy5Ub2tlbiwgJ2Fzc2V0IHNlbnQgbXVzdCBiZSBzYW1lIGFzIGFzc2V0IHNwZWNpZmllZCBmb3IgZHJvcHMnKQoJZnJhbWVfZGlnIC0yIC8vIGFzc2V0VHhuOiBBc3NldFRyYW5zZmVyVHhuCglndHhucyBYZmVyQXNzZXQKCWZyYW1lX2RpZyAtMyAvLyB0b2tlbkRyb3BDb25maWc6IFRva2VuRHJvcENvbmZpZwoJZXh0cmFjdCAwIDgKCWJ0b2kKCT09CgoJLy8gYXNzZXQgc2VudCBtdXN0IGJlIHNhbWUgYXMgYXNzZXQgc3BlY2lmaWVkIGZvciBkcm9wcwoJYXNzZXJ0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjIyOAoJLy8gYXNzZXJ0KHRoaXMuYXBwLmFkZHJlc3MuaXNPcHRlZEluVG9Bc3NldChhc3NldFR4bi54ZmVyQXNzZXQpLCAnbXVzdCBvcHQtaW4gY29udHJhY3QgZmlyc3QnKQoJZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKCWZyYW1lX2RpZyAtMiAvLyBhc3NldFR4bjogQXNzZXRUcmFuc2ZlclR4bgoJZ3R4bnMgWGZlckFzc2V0Cglhc3NldF9ob2xkaW5nX2dldCBBc3NldEJhbGFuY2UKCXN3YXAKCXBvcAoKCS8vIG11c3Qgb3B0LWluIGNvbnRyYWN0IGZpcnN0Cglhc3NlcnQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MjMwCgkvLyBhc3NlcnQodG9rZW5Ecm9wQ29uZmlnLlRva2VuID09PSBhc3NldFR4bi54ZmVyQXNzZXQsICd0b2tlbiBtdXN0IG1hdGNoIGFzc2V0IGJlaW5nIHRyYW5zZmVycmVkJykKCWZyYW1lX2RpZyAtMyAvLyB0b2tlbkRyb3BDb25maWc6IFRva2VuRHJvcENvbmZpZwoJZXh0cmFjdCAwIDgKCWJ0b2kKCWZyYW1lX2RpZyAtMiAvLyBhc3NldFR4bjogQXNzZXRUcmFuc2ZlclR4bgoJZ3R4bnMgWGZlckFzc2V0Cgk9PQoKCS8vIHRva2VuIG11c3QgbWF0Y2ggYXNzZXQgYmVpbmcgdHJhbnNmZXJyZWQKCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyMzEKCS8vIGFzc2VydCgKCS8vICAgICAgICAgICAgIHRva2VuRHJvcENvbmZpZy5BbW91bnRQZXJDbGFpbSA8PSBhc3NldFR4bi5hc3NldEFtb3VudCwKCS8vICAgICAgICAgICAgICdhbW91bnQgcGVyIGNsYWltIG11c3QgYmUgYXQgbGVhc3QgYW1vdW50IHRyYW5zZmVycmVkJywKCS8vICAgICAgICAgKQoJZnJhbWVfZGlnIC0zIC8vIHRva2VuRHJvcENvbmZpZzogVG9rZW5Ecm9wQ29uZmlnCglleHRyYWN0IDggOAoJYnRvaQoJZnJhbWVfZGlnIC0yIC8vIGFzc2V0VHhuOiBBc3NldFRyYW5zZmVyVHhuCglndHhucyBBc3NldEFtb3VudAoJPD0KCgkvLyBhbW91bnQgcGVyIGNsYWltIG11c3QgYmUgYXQgbGVhc3QgYW1vdW50IHRyYW5zZmVycmVkCglhc3NlcnQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MjM1CgkvLyBhc3NlcnQoCgkvLyAgICAgICAgICAgICBhc3NldFR4bi5hc3NldEFtb3VudCAlIHRva2VuRHJvcENvbmZpZy5BbW91bnRQZXJDbGFpbSA9PT0gMCwKCS8vICAgICAgICAgICAgICdhbW91bnQgbXVzdCBiZSBkaXZpc2libGUgYnkgYW1vdW50IHBlciBjbGFpbScsCgkvLyAgICAgICAgICkKCWZyYW1lX2RpZyAtMiAvLyBhc3NldFR4bjogQXNzZXRUcmFuc2ZlclR4bgoJZ3R4bnMgQXNzZXRBbW91bnQKCWZyYW1lX2RpZyAtMyAvLyB0b2tlbkRyb3BDb25maWc6IFRva2VuRHJvcENvbmZpZwoJZXh0cmFjdCA4IDgKCWJ0b2kKCSUKCWludGMgMSAvLyAwCgk9PQoKCS8vIGFtb3VudCBtdXN0IGJlIGRpdmlzaWJsZSBieSBhbW91bnQgcGVyIGNsYWltCglhc3NlcnQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MjM5CgkvLyBhc3NlcnQoCgkvLyAgICAgICAgICAgICB0b2tlbkRyb3BDb25maWcuQWlyZHJvcEVuZFRpbWUgPiBnbG9iYWxzLmxhdGVzdFRpbWVzdGFtcCArIDg2NDAwLAoJLy8gICAgICAgICAgICAgJ2FpcmRyb3AgZW5kIHRpbWUgbXVzdCBiZSBhdCBsZWFzdCAxIGRheSBpbnRvIHRoZSBmdXR1cmUnLAoJLy8gICAgICAgICApCglmcmFtZV9kaWcgLTMgLy8gdG9rZW5Ecm9wQ29uZmlnOiBUb2tlbkRyb3BDb25maWcKCWV4dHJhY3QgMTYgOAoJYnRvaQoJZ2xvYmFsIExhdGVzdFRpbWVzdGFtcAoJcHVzaGludCA4NjQwMAoJKwoJPgoKCS8vIGFpcmRyb3AgZW5kIHRpbWUgbXVzdCBiZSBhdCBsZWFzdCAxIGRheSBpbnRvIHRoZSBmdXR1cmUKCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyNDQKCS8vIGFzc2VydCgKCS8vICAgICAgICAgICAgIHRva2VuRHJvcENvbmZpZy5BaXJkcm9wRW5kVGltZSA8PSBnbG9iYWxzLmxhdGVzdFRpbWVzdGFtcCArIDM2MDAgKyA4NjQwMCAqIDcsCgkvLyAgICAgICAgICAgICAiYWlyZHJvcCBjYW4ndCBsYXN0IG1vcmUgdGhhbiAxIHdlZWsiLAoJLy8gICAgICAgICApCglmcmFtZV9kaWcgLTMgLy8gdG9rZW5Ecm9wQ29uZmlnOiBUb2tlbkRyb3BDb25maWcKCWV4dHJhY3QgMTYgOAoJYnRvaQoJZ2xvYmFsIExhdGVzdFRpbWVzdGFtcAoJcHVzaGludCAzNjAwCgkrCglwdXNoaW50IDYwNDgwMAoJKwoJPD0KCgkvLyBhaXJkcm9wIGNhbid0IGxhc3QgbW9yZSB0aGFuIDEgd2VlawoJYXNzZXJ0CgoJLy8gKmlmMV9jb25kaXRpb24KCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyNDkKCS8vIHRoaXMuZHJvcEZvclRva2VuKHRva2VuRHJvcENvbmZpZy5Ub2tlbikuZXhpc3RzCglieXRlYyA0IC8vICAidG9rIgoJZnJhbWVfZGlnIC0zIC8vIHRva2VuRHJvcENvbmZpZzogVG9rZW5Ecm9wQ29uZmlnCglleHRyYWN0IDAgOAoJYnRvaQoJaXRvYgoJY29uY2F0Cglib3hfbGVuCglzd2FwCglwb3AKCWJ6ICppZjFfZW5kCgoJLy8gKmlmMV9jb25zZXF1ZW50CgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MjUwCgkvLyBkcm9wSW5mbyA9IHRoaXMuYWxsRHJvcHModGhpcy5kcm9wRm9yVG9rZW4odG9rZW5Ecm9wQ29uZmlnLlRva2VuKS52YWx1ZSkudmFsdWUKCWJ5dGVjIDEgLy8gICJkIgoJYnl0ZWMgNCAvLyAgInRvayIKCWZyYW1lX2RpZyAtMyAvLyB0b2tlbkRyb3BDb25maWc6IFRva2VuRHJvcENvbmZpZwoJZXh0cmFjdCAwIDgKCWJ0b2kKCWl0b2IKCWNvbmNhdAoJYm94X2dldAoKCS8vIGJveCB2YWx1ZSBkb2VzIG5vdCBleGlzdDogdGhpcy5kcm9wRm9yVG9rZW4odG9rZW5Ecm9wQ29uZmlnLlRva2VuKS52YWx1ZQoJYXNzZXJ0CglidG9pCglpdG9iCgljb25jYXQKCWZyYW1lX2J1cnkgMCAvLyBzdG9yYWdlIGtleS8vZHJvcEluZm8KCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MjUxCgkvLyBhc3NlcnQodGhpcy5pc0Ryb3BFeHBpcmVkT3JFbXB0eShkcm9wSW5mbyksICdleGlzdGluZyBkcm9wIG11c3QgYmUgZXhwaXJlZCBvciBoYXZlIG5vIHJlbWFpbmluZyB0b2tlbnMnKQoJZnJhbWVfZGlnIDAgLy8gc3RvcmFnZSBrZXkvL2Ryb3BJbmZvCglib3hfZ2V0CgoJLy8gYm94IHZhbHVlIGRvZXMgbm90IGV4aXN0OiB0aGlzLmFsbERyb3BzKHRoaXMuZHJvcEZvclRva2VuKHRva2VuRHJvcENvbmZpZy5Ub2tlbikudmFsdWUpLnZhbHVlCglhc3NlcnQKCWNhbGxzdWIgaXNEcm9wRXhwaXJlZE9yRW1wdHkKCgkvLyBleGlzdGluZyBkcm9wIG11c3QgYmUgZXhwaXJlZCBvciBoYXZlIG5vIHJlbWFpbmluZyB0b2tlbnMKCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyNTMKCS8vIHRoaXMuY2xlYW51cERyb3AodGhpcy5kcm9wRm9yVG9rZW4odG9rZW5Ecm9wQ29uZmlnLlRva2VuKS52YWx1ZSkKCWJ5dGVjIDQgLy8gICJ0b2siCglmcmFtZV9kaWcgLTMgLy8gdG9rZW5Ecm9wQ29uZmlnOiBUb2tlbkRyb3BDb25maWcKCWV4dHJhY3QgMCA4CglidG9pCglpdG9iCgljb25jYXQKCWJveF9nZXQKCgkvLyBib3ggdmFsdWUgZG9lcyBub3QgZXhpc3Q6IHRoaXMuZHJvcEZvclRva2VuKHRva2VuRHJvcENvbmZpZy5Ub2tlbikudmFsdWUKCWFzc2VydAoJYnRvaQoJY2FsbHN1YiBjbGVhbnVwRHJvcAoKKmlmMV9lbmQ6CgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MjU1CgkvLyB0aGlzLmNoZWNrR2F0aW5nSW5mbyh0b2tlbkRyb3BDb25maWcpCglmcmFtZV9kaWcgLTMgLy8gdG9rZW5Ecm9wQ29uZmlnOiBUb2tlbkRyb3BDb25maWcKCWNhbGxzdWIgY2hlY2tHYXRpbmdJbmZvCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjI1OAoJLy8gdGhpcy5sYXN0RHJvcElkLnZhbHVlICs9IDEKCWJ5dGVjIDcgLy8gICJsYXN0RHJvcElkIgoJYXBwX2dsb2JhbF9nZXQKCWludGMgMCAvLyAxCgkrCglieXRlYyA3IC8vICAibGFzdERyb3BJZCIKCXN3YXAKCWFwcF9nbG9iYWxfcHV0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjI1OQoJLy8gdG9rZW5Ecm9wSWQgPSB0aGlzLmxhc3REcm9wSWQudmFsdWUKCWJ5dGVjIDcgLy8gICJsYXN0RHJvcElkIgoJYXBwX2dsb2JhbF9nZXQKCWZyYW1lX2J1cnkgMSAvLyB0b2tlbkRyb3BJZDogdWludDY0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjI2MgoJLy8gZHJvcEluZm86IFRva2VuRHJvcEluZm8gPSB7CgkvLyAgICAgICAgICAgICBEcm9wSWQ6IHRva2VuRHJvcElkLAoJLy8gICAgICAgICAgICAgRHJvcENyZWF0b3I6IGFzc2V0VHhuLnNlbmRlciwKCS8vICAgICAgICAgICAgIEFtb3VudFJlbWFpbmluZzogYXNzZXRUeG4uYXNzZXRBbW91bnQsCgkvLyAgICAgICAgICAgICBNYXhDbGFpbXM6IGFzc2V0VHhuLmFzc2V0QW1vdW50IC8gdG9rZW5Ecm9wQ29uZmlnLkFtb3VudFBlckNsYWltLAoJLy8gICAgICAgICAgICAgTnVtQ2xhaW1zOiAwLAoJLy8gICAgICAgICAgICAgQ29uZmlnOiB0b2tlbkRyb3BDb25maWcsCgkvLyAgICAgICAgIH0KCWZyYW1lX2RpZyAxIC8vIHRva2VuRHJvcElkOiB1aW50NjQKCWl0b2IKCWZyYW1lX2RpZyAtMiAvLyBhc3NldFR4bjogQXNzZXRUcmFuc2ZlclR4bgoJZ3R4bnMgU2VuZGVyCgljb25jYXQKCWZyYW1lX2RpZyAtMiAvLyBhc3NldFR4bjogQXNzZXRUcmFuc2ZlclR4bgoJZ3R4bnMgQXNzZXRBbW91bnQKCWl0b2IKCWNvbmNhdAoJZnJhbWVfZGlnIC0yIC8vIGFzc2V0VHhuOiBBc3NldFRyYW5zZmVyVHhuCglndHhucyBBc3NldEFtb3VudAoJZnJhbWVfZGlnIC0zIC8vIHRva2VuRHJvcENvbmZpZzogVG9rZW5Ecm9wQ29uZmlnCglleHRyYWN0IDggOAoJYnRvaQoJLwoJaXRvYgoJY29uY2F0CglwdXNoYnl0ZXMgMHgwMDAwMDAwMDAwMDAwMDAwCgljb25jYXQKCWZyYW1lX2RpZyAtMyAvLyB0b2tlbkRyb3BDb25maWc6IFRva2VuRHJvcENvbmZpZwoJY29uY2F0CglmcmFtZV9idXJ5IDIgLy8gZHJvcEluZm86IFRva2VuRHJvcEluZm8KCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MjcyCgkvLyB0aGlzLmFkZE5ld0Ryb3AodG9rZW5Ecm9wSWQsIGRyb3BJbmZvKQoJZnJhbWVfZGlnIDIgLy8gZHJvcEluZm86IFRva2VuRHJvcEluZm8KCWZyYW1lX2RpZyAxIC8vIHRva2VuRHJvcElkOiB1aW50NjQKCWNhbGxzdWIgYWRkTmV3RHJvcAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyNzQKCS8vIHZlcmlmeVBheVR4bihmZWVBbmRNYnJQYXltZW50LCB7IHJlY2VpdmVyOiB0aGlzLmFwcC5hZGRyZXNzIH0pCgkvLyB2ZXJpZnkgcmVjZWl2ZXIKCWZyYW1lX2RpZyAtMSAvLyBmZWVBbmRNYnJQYXltZW50OiBQYXlUeG4KCWd0eG5zIFJlY2VpdmVyCglnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwoJPT0KCgkvLyB0cmFuc2FjdGlvbiB2ZXJpZmljYXRpb24gZmFpbGVkOiB7InR4biI6ImZlZUFuZE1iclBheW1lbnQiLCJmaWVsZCI6InJlY2VpdmVyIiwiZXhwZWN0ZWQiOiJ0aGlzLmFwcC5hZGRyZXNzIn0KCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyNzUKCS8vIG1ickNvc3RzID0gdGhpcy5nZXREcm9wQ3JlYXRlQ29zdCgpCgljYWxsc3ViIGdldERyb3BDcmVhdGVDb3N0CglmcmFtZV9idXJ5IDMgLy8gbWJyQ29zdHM6IHVpbnQ2NAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyNzYKCS8vIGFzc2VydChmZWVBbmRNYnJQYXltZW50LmFtb3VudCA+PSBtYnJDb3N0cywgJ211c3QgcGF5IGF0IGxlYXN0IE1CUiBjb3N0cycpCglmcmFtZV9kaWcgLTEgLy8gZmVlQW5kTWJyUGF5bWVudDogUGF5VHhuCglndHhucyBBbW91bnQKCWZyYW1lX2RpZyAzIC8vIG1ickNvc3RzOiB1aW50NjQKCT49CgoJLy8gbXVzdCBwYXkgYXQgbGVhc3QgTUJSIGNvc3RzCglhc3NlcnQKCgkvLyAqaWYyX2NvbmRpdGlvbgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjI3NwoJLy8gZmVlQW5kTWJyUGF5bWVudC5hbW91bnQgPiBtYnJDb3N0cwoJZnJhbWVfZGlnIC0xIC8vIGZlZUFuZE1iclBheW1lbnQ6IFBheVR4bgoJZ3R4bnMgQW1vdW50CglmcmFtZV9kaWcgMyAvLyBtYnJDb3N0czogdWludDY0Cgk+CglieiAqaWYyX2VuZAoKCS8vICppZjJfY29uc2VxdWVudAoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjI3OAoJLy8gc2VuZFBheW1lbnQoewoJLy8gICAgICAgICAgICAgICAgIHJlY2VpdmVyOiBmZWVBbmRNYnJQYXltZW50LnNlbmRlciwKCS8vICAgICAgICAgICAgICAgICBhbW91bnQ6IGZlZUFuZE1iclBheW1lbnQuYW1vdW50IC0gbWJyQ29zdHMsCgkvLyAgICAgICAgICAgICAgICAgbm90ZTogJ2V4Y2VzcyBtYnIgcmVmdW5kJywKCS8vICAgICAgICAgICAgIH0pCglpdHhuX2JlZ2luCglpbnRjIDAgLy8gIHBheQoJaXR4bl9maWVsZCBUeXBlRW51bQoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyNzkKCS8vIHJlY2VpdmVyOiBmZWVBbmRNYnJQYXltZW50LnNlbmRlcgoJZnJhbWVfZGlnIC0xIC8vIGZlZUFuZE1iclBheW1lbnQ6IFBheVR4bgoJZ3R4bnMgU2VuZGVyCglpdHhuX2ZpZWxkIFJlY2VpdmVyCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjI4MAoJLy8gYW1vdW50OiBmZWVBbmRNYnJQYXltZW50LmFtb3VudCAtIG1ickNvc3RzCglmcmFtZV9kaWcgLTEgLy8gZmVlQW5kTWJyUGF5bWVudDogUGF5VHhuCglndHhucyBBbW91bnQKCWZyYW1lX2RpZyAzIC8vIG1ickNvc3RzOiB1aW50NjQKCS0KCWl0eG5fZmllbGQgQW1vdW50CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjI4MQoJLy8gbm90ZTogJ2V4Y2VzcyBtYnIgcmVmdW5kJwoJcHVzaGJ5dGVzIDB4NjU3ODYzNjU3MzczMjA2ZDYyNzIyMDcyNjU2Njc1NmU2NCAvLyAiZXhjZXNzIG1iciByZWZ1bmQiCglpdHhuX2ZpZWxkIE5vdGUKCgkvLyBGZWUgZmllbGQgbm90IHNldCwgZGVmYXVsdGluZyB0byAwCglpbnRjIDEgLy8gMAoJaXR4bl9maWVsZCBGZWUKCgkvLyBTdWJtaXQgaW5uZXIgdHJhbnNhY3Rpb24KCWl0eG5fc3VibWl0CgoqaWYyX2VuZDoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyODYKCS8vIHNlbmRQYXltZW50KHsKCS8vICAgICAgICAgICAgIHJlY2VpdmVyOiB0aGlzLm1haW50YWluZXJBZGRyZXNzLnZhbHVlLAoJLy8gICAgICAgICAgICAgYW1vdW50OiB0aGlzLmNyZWF0aW9uRmVlQW1vdW50LnZhbHVlIC8gMiwKCS8vICAgICAgICAgICAgIG5vdGU6ICdUb2tlbkRyb3AgZmVlJywKCS8vICAgICAgICAgfSkKCWl0eG5fYmVnaW4KCWludGMgMCAvLyAgcGF5CglpdHhuX2ZpZWxkIFR5cGVFbnVtCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjI4NwoJLy8gcmVjZWl2ZXI6IHRoaXMubWFpbnRhaW5lckFkZHJlc3MudmFsdWUKCWJ5dGVjIDUgLy8gICJtYWludGFpbmVyQWRkcmVzcyIKCWFwcF9nbG9iYWxfZ2V0CglpdHhuX2ZpZWxkIFJlY2VpdmVyCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjI4OAoJLy8gYW1vdW50OiB0aGlzLmNyZWF0aW9uRmVlQW1vdW50LnZhbHVlIC8gMgoJYnl0ZWMgMiAvLyAgImNyZWF0aW9uRmVlQW1vdW50IgoJYXBwX2dsb2JhbF9nZXQKCWludGMgNCAvLyAyCgkvCglpdHhuX2ZpZWxkIEFtb3VudAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyODkKCS8vIG5vdGU6ICdUb2tlbkRyb3AgZmVlJwoJYnl0ZWMgNiAvLyAgIlRva2VuRHJvcCBmZWUiCglpdHhuX2ZpZWxkIE5vdGUKCgkvLyBGZWUgZmllbGQgbm90IHNldCwgZGVmYXVsdGluZyB0byAwCglpbnRjIDEgLy8gMAoJaXR4bl9maWVsZCBGZWUKCgkvLyBTdWJtaXQgaW5uZXIgdHJhbnNhY3Rpb24KCWl0eG5fc3VibWl0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjI5MQoJLy8gc2VuZFBheW1lbnQoewoJLy8gICAgICAgICAgICAgcmVjZWl2ZXI6IGJsb2Nrc1t0aGlzLnR4bi5maXJzdFZhbGlkIC0gMV0uZmVlU2luaywKCS8vICAgICAgICAgICAgIGFtb3VudDogdGhpcy5jcmVhdGlvbkZlZUFtb3VudC52YWx1ZSAvIDIsCgkvLyAgICAgICAgICAgICBub3RlOiAnVG9rZW5Ecm9wIGZlZScsCgkvLyAgICAgICAgIH0pCglpdHhuX2JlZ2luCglpbnRjIDAgLy8gIHBheQoJaXR4bl9maWVsZCBUeXBlRW51bQoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyOTIKCS8vIHJlY2VpdmVyOiBibG9ja3NbdGhpcy50eG4uZmlyc3RWYWxpZCAtIDFdLmZlZVNpbmsKCXR4biBGaXJzdFZhbGlkCglpbnRjIDAgLy8gMQoJLQoJYmxvY2sgQmxrRmVlU2luawoJaXR4bl9maWVsZCBSZWNlaXZlcgoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyOTMKCS8vIGFtb3VudDogdGhpcy5jcmVhdGlvbkZlZUFtb3VudC52YWx1ZSAvIDIKCWJ5dGVjIDIgLy8gICJjcmVhdGlvbkZlZUFtb3VudCIKCWFwcF9nbG9iYWxfZ2V0CglpbnRjIDQgLy8gMgoJLwoJaXR4bl9maWVsZCBBbW91bnQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6Mjk0CgkvLyBub3RlOiAnVG9rZW5Ecm9wIGZlZScKCWJ5dGVjIDYgLy8gICJUb2tlbkRyb3AgZmVlIgoJaXR4bl9maWVsZCBOb3RlCgoJLy8gRmVlIGZpZWxkIG5vdCBzZXQsIGRlZmF1bHRpbmcgdG8gMAoJaW50YyAxIC8vIDAKCWl0eG5fZmllbGQgRmVlCgoJLy8gU3VibWl0IGlubmVyIHRyYW5zYWN0aW9uCglpdHhuX3N1Ym1pdAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czoyOTcKCS8vIHJldHVybiB0b2tlbkRyb3BJZAoJZnJhbWVfZGlnIDEgLy8gdG9rZW5Ecm9wSWQ6IHVpbnQ2NAoKCS8vIHNldCB0aGUgc3Vicm91dGluZSByZXR1cm4gdmFsdWUKCWZyYW1lX2J1cnkgMAoKCS8vIHBvcCBhbGwgbG9jYWwgdmFyaWFibGVzIGZyb20gdGhlIHN0YWNrCglwb3BuIDMKCXJldHN1YgoKLy8gY2FuY2VsRHJvcCh1aW50NjQpdm9pZAoqYWJpX3JvdXRlX2NhbmNlbERyb3A6CgkvLyB0b2tlbkRyb3BJZDogdWludDY0Cgl0eG5hIEFwcGxpY2F0aW9uQXJncyAxCglidG9pCgoJLy8gZXhlY3V0ZSBjYW5jZWxEcm9wKHVpbnQ2NCl2b2lkCgljYWxsc3ViIGNhbmNlbERyb3AKCWludGMgMCAvLyAxCglyZXR1cm4KCi8vIGNhbmNlbERyb3AodG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkKTogdm9pZApjYW5jZWxEcm9wOgoJcHJvdG8gMSAwCgoJLy8gUHVzaCBlbXB0eSBieXRlcyBhZnRlciB0aGUgZnJhbWUgcG9pbnRlciB0byByZXNlcnZlIHNwYWNlIGZvciBsb2NhbCB2YXJpYWJsZXMKCWJ5dGVjIDAgLy8gMHgKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MzAxCgkvLyBkcm9wSW5mbyA9IHRoaXMuYWxsRHJvcHModG9rZW5Ecm9wSWQpLnZhbHVlCglieXRlYyAxIC8vICAiZCIKCWZyYW1lX2RpZyAtMSAvLyB0b2tlbkRyb3BJZDogVG9rZW5Ecm9wSWQKCWl0b2IKCWNvbmNhdAoJZnJhbWVfYnVyeSAwIC8vIHN0b3JhZ2Uga2V5Ly9kcm9wSW5mbwoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozMDIKCS8vIGFzc2VydCh0aGlzLnR4bi5zZW5kZXIgPT09IGRyb3BJbmZvLkRyb3BDcmVhdG9yLCAnb25seSBkcm9wIGNyZWF0b3IgY2FuIGNhbmNlbCBhIGRyb3AnKQoJdHhuIFNlbmRlcgoJaW50YyAyIC8vICBoZWFkT2Zmc2V0CglpbnRjIDMgLy8gMzIKCWJ5dGVjIDEgLy8gICJkIgoJZnJhbWVfZGlnIC0xIC8vIHRva2VuRHJvcElkOiBUb2tlbkRyb3BJZAoJaXRvYgoJY29uY2F0Cgljb3ZlciAyCglib3hfZXh0cmFjdAoJPT0KCgkvLyBvbmx5IGRyb3AgY3JlYXRvciBjYW4gY2FuY2VsIGEgZHJvcAoJYXNzZXJ0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjMwMwoJLy8gdGhpcy5jbGVhbnVwRHJvcCh0b2tlbkRyb3BJZCkKCWZyYW1lX2RpZyAtMSAvLyB0b2tlbkRyb3BJZDogVG9rZW5Ecm9wSWQKCWNhbGxzdWIgY2xlYW51cERyb3AKCXJldHN1YgoKLy8gY2xhaW1Ecm9wKHBheSx1aW50NjQsdWludDY0KXZvaWQKKmFiaV9yb3V0ZV9jbGFpbURyb3A6CgkvLyB2YWx1ZVRvVmVyaWZ5OiB1aW50NjQKCXR4bmEgQXBwbGljYXRpb25BcmdzIDIKCWJ0b2kKCgkvLyB0b2tlbkRyb3BJZDogdWludDY0Cgl0eG5hIEFwcGxpY2F0aW9uQXJncyAxCglidG9pCgoJLy8gZmVlQW5kTWJyUGF5bWVudDogcGF5Cgl0eG4gR3JvdXBJbmRleAoJaW50YyAwIC8vIDEKCS0KCWR1cAoJZ3R4bnMgVHlwZUVudW0KCWludGMgMCAvLyAgcGF5Cgk9PQoKCS8vIGFyZ3VtZW50IDIgKGZlZUFuZE1iclBheW1lbnQpIGZvciBjbGFpbURyb3AgbXVzdCBiZSBhIHBheSB0cmFuc2FjdGlvbgoJYXNzZXJ0CgoJLy8gZXhlY3V0ZSBjbGFpbURyb3AocGF5LHVpbnQ2NCx1aW50NjQpdm9pZAoJY2FsbHN1YiBjbGFpbURyb3AKCWludGMgMCAvLyAxCglyZXR1cm4KCi8vIGNsYWltRHJvcChmZWVBbmRNYnJQYXltZW50OiBQYXlUeG4sIHRva2VuRHJvcElkOiBUb2tlbkRyb3BJZCwgdmFsdWVUb1ZlcmlmeTogdWludDY0KTogdm9pZAovLwovLyBQcm9jZXNzZXMgYSBjbGFpbSByZXF1ZXN0IGZvciBhIHNwZWNpZmljIHRva2VuIGRyb3AsIGVuc3VyaW5nIGNvbXBsaWFuY2Ugd2l0aCBhbGwgdmFsaWRhdGlvbiBydWxlcyBhbmQgY29uZGl0aW9ucy4KLy8KLy8gQHBhcmFtIHtQYXlUeG59IGZlZUFuZE1iclBheW1lbnQgLSBUaGUgcGF5bWVudCB0cmFuc2FjdGlvbiBvYmplY3QgcHJvdmlkZWQgYnkgdGhlIGNsYWltYW50IHRvIGNvdmVyIG5lY2Vzc2FyeSBmZWVzLgovLyBAcGFyYW0ge1Rva2VuRHJvcElkfSB0b2tlbkRyb3BJZCAtIFRoZSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgdG9rZW4gZHJvcCBiZWluZyBjbGFpbWVkLgovLyBAcGFyYW0ge3VpbnQ2NH0gdmFsdWVUb1ZlcmlmeSAtIEFuIG9wdGlvbmFsIHZhbHVlIHVzZWQgZm9yIGNsYWltIGdhdGluZyB2ZXJpZmljYXRpb24uCmNsYWltRHJvcDoKCXByb3RvIDMgMAoKCS8vIFB1c2ggZW1wdHkgYnl0ZXMgYWZ0ZXIgdGhlIGZyYW1lIHBvaW50ZXIgdG8gcmVzZXJ2ZSBzcGFjZSBmb3IgbG9jYWwgdmFyaWFibGVzCglieXRlYyAwIC8vIDB4CglkdXBuIDUKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MzE0CgkvLyBkcm9wSW5mbyA9IHRoaXMuYWxsRHJvcHModG9rZW5Ecm9wSWQpLnZhbHVlCglieXRlYyAxIC8vICAiZCIKCWZyYW1lX2RpZyAtMiAvLyB0b2tlbkRyb3BJZDogVG9rZW5Ecm9wSWQKCWl0b2IKCWNvbmNhdAoJZnJhbWVfYnVyeSAwIC8vIHN0b3JhZ2Uga2V5Ly9kcm9wSW5mbwoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozMTUKCS8vIGFzc2VydCh0aGlzLnR4bi5zZW5kZXIgIT09IGRyb3BJbmZvLkRyb3BDcmVhdG9yLCAnZHJvcCBjcmVhdG9yIGNhbm5vdCBjbGFpbScpCgl0eG4gU2VuZGVyCglpbnRjIDIgLy8gIGhlYWRPZmZzZXQKCWludGMgMyAvLyAzMgoJYnl0ZWMgMSAvLyAgImQiCglmcmFtZV9kaWcgLTIgLy8gdG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkCglpdG9iCgljb25jYXQKCWNvdmVyIDIKCWJveF9leHRyYWN0CgkhPQoKCS8vIGRyb3AgY3JlYXRvciBjYW5ub3QgY2xhaW0KCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozMTcKCS8vIGFzc2VydCghdGhpcy5pc0Ryb3BFeHBpcmVkT3JFbXB0eShkcm9wSW5mbyksICdhaXJkcm9wIGhhcyBlbmRlZCBvciBvdXQgb2YgdG9rZW5zJykKCWZyYW1lX2RpZyAwIC8vIHN0b3JhZ2Uga2V5Ly9kcm9wSW5mbwoJYm94X2dldAoKCS8vIGJveCB2YWx1ZSBkb2VzIG5vdCBleGlzdDogdGhpcy5hbGxEcm9wcyh0b2tlbkRyb3BJZCkudmFsdWUKCWFzc2VydAoJY2FsbHN1YiBpc0Ryb3BFeHBpcmVkT3JFbXB0eQoJIQoKCS8vIGFpcmRyb3AgaGFzIGVuZGVkIG9yIG91dCBvZiB0b2tlbnMKCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozMTgKCS8vIGFzc2VydCh0aGlzLnR4bi5zZW5kZXIuaXNPcHRlZEluVG9Bc3NldChkcm9wSW5mby5Db25maWcuVG9rZW4pLCAnY2xhaW1hbnQgbXVzdCBhbHJlYWR5IGJlIG9wdGVkLWluIHRvIHRva2VuIScpCgl0eG4gU2VuZGVyCglpbnRjIDcgLy8gNjQKCWludGMgMiAvLyA4CglieXRlYyAxIC8vICAiZCIKCWZyYW1lX2RpZyAtMiAvLyB0b2tlbkRyb3BJZDogVG9rZW5Ecm9wSWQKCWl0b2IKCWNvbmNhdAoJY292ZXIgMgoJYm94X2V4dHJhY3QKCWJ0b2kKCWFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQoJc3dhcAoJcG9wCgoJLy8gY2xhaW1hbnQgbXVzdCBhbHJlYWR5IGJlIG9wdGVkLWluIHRvIHRva2VuIQoJYXNzZXJ0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjMyMAoJLy8gY2xhaW1LZXkgPSB7IFRva2VuRHJvcElkOiB0b2tlbkRyb3BJZCwgQWRkcmVzczogdGhpcy50eG4uc2VuZGVyIH0gYXMgQWRkcmVzc0NsYWltS2V5CglmcmFtZV9kaWcgLTIgLy8gdG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkCglpdG9iCgl0eG4gU2VuZGVyCgljb25jYXQKCWZyYW1lX2J1cnkgMSAvLyBjbGFpbUtleTogKHVpbnQ2NCxhZGRyZXNzKQoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozMjEKCS8vIGFzc2VydCghdGhpcy5jbGFpbWVkTWFwKGNsYWltS2V5KS5leGlzdHMsICdhbHJlYWR5IGNsYWltZWQnKQoJYnl0ZWMgMTAgLy8gICJjIgoJZnJhbWVfZGlnIDEgLy8gY2xhaW1LZXk6ICh1aW50NjQsYWRkcmVzcykKCWNvbmNhdAoJYm94X2xlbgoJc3dhcAoJcG9wCgkhCgoJLy8gYWxyZWFkeSBjbGFpbWVkCglhc3NlcnQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MzI0CgkvLyB0aGlzLmRvZXNDbGFpbUFjY291bnRNZWV0R2F0aW5nKHRva2VuRHJvcElkLCB2YWx1ZVRvVmVyaWZ5KQoJZnJhbWVfZGlnIC0zIC8vIHZhbHVlVG9WZXJpZnk6IHVpbnQ2NAoJZnJhbWVfZGlnIC0yIC8vIHRva2VuRHJvcElkOiBUb2tlbkRyb3BJZAoJY2FsbHN1YiBkb2VzQ2xhaW1BY2NvdW50TWVldEdhdGluZwoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozMjgKCS8vIHBlckNsYWltZXJGZWUgPSB0aGlzLmdldFBlckNsYWltZXJGZWUoKQoJY2FsbHN1YiBnZXRQZXJDbGFpbWVyRmVlCglmcmFtZV9idXJ5IDIgLy8gcGVyQ2xhaW1lckZlZTogdWludDY0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjMyOQoJLy8gbWJyQ29zdCA9IHRoaXMuZ2V0UGVyQ2xhaW1lck1ickNvc3QoKQoJY2FsbHN1YiBnZXRQZXJDbGFpbWVyTWJyQ29zdAoJZnJhbWVfYnVyeSAzIC8vIG1ickNvc3Q6IHVpbnQ2NAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozMzAKCS8vIGFzc2VydChwZXJDbGFpbWVyRmVlID49IG1ickNvc3QgKiAyLCAncGVyLWNsYWltIGZlZSB0b28gbG93JykKCWZyYW1lX2RpZyAyIC8vIHBlckNsYWltZXJGZWU6IHVpbnQ2NAoJZnJhbWVfZGlnIDMgLy8gbWJyQ29zdDogdWludDY0CglpbnRjIDQgLy8gMgoJKgoJPj0KCgkvLyBwZXItY2xhaW0gZmVlIHRvbyBsb3cKCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozMzEKCS8vIHZlcmlmeVBheVR4bihmZWVBbmRNYnJQYXltZW50LCB7CgkvLyAgICAgICAgICAgICByZWNlaXZlcjogdGhpcy5hcHAuYWRkcmVzcywKCS8vICAgICAgICAgICAgIHNlbmRlcjogdGhpcy50eG4uc2VuZGVyLAoJLy8gICAgICAgICAgICAgYW1vdW50OiBwZXJDbGFpbWVyRmVlLAoJLy8gICAgICAgICB9KQoJLy8gdmVyaWZ5IHJlY2VpdmVyCglmcmFtZV9kaWcgLTEgLy8gZmVlQW5kTWJyUGF5bWVudDogUGF5VHhuCglndHhucyBSZWNlaXZlcgoJZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKCT09CgoJLy8gdHJhbnNhY3Rpb24gdmVyaWZpY2F0aW9uIGZhaWxlZDogeyJ0eG4iOiJmZWVBbmRNYnJQYXltZW50IiwiZmllbGQiOiJyZWNlaXZlciIsImV4cGVjdGVkIjoidGhpcy5hcHAuYWRkcmVzcyJ9Cglhc3NlcnQKCgkvLyB2ZXJpZnkgc2VuZGVyCglmcmFtZV9kaWcgLTEgLy8gZmVlQW5kTWJyUGF5bWVudDogUGF5VHhuCglndHhucyBTZW5kZXIKCXR4biBTZW5kZXIKCT09CgoJLy8gdHJhbnNhY3Rpb24gdmVyaWZpY2F0aW9uIGZhaWxlZDogeyJ0eG4iOiJmZWVBbmRNYnJQYXltZW50IiwiZmllbGQiOiJzZW5kZXIiLCJleHBlY3RlZCI6InRoaXMudHhuLnNlbmRlciJ9Cglhc3NlcnQKCgkvLyB2ZXJpZnkgYW1vdW50CglmcmFtZV9kaWcgLTEgLy8gZmVlQW5kTWJyUGF5bWVudDogUGF5VHhuCglndHhucyBBbW91bnQKCWZyYW1lX2RpZyAyIC8vIHBlckNsYWltZXJGZWU6IHVpbnQ2NAoJPT0KCgkvLyB0cmFuc2FjdGlvbiB2ZXJpZmljYXRpb24gZmFpbGVkOiB7InR4biI6ImZlZUFuZE1iclBheW1lbnQiLCJmaWVsZCI6ImFtb3VudCIsImV4cGVjdGVkIjoicGVyQ2xhaW1lckZlZSJ9Cglhc3NlcnQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MzM2CgkvLyBtYWludGFpbmVyUG9ydGlvbiA9IChwZXJDbGFpbWVyRmVlICogNTAwKSAvIDEwMDAKCWZyYW1lX2RpZyAyIC8vIHBlckNsYWltZXJGZWU6IHVpbnQ2NAoJcHVzaGludCA1MDAKCSoKCXB1c2hpbnQgMTAwMAoJLwoJZnJhbWVfYnVyeSA0IC8vIG1haW50YWluZXJQb3J0aW9uOiB1aW50NjQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MzM3CgkvLyBzZW5kUGF5bWVudCh7CgkvLyAgICAgICAgICAgICByZWNlaXZlcjogdGhpcy5tYWludGFpbmVyQWRkcmVzcy52YWx1ZSwKCS8vICAgICAgICAgICAgIGFtb3VudDogbWFpbnRhaW5lclBvcnRpb24sCgkvLyAgICAgICAgICAgICBub3RlOiAnVG9rZW5Ecm9wIGZlZScsCgkvLyAgICAgICAgIH0pCglpdHhuX2JlZ2luCglpbnRjIDAgLy8gIHBheQoJaXR4bl9maWVsZCBUeXBlRW51bQoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozMzgKCS8vIHJlY2VpdmVyOiB0aGlzLm1haW50YWluZXJBZGRyZXNzLnZhbHVlCglieXRlYyA1IC8vICAibWFpbnRhaW5lckFkZHJlc3MiCglhcHBfZ2xvYmFsX2dldAoJaXR4bl9maWVsZCBSZWNlaXZlcgoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozMzkKCS8vIGFtb3VudDogbWFpbnRhaW5lclBvcnRpb24KCWZyYW1lX2RpZyA0IC8vIG1haW50YWluZXJQb3J0aW9uOiB1aW50NjQKCWl0eG5fZmllbGQgQW1vdW50CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjM0MAoJLy8gbm90ZTogJ1Rva2VuRHJvcCBmZWUnCglieXRlYyA2IC8vICAiVG9rZW5Ecm9wIGZlZSIKCWl0eG5fZmllbGQgTm90ZQoKCS8vIEZlZSBmaWVsZCBub3Qgc2V0LCBkZWZhdWx0aW5nIHRvIDAKCWludGMgMSAvLyAwCglpdHhuX2ZpZWxkIEZlZQoKCS8vIFN1Ym1pdCBpbm5lciB0cmFuc2FjdGlvbgoJaXR4bl9zdWJtaXQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MzQzCgkvLyBmZWVTaW5rUG9ydGlvbiA9IHBlckNsYWltZXJGZWUgLSBtYWludGFpbmVyUG9ydGlvbiAtIG1ickNvc3QKCWZyYW1lX2RpZyAyIC8vIHBlckNsYWltZXJGZWU6IHVpbnQ2NAoJZnJhbWVfZGlnIDQgLy8gbWFpbnRhaW5lclBvcnRpb246IHVpbnQ2NAoJLQoJZnJhbWVfZGlnIDMgLy8gbWJyQ29zdDogdWludDY0CgktCglmcmFtZV9idXJ5IDUgLy8gZmVlU2lua1BvcnRpb246IHVpbnQ2NAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozNDQKCS8vIHNlbmRQYXltZW50KHsKCS8vICAgICAgICAgICAgIHJlY2VpdmVyOiBibG9ja3NbdGhpcy50eG4uZmlyc3RWYWxpZCAtIDFdLmZlZVNpbmssCgkvLyAgICAgICAgICAgICBhbW91bnQ6IGZlZVNpbmtQb3J0aW9uLAoJLy8gICAgICAgICAgICAgbm90ZTogJ1Rva2VuRHJvcCBmZWUnLAoJLy8gICAgICAgICB9KQoJaXR4bl9iZWdpbgoJaW50YyAwIC8vICBwYXkKCWl0eG5fZmllbGQgVHlwZUVudW0KCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MzQ1CgkvLyByZWNlaXZlcjogYmxvY2tzW3RoaXMudHhuLmZpcnN0VmFsaWQgLSAxXS5mZWVTaW5rCgl0eG4gRmlyc3RWYWxpZAoJaW50YyAwIC8vIDEKCS0KCWJsb2NrIEJsa0ZlZVNpbmsKCWl0eG5fZmllbGQgUmVjZWl2ZXIKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MzQ2CgkvLyBhbW91bnQ6IGZlZVNpbmtQb3J0aW9uCglmcmFtZV9kaWcgNSAvLyBmZWVTaW5rUG9ydGlvbjogdWludDY0CglpdHhuX2ZpZWxkIEFtb3VudAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozNDcKCS8vIG5vdGU6ICdUb2tlbkRyb3AgZmVlJwoJYnl0ZWMgNiAvLyAgIlRva2VuRHJvcCBmZWUiCglpdHhuX2ZpZWxkIE5vdGUKCgkvLyBGZWUgZmllbGQgbm90IHNldCwgZGVmYXVsdGluZyB0byAwCglpbnRjIDEgLy8gMAoJaXR4bl9maWVsZCBGZWUKCgkvLyBTdWJtaXQgaW5uZXIgdHJhbnNhY3Rpb24KCWl0eG5fc3VibWl0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjM1MgoJLy8gdGhpcy5jbGFpbWVkTWFwKGNsYWltS2V5KS52YWx1ZSA9IHsgVHhuSWQ6IHRoaXMudHhuLnR4SUQgYXMgYnl0ZXMzMiB9CglieXRlYyAxMCAvLyAgImMiCglmcmFtZV9kaWcgMSAvLyBjbGFpbUtleTogKHVpbnQ2NCxhZGRyZXNzKQoJY29uY2F0Cgl0eG4gVHhJRAoJcHVzaGJ5dGVzIDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAoJY29uY2F0CglkdXAKCWV4dHJhY3QgMzIgMAoJYnl0ZWMgMCAvLyAweAoJYj09Cglhc3NlcnQKCWV4dHJhY3QgMCAzMgoJYm94X3B1dAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozNTQKCS8vIHRoaXMudG90YWxDbGFpbXMudmFsdWUgKz0gMQoJYnl0ZWMgOSAvLyAgInRvdGFsQ2xhaW1zIgoJYXBwX2dsb2JhbF9nZXQKCWludGMgMCAvLyAxCgkrCglieXRlYyA5IC8vICAidG90YWxDbGFpbXMiCglzd2FwCglhcHBfZ2xvYmFsX3B1dAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozNTYKCS8vIHRoaXMuc2VuZFRva2Vuc0Zyb21Ecm9wKGRyb3BJbmZvLCB0aGlzLnR4bi5zZW5kZXIsIGRyb3BJbmZvLkNvbmZpZy5BbW91bnRQZXJDbGFpbSkKCXB1c2hpbnQgNzIKCWludGMgMiAvLyA4CglieXRlYyAxIC8vICAiZCIKCWZyYW1lX2RpZyAtMiAvLyB0b2tlbkRyb3BJZDogVG9rZW5Ecm9wSWQKCWl0b2IKCWNvbmNhdAoJY292ZXIgMgoJYm94X2V4dHJhY3QKCWJ0b2kKCXR4biBTZW5kZXIKCWZyYW1lX2RpZyAwIC8vIHN0b3JhZ2Uga2V5Ly9kcm9wSW5mbwoJYm94X2dldAoKCS8vIGJveCB2YWx1ZSBkb2VzIG5vdCBleGlzdDogdGhpcy5hbGxEcm9wcyh0b2tlbkRyb3BJZCkudmFsdWUKCWFzc2VydAoJY2FsbHN1YiBzZW5kVG9rZW5zRnJvbURyb3AKCXJldHN1YgoKLy8gY2xhaW1DbGFpbWVyQm94Q29zdCh1aW50NjQsYWRkcmVzcyxhZGRyZXNzKXZvaWQKKmFiaV9yb3V0ZV9jbGFpbUNsYWltZXJCb3hDb3N0OgoJLy8gcmVjZWl2ZXI6IGFkZHJlc3MKCXR4bmEgQXBwbGljYXRpb25BcmdzIDMKCWR1cAoJbGVuCglpbnRjIDMgLy8gMzIKCT09CgoJLy8gYXJndW1lbnQgMCAocmVjZWl2ZXIpIGZvciBjbGFpbUNsYWltZXJCb3hDb3N0IG11c3QgYmUgYSBhZGRyZXNzCglhc3NlcnQKCgkvLyBjbGFpbWVyQWRkcmVzczogYWRkcmVzcwoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgoJZHVwCglsZW4KCWludGMgMyAvLyAzMgoJPT0KCgkvLyBhcmd1bWVudCAxIChjbGFpbWVyQWRkcmVzcykgZm9yIGNsYWltQ2xhaW1lckJveENvc3QgbXVzdCBiZSBhIGFkZHJlc3MKCWFzc2VydAoKCS8vIHRva2VuRHJvcElkOiB1aW50NjQKCXR4bmEgQXBwbGljYXRpb25BcmdzIDEKCWJ0b2kKCgkvLyBleGVjdXRlIGNsYWltQ2xhaW1lckJveENvc3QodWludDY0LGFkZHJlc3MsYWRkcmVzcyl2b2lkCgljYWxsc3ViIGNsYWltQ2xhaW1lckJveENvc3QKCWludGMgMCAvLyAxCglyZXR1cm4KCi8vIGNsYWltQ2xhaW1lckJveENvc3QodG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkLCBjbGFpbWVyQWRkcmVzczogQWRkcmVzcywgcmVjZWl2ZXI6IEFkZHJlc3MpOiB2b2lkCmNsYWltQ2xhaW1lckJveENvc3Q6Cglwcm90byAzIDAKCgkvLyBQdXNoIGVtcHR5IGJ5dGVzIGFmdGVyIHRoZSBmcmFtZSBwb2ludGVyIHRvIHJlc2VydmUgc3BhY2UgZm9yIGxvY2FsIHZhcmlhYmxlcwoJYnl0ZWMgMCAvLyAweAoJZHVwbiAzCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjM2NAoJLy8gZHJvcEluZm8gPSB0aGlzLmFsbERyb3BzKHRva2VuRHJvcElkKS52YWx1ZQoJYnl0ZWMgMSAvLyAgImQiCglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkCglpdG9iCgljb25jYXQKCWZyYW1lX2J1cnkgMCAvLyBzdG9yYWdlIGtleS8vZHJvcEluZm8KCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MzY1CgkvLyBhc3NlcnQodGhpcy5pc0Ryb3BFeHBpcmVkT3JFbXB0eShkcm9wSW5mbyksICdkcm9wIE1VU1QgYmUgZXhwaXJlZCBvciBlbXB0eSEnKQoJZnJhbWVfZGlnIDAgLy8gc3RvcmFnZSBrZXkvL2Ryb3BJbmZvCglib3hfZ2V0CgoJLy8gYm94IHZhbHVlIGRvZXMgbm90IGV4aXN0OiB0aGlzLmFsbERyb3BzKHRva2VuRHJvcElkKS52YWx1ZQoJYXNzZXJ0CgljYWxsc3ViIGlzRHJvcEV4cGlyZWRPckVtcHR5CgoJLy8gZHJvcCBNVVNUIGJlIGV4cGlyZWQgb3IgZW1wdHkhCglhc3NlcnQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MzY3CgkvLyBwcmVNYnIgPSB0aGlzLmFwcC5hZGRyZXNzLm1pbkJhbGFuY2UKCWdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCglhY2N0X3BhcmFtc19nZXQgQWNjdE1pbkJhbGFuY2UKCXBvcAoJZnJhbWVfYnVyeSAxIC8vIHByZU1icjogdWludDY0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjM2OAoJLy8gY2xhaW1LZXkgPSB7IFRva2VuRHJvcElkOiB0b2tlbkRyb3BJZCwgQWRkcmVzczogY2xhaW1lckFkZHJlc3MgfSBhcyBBZGRyZXNzQ2xhaW1LZXkKCWZyYW1lX2RpZyAtMSAvLyB0b2tlbkRyb3BJZDogVG9rZW5Ecm9wSWQKCWl0b2IKCWZyYW1lX2RpZyAtMiAvLyBjbGFpbWVyQWRkcmVzczogQWRkcmVzcwoJY29uY2F0CglmcmFtZV9idXJ5IDIgLy8gY2xhaW1LZXk6ICh1aW50NjQsYWRkcmVzcykKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MzY5CgkvLyB0aGlzLmNsYWltZWRNYXAoY2xhaW1LZXkpLmRlbGV0ZSgpCglieXRlYyAxMCAvLyAgImMiCglmcmFtZV9kaWcgMiAvLyBjbGFpbUtleTogKHVpbnQ2NCxhZGRyZXNzKQoJY29uY2F0Cglib3hfZGVsCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjM3MAoJLy8gbWJyUmVmdW5kID0gcHJlTWJyIC0gdGhpcy5hcHAuYWRkcmVzcy5taW5CYWxhbmNlCglmcmFtZV9kaWcgMSAvLyBwcmVNYnI6IHVpbnQ2NAoJZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKCWFjY3RfcGFyYW1zX2dldCBBY2N0TWluQmFsYW5jZQoJcG9wCgktCglmcmFtZV9idXJ5IDMgLy8gbWJyUmVmdW5kOiB1aW50NjQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MzcxCgkvLyBzZW5kUGF5bWVudCh7IHJlY2VpdmVyOiByZWNlaXZlciwgYW1vdW50OiBtYnJSZWZ1bmQgfSkKCWl0eG5fYmVnaW4KCWludGMgMCAvLyAgcGF5CglpdHhuX2ZpZWxkIFR5cGVFbnVtCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjM3MQoJLy8gcmVjZWl2ZXI6IHJlY2VpdmVyCglmcmFtZV9kaWcgLTMgLy8gcmVjZWl2ZXI6IEFkZHJlc3MKCWl0eG5fZmllbGQgUmVjZWl2ZXIKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6MzcxCgkvLyBhbW91bnQ6IG1iclJlZnVuZAoJZnJhbWVfZGlnIDMgLy8gbWJyUmVmdW5kOiB1aW50NjQKCWl0eG5fZmllbGQgQW1vdW50CgoJLy8gRmVlIGZpZWxkIG5vdCBzZXQsIGRlZmF1bHRpbmcgdG8gMAoJaW50YyAxIC8vIDAKCWl0eG5fZmllbGQgRmVlCgoJLy8gU3VibWl0IGlubmVyIHRyYW5zYWN0aW9uCglpdHhuX3N1Ym1pdAoJcmV0c3ViCgovLyBjbGVhbnVwRHJvcCh1aW50NjQpdm9pZAoqYWJpX3JvdXRlX2NsZWFudXBEcm9wOgoJLy8gdG9rZW5Ecm9wSWQ6IHVpbnQ2NAoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQoJYnRvaQoKCS8vIGV4ZWN1dGUgY2xlYW51cERyb3AodWludDY0KXZvaWQKCWNhbGxzdWIgY2xlYW51cERyb3AKCWludGMgMCAvLyAxCglyZXR1cm4KCi8vIGNsZWFudXBEcm9wKHRva2VuRHJvcElkOiBUb2tlbkRyb3BJZCk6IHZvaWQKLy8KLy8gQ2xlYW5zIHVwIGFuIGV4cGlyZWQgdG9rZW4gZHJvcCBieSBwZXJmb3JtaW5nIG5lY2Vzc2FyeSBhY3Rpb25zIHN1Y2ggYXMgcmVmdW5kaW5nIHJlbWFpbmluZyB0b2tlbnMKLy8gdG8gdGhlIGRyb3AgY3JlYXRvciBhbmQgcmVtb3ZpbmcgdGhlIGRyb3AgZnJvbSB0aGUgYWN0aXZlIGRyb3BzLgovLyBDYWxsZWQgaWYgYSBuZXcgZHJvcCBpcyBjcmVhdGVkIGZvciB0aGUgc2FtZSBhc3NldCBpZCwgYW5kIGJ5IGFueW9uZSAocHJlc3VtYWJseSBjcmVhdG9yKSBpZiBhIGRyb3AgaXMgZXhwaXJlZC9lbXB0eS4KLy8gQWxzbyBjYWxsZWQgaWYgdGhlIGNyZWF0b3IgY2FuY2VscyB0aGUgZHJvcCBlYXJseS4KLy8KLy8gQHBhcmFtIHtUb2tlbkRyb3BJZH0gdG9rZW5Ecm9wSWQgLSBUaGUgaWRlbnRpZmllciBvZiB0aGUgdG9rZW4gZHJvcCB0byBiZSBjbGVhbmVkIHVwLgovLyBAcmV0dXJuIHt2b2lkfSBUaGlzIG1ldGhvZCBkb2VzIG5vdCByZXR1cm4gYSB2YWx1ZS4KY2xlYW51cERyb3A6Cglwcm90byAxIDAKCgkvLyBQdXNoIGVtcHR5IGJ5dGVzIGFmdGVyIHRoZSBmcmFtZSBwb2ludGVyIHRvIHJlc2VydmUgc3BhY2UgZm9yIGxvY2FsIHZhcmlhYmxlcwoJYnl0ZWMgMCAvLyAweAoJZHVwbiAyCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjM4NQoJLy8gZHJvcEluZm8gPSBjbG9uZSh0aGlzLmFsbERyb3BzKHRva2VuRHJvcElkKS52YWx1ZSkKCWJ5dGVjIDEgLy8gICJkIgoJZnJhbWVfZGlnIC0xIC8vIHRva2VuRHJvcElkOiBUb2tlbkRyb3BJZAoJaXRvYgoJY29uY2F0Cglib3hfZ2V0CgoJLy8gYm94IHZhbHVlIGRvZXMgbm90IGV4aXN0OiB0aGlzLmFsbERyb3BzKHRva2VuRHJvcElkKS52YWx1ZQoJYXNzZXJ0CglmcmFtZV9idXJ5IDAgLy8gZHJvcEluZm86ICh1aW50NjQsYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCwodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDgsYWRkcmVzcyx1aW50NjRbNF0sdWludDY0KSkKCgkvLyAqaWYzX2NvbmRpdGlvbgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjM4NgoJLy8gdGhpcy50eG4uc2VuZGVyICE9PSBkcm9wSW5mby5Ecm9wQ3JlYXRvcgoJdHhuIFNlbmRlcgoJZnJhbWVfZGlnIDAgLy8gZHJvcEluZm86ICh1aW50NjQsYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCwodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDgsYWRkcmVzcyx1aW50NjRbNF0sdWludDY0KSkKCWV4dHJhY3QgOCAzMgoJIT0KCWJ6ICppZjNfZW5kCgoJLy8gKmlmM19jb25zZXF1ZW50CgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6Mzg5CgkvLyBhc3NlcnQodGhpcy5pc0Ryb3BFeHBpcmVkT3JFbXB0eShkcm9wSW5mbyksICdkcm9wIE1VU1QgYmUgZXhwaXJlZCBvciBlbXB0eScpCglmcmFtZV9kaWcgMCAvLyBkcm9wSW5mbzogKHVpbnQ2NCxhZGRyZXNzLHVpbnQ2NCx1aW50NjQsdWludDY0LCh1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50OCxhZGRyZXNzLHVpbnQ2NFs0XSx1aW50NjQpKQoJY2FsbHN1YiBpc0Ryb3BFeHBpcmVkT3JFbXB0eQoKCS8vIGRyb3AgTVVTVCBiZSBleHBpcmVkIG9yIGVtcHR5Cglhc3NlcnQKCippZjNfZW5kOgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjM5MgoJLy8gcHJlTWJyID0gdGhpcy5hcHAuYWRkcmVzcy5taW5CYWxhbmNlCglnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwoJYWNjdF9wYXJhbXNfZ2V0IEFjY3RNaW5CYWxhbmNlCglwb3AKCWZyYW1lX2J1cnkgMSAvLyBwcmVNYnI6IHVpbnQ2NAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozOTMKCS8vIHRoaXMucmVmdW5kRHJvcENyZWF0b3JSZW1haW5pbmdUb2tlbnModG9rZW5Ecm9wSWQpCglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkCgljYWxsc3ViIHJlZnVuZERyb3BDcmVhdG9yUmVtYWluaW5nVG9rZW5zCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjM5NAoJLy8gdGhpcy5yZW1vdmVGcm9tRHJvcHModG9rZW5Ecm9wSWQpCglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkCgljYWxsc3ViIHJlbW92ZUZyb21Ecm9wcwoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozOTYKCS8vIG1iclJlZnVuZCA9IHByZU1iciAtIHRoaXMuYXBwLmFkZHJlc3MubWluQmFsYW5jZQoJZnJhbWVfZGlnIDEgLy8gcHJlTWJyOiB1aW50NjQKCWdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCglhY2N0X3BhcmFtc19nZXQgQWNjdE1pbkJhbGFuY2UKCXBvcAoJLQoJZnJhbWVfYnVyeSAyIC8vIG1iclJlZnVuZDogdWludDY0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjM5NwoJLy8gc2VuZFBheW1lbnQoeyByZWNlaXZlcjogZHJvcEluZm8uRHJvcENyZWF0b3IsIGFtb3VudDogbWJyUmVmdW5kLCBub3RlOiAncmVmdW5kIGZyb20gcmVtb3ZpbmcgdG9rZW4gZHJvcCcgfSkKCWl0eG5fYmVnaW4KCWludGMgMCAvLyAgcGF5CglpdHhuX2ZpZWxkIFR5cGVFbnVtCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjM5NwoJLy8gcmVjZWl2ZXI6IGRyb3BJbmZvLkRyb3BDcmVhdG9yCglmcmFtZV9kaWcgMCAvLyBkcm9wSW5mbzogKHVpbnQ2NCxhZGRyZXNzLHVpbnQ2NCx1aW50NjQsdWludDY0LCh1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50OCxhZGRyZXNzLHVpbnQ2NFs0XSx1aW50NjQpKQoJZXh0cmFjdCA4IDMyCglpdHhuX2ZpZWxkIFJlY2VpdmVyCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjM5NwoJLy8gYW1vdW50OiBtYnJSZWZ1bmQKCWZyYW1lX2RpZyAyIC8vIG1iclJlZnVuZDogdWludDY0CglpdHhuX2ZpZWxkIEFtb3VudAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czozOTcKCS8vIG5vdGU6ICdyZWZ1bmQgZnJvbSByZW1vdmluZyB0b2tlbiBkcm9wJwoJcHVzaGJ5dGVzIDB4NzI2NTY2NzU2ZTY0MjA2NjcyNmY2ZDIwNzI2NTZkNmY3NjY5NmU2NzIwNzQ2ZjZiNjU2ZTIwNjQ3MjZmNzAgLy8gInJlZnVuZCBmcm9tIHJlbW92aW5nIHRva2VuIGRyb3AiCglpdHhuX2ZpZWxkIE5vdGUKCgkvLyBGZWUgZmllbGQgbm90IHNldCwgZGVmYXVsdGluZyB0byAwCglpbnRjIDEgLy8gMAoJaXR4bl9maWVsZCBGZWUKCgkvLyBTdWJtaXQgaW5uZXIgdHJhbnNhY3Rpb24KCWl0eG5fc3VibWl0CglyZXRzdWIKCi8vIGFkZE5ld0Ryb3AodG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkLCBkcm9wSW5mbzogVG9rZW5Ecm9wSW5mbyk6IHZvaWQKLy8KLy8gQWRkcyBhIG5ldyB0b2tlbiBkcm9wIGJ5IGFzc29jaWF0aW5nIHRoZSBnaXZlbiBkcm9wIGluZm9ybWF0aW9uIHdpdGggdGhlIGRyb3AgSUQgYW5kIGFzc2V0IElELgovLwovLyBAcGFyYW0ge1Rva2VuRHJvcElkfSB0b2tlbkRyb3BJZCAtIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRva2VuIGRyb3AuCi8vIEBwYXJhbSB7VG9rZW5Ecm9wSW5mb30gZHJvcEluZm8gLSBUaGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHRva2VuIGRyb3AgdG8gYmUgYWRkZWQuCi8vIEByZXR1cm4ge3ZvaWR9IFRoaXMgbWV0aG9kIGRvZXMgbm90IHJldHVybiBhbnl0aGluZy4KYWRkTmV3RHJvcDoKCXByb3RvIDIgMAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo0MDgKCS8vIHRoaXMuYWxsRHJvcHModG9rZW5Ecm9wSWQpLnZhbHVlID0gZHJvcEluZm8KCWJ5dGVjIDEgLy8gICJkIgoJZnJhbWVfZGlnIC0xIC8vIHRva2VuRHJvcElkOiBUb2tlbkRyb3BJZAoJaXRvYgoJY29uY2F0CglmcmFtZV9kaWcgLTIgLy8gZHJvcEluZm86IFRva2VuRHJvcEluZm8KCWJveF9wdXQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NDA5CgkvLyB0aGlzLmRyb3BGb3JUb2tlbihkcm9wSW5mby5Db25maWcuVG9rZW4pLnZhbHVlID0gdG9rZW5Ecm9wSWQKCWJ5dGVjIDQgLy8gICJ0b2siCglmcmFtZV9kaWcgLTIgLy8gZHJvcEluZm86IFRva2VuRHJvcEluZm8KCWV4dHJhY3QgNjQgOAoJYnRvaQoJaXRvYgoJY29uY2F0CglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkCglpdG9iCglib3hfcHV0CglyZXRzdWIKCi8vIHJlbW92ZUZyb21Ecm9wcyh0b2tlbkRyb3BJZDogVG9rZW5Ecm9wSWQpOiB2b2lkCnJlbW92ZUZyb21Ecm9wczoKCXByb3RvIDEgMAoKCS8vIFB1c2ggZW1wdHkgYnl0ZXMgYWZ0ZXIgdGhlIGZyYW1lIHBvaW50ZXIgdG8gcmVzZXJ2ZSBzcGFjZSBmb3IgbG9jYWwgdmFyaWFibGVzCglieXRlYyAwIC8vIDB4CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjQxMwoJLy8gZHJvcEluZm8gPSB0aGlzLmFsbERyb3BzKHRva2VuRHJvcElkKS52YWx1ZQoJYnl0ZWMgMSAvLyAgImQiCglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkCglpdG9iCgljb25jYXQKCWZyYW1lX2J1cnkgMCAvLyBzdG9yYWdlIGtleS8vZHJvcEluZm8KCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NDE0CgkvLyB0aGlzLmRyb3BGb3JUb2tlbihkcm9wSW5mby5Db25maWcuVG9rZW4pLmRlbGV0ZSgpCglieXRlYyA0IC8vICAidG9rIgoJaW50YyA3IC8vIDY0CglpbnRjIDIgLy8gOAoJYnl0ZWMgMSAvLyAgImQiCglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkCglpdG9iCgljb25jYXQKCWNvdmVyIDIKCWJveF9leHRyYWN0CglidG9pCglpdG9iCgljb25jYXQKCWJveF9kZWwKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NDE3CgkvLyB0aGlzLmFsbERyb3BzKHRva2VuRHJvcElkKS5kZWxldGUoKQoJYnl0ZWMgMSAvLyAgImQiCglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkCglpdG9iCgljb25jYXQKCWJveF9kZWwKCXJldHN1YgoKLy8gcmVmdW5kRHJvcENyZWF0b3JSZW1haW5pbmdUb2tlbnModG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkKTogdm9pZAovLwovLyBUaGlzIGZ1bmN0aW9uIHJlZnVuZHMgdGhlIHJlbWFpbmluZyB0b2tlbnMgY3JlYXRlZCBpbiBhIHNwZWNpZmljIHRva2VuIGRyb3AuCi8vIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGJlIHJlZnVuZGVkIGlzIGRldGVybWluZWQgYnkgY2hlY2tpbmcgdGhlICdBbW91bnRSZW1haW5pbmcnIHByb3BlcnR5Ci8vIG9mIHRoZSBjb3JyZXNwb25kaW5nIFRva2VuRHJvcCBvYmplY3QuIElmIHRoaXMgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIHplcm8sIHRoZSBmdW5jdGlvbiB3aWxsIGNhbGwKLy8gdGhlIGBzZW5kVG9rZW5zRnJvbURyb3BgIG1ldGhvZCB3aXRoIGFwcHJvcHJpYXRlIHBhcmFtZXRlcnMgdG8gdHJhbnNmZXIgdGhlc2UgcmVtYWluaW5nIHRva2VucyBiYWNrCi8vIHRvIHRoZSBjcmVhdG9yIG9mIHRoZSB0b2tlbiBkcm9wIChpZGVudGlmaWVkIGJ5ICdEcm9wQ3JlYXRvcicgaW4gdGhlIFRva2VuRHJvcCBvYmplY3QpLiBUaGUgdXBkYXRlZAovLyBBbW91bnRSZW1haW5pbmcgaXMgdGhlbiBjaGVja2VkIHRvIGVuc3VyZSB0aGF0IGl0IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgYWN0aXZlIGRyb3BzLiBJZiB0aGlzIGZhaWxzLAovLyBhbiBhc3NlcnRpb24gZXJyb3Igd2lsbCBiZSB0aHJvd24gaW5kaWNhdGluZyB0aGF0IHRoZSBkcm9wIHNob3VsZCBoYXZlIGJlZW4gcmVtb3ZlZC4KLy8gQHBhcmFtIHRva2VuRHJvcElkIC0gVGhlIElEIG9mIHRoZSBUb2tlbkRyb3AgZm9yIHdoaWNoIHRva2VucyBhcmUgYmVpbmcgcmVmdW5kZWQuCnJlZnVuZERyb3BDcmVhdG9yUmVtYWluaW5nVG9rZW5zOgoJcHJvdG8gMSAwCgoJLy8gUHVzaCBlbXB0eSBieXRlcyBhZnRlciB0aGUgZnJhbWUgcG9pbnRlciB0byByZXNlcnZlIHNwYWNlIGZvciBsb2NhbCB2YXJpYWJsZXMKCWJ5dGVjIDAgLy8gMHgKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NDMxCgkvLyBkcm9wSW5mbyA9IHRoaXMuYWxsRHJvcHModG9rZW5Ecm9wSWQpLnZhbHVlCglieXRlYyAxIC8vICAiZCIKCWZyYW1lX2RpZyAtMSAvLyB0b2tlbkRyb3BJZDogVG9rZW5Ecm9wSWQKCWl0b2IKCWNvbmNhdAoJZnJhbWVfYnVyeSAwIC8vIHN0b3JhZ2Uga2V5Ly9kcm9wSW5mbwoKCS8vICppZjRfY29uZGl0aW9uCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NDMyCgkvLyBkcm9wSW5mby5BbW91bnRSZW1haW5pbmcgPiAwCglpbnRjIDEwIC8vICBoZWFkT2Zmc2V0CglpbnRjIDIgLy8gOAoJYnl0ZWMgMSAvLyAgImQiCglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkCglpdG9iCgljb25jYXQKCWNvdmVyIDIKCWJveF9leHRyYWN0CglidG9pCglpbnRjIDEgLy8gMAoJPgoJYnogKmlmNF9lbmQKCgkvLyAqaWY0X2NvbnNlcXVlbnQKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo0MzUKCS8vIHRoaXMuc2VuZFRva2Vuc0Zyb21Ecm9wKGRyb3BJbmZvLCBkcm9wSW5mby5Ecm9wQ3JlYXRvciwgZHJvcEluZm8uQW1vdW50UmVtYWluaW5nKQoJaW50YyAxMCAvLyAgaGVhZE9mZnNldAoJaW50YyAyIC8vIDgKCWJ5dGVjIDEgLy8gICJkIgoJZnJhbWVfZGlnIC0xIC8vIHRva2VuRHJvcElkOiBUb2tlbkRyb3BJZAoJaXRvYgoJY29uY2F0Cgljb3ZlciAyCglib3hfZXh0cmFjdAoJYnRvaQoJaW50YyAyIC8vICBoZWFkT2Zmc2V0CglpbnRjIDMgLy8gMzIKCWJ5dGVjIDEgLy8gICJkIgoJZnJhbWVfZGlnIC0xIC8vIHRva2VuRHJvcElkOiBUb2tlbkRyb3BJZAoJaXRvYgoJY29uY2F0Cgljb3ZlciAyCglib3hfZXh0cmFjdAoJZnJhbWVfZGlnIDAgLy8gc3RvcmFnZSBrZXkvL2Ryb3BJbmZvCglib3hfZ2V0CgoJLy8gYm94IHZhbHVlIGRvZXMgbm90IGV4aXN0OiB0aGlzLmFsbERyb3BzKHRva2VuRHJvcElkKS52YWx1ZQoJYXNzZXJ0CgljYWxsc3ViIHNlbmRUb2tlbnNGcm9tRHJvcAoKKmlmNF9lbmQ6CgkvLyAqaWY1X2NvbmRpdGlvbgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjQzNwoJLy8gdGhpcy5hcHAuYWRkcmVzcy5hc3NldEJhbGFuY2UoZHJvcEluZm8uQ29uZmlnLlRva2VuKSA9PT0gMAoJZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKCWludGMgNyAvLyA2NAoJaW50YyAyIC8vIDgKCWJ5dGVjIDEgLy8gICJkIgoJZnJhbWVfZGlnIC0xIC8vIHRva2VuRHJvcElkOiBUb2tlbkRyb3BJZAoJaXRvYgoJY29uY2F0Cgljb3ZlciAyCglib3hfZXh0cmFjdAoJYnRvaQoJYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCglwb3AKCWludGMgMSAvLyAwCgk9PQoJYnogKmlmNV9lbmQKCgkvLyAqaWY1X2NvbnNlcXVlbnQKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo0MzkKCS8vIHNlbmRBc3NldFRyYW5zZmVyKHsKCS8vICAgICAgICAgICAgICAgICB4ZmVyQXNzZXQ6IGRyb3BJbmZvLkNvbmZpZy5Ub2tlbiwKCS8vICAgICAgICAgICAgICAgICBhc3NldFJlY2VpdmVyOiB0aGlzLmFwcC5hZGRyZXNzLAoJLy8gICAgICAgICAgICAgICAgIGFzc2V0Q2xvc2VUbzogdGhpcy5hcHAuYWRkcmVzcywKCS8vICAgICAgICAgICAgICAgICBhc3NldEFtb3VudDogMCwKCS8vICAgICAgICAgICAgICAgICBub3RlOiAnb3B0LW91dCBvZiB0b2tlbicsCgkvLyAgICAgICAgICAgICB9KQoJaXR4bl9iZWdpbgoJaW50YyA1IC8vICBheGZlcgoJaXR4bl9maWVsZCBUeXBlRW51bQoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo0NDAKCS8vIHhmZXJBc3NldDogZHJvcEluZm8uQ29uZmlnLlRva2VuCglpbnRjIDcgLy8gNjQKCWludGMgMiAvLyA4CglieXRlYyAxIC8vICAiZCIKCWZyYW1lX2RpZyAtMSAvLyB0b2tlbkRyb3BJZDogVG9rZW5Ecm9wSWQKCWl0b2IKCWNvbmNhdAoJY292ZXIgMgoJYm94X2V4dHJhY3QKCWJ0b2kKCWl0eG5fZmllbGQgWGZlckFzc2V0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjQ0MQoJLy8gYXNzZXRSZWNlaXZlcjogdGhpcy5hcHAuYWRkcmVzcwoJZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKCWl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo0NDIKCS8vIGFzc2V0Q2xvc2VUbzogdGhpcy5hcHAuYWRkcmVzcwoJZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKCWl0eG5fZmllbGQgQXNzZXRDbG9zZVRvCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjQ0MwoJLy8gYXNzZXRBbW91bnQ6IDAKCWludGMgMSAvLyAwCglpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjQ0NAoJLy8gbm90ZTogJ29wdC1vdXQgb2YgdG9rZW4nCglwdXNoYnl0ZXMgMHg2ZjcwNzQyZDZmNzU3NDIwNmY2NjIwNzQ2ZjZiNjU2ZSAvLyAib3B0LW91dCBvZiB0b2tlbiIKCWl0eG5fZmllbGQgTm90ZQoKCS8vIEZlZSBmaWVsZCBub3Qgc2V0LCBkZWZhdWx0aW5nIHRvIDAKCWludGMgMSAvLyAwCglpdHhuX2ZpZWxkIEZlZQoKCS8vIFN1Ym1pdCBpbm5lciB0cmFuc2FjdGlvbgoJaXR4bl9zdWJtaXQKCippZjVfZW5kOgoJcmV0c3ViCgovLyBzZW5kVG9rZW5zRnJvbURyb3AoZHJvcEluZm86IFRva2VuRHJvcEluZm8sIHJlY2VpdmVyOiBBZGRyZXNzLCBhbW91bnRUb1NlbmQ6IHVpbnQ2NCk6IHVpbnQ2NAovLwovLyBTZW5kcyBhIHNwZWNpZmllZCBhbW91bnQgb2YgdG9rZW5zIGZyb20gYSB0b2tlbiBkcm9wIHRvIHRoZSBnaXZlbiByZWNlaXZlcgovLyBhbmQgdXBkYXRlcyB0aGUgcmVtYWluaW5nIGJhbGFuY2Ugb2YgdGhlIGRyb3AuIElmIHRoZSBkcm9wIGlzIGZ1bGx5IGNsYWltZWQsCi8vIGl0IGlzIHJlbW92ZWQgZnJvbSB0aGUgYWN0aXZlIGRyb3BzLgovLwovLyBAcGFyYW0ge1Rva2VuRHJvcEluZm99IGRyb3BJbmZvIC0gSW5mb3JtYXRpb24gYWJvdXQgdGhlIHRva2VuIGRyb3AsIGluY2x1ZGluZyB0aGUgdG9rZW4gdHlwZSBhbmQgcmVtYWluaW5nIGJhbGFuY2UuCi8vIEBwYXJhbSB7QWRkcmVzc30gcmVjZWl2ZXIgLSBUaGUgYWRkcmVzcyBvZiB0aGUgcmVjaXBpZW50IHdobyB3aWxsIHJlY2VpdmUgdGhlIHRva2Vucy4KLy8gQHBhcmFtIHt1aW50NjR9IGFtb3VudFRvU2VuZCAtIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIHNlbmQgdG8gdGhlIHJlY2VpdmVyLgovLyBAcmV0dXJuIHt1aW50NjR9IFRoZSByZW1haW5pbmcgYmFsYW5jZSBvZiB0b2tlbnMgaW4gdGhlIHRva2VuIGRyb3AgYWZ0ZXIgdGhlIHRyYW5zZmVyLgpzZW5kVG9rZW5zRnJvbURyb3A6Cglwcm90byAzIDEKCgkvLyBQdXNoIGVtcHR5IGJ5dGVzIGFmdGVyIHRoZSBmcmFtZSBwb2ludGVyIHRvIHJlc2VydmUgc3BhY2UgZm9yIGxvY2FsIHZhcmlhYmxlcwoJYnl0ZWMgMCAvLyAweAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo0NjAKCS8vIHNlbmRBc3NldFRyYW5zZmVyKHsKCS8vICAgICAgICAgICAgIHhmZXJBc3NldDogZHJvcEluZm8uQ29uZmlnLlRva2VuLAoJLy8gICAgICAgICAgICAgYXNzZXRSZWNlaXZlcjogcmVjZWl2ZXIsCgkvLyAgICAgICAgICAgICBhc3NldEFtb3VudDogYW1vdW50VG9TZW5kLAoJLy8gICAgICAgICB9KQoJaXR4bl9iZWdpbgoJaW50YyA1IC8vICBheGZlcgoJaXR4bl9maWVsZCBUeXBlRW51bQoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo0NjEKCS8vIHhmZXJBc3NldDogZHJvcEluZm8uQ29uZmlnLlRva2VuCglmcmFtZV9kaWcgLTEgLy8gZHJvcEluZm86IFRva2VuRHJvcEluZm8KCWV4dHJhY3QgNjQgOAoJYnRvaQoJaXR4bl9maWVsZCBYZmVyQXNzZXQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NDYyCgkvLyBhc3NldFJlY2VpdmVyOiByZWNlaXZlcgoJZnJhbWVfZGlnIC0yIC8vIHJlY2VpdmVyOiBBZGRyZXNzCglpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NDYzCgkvLyBhc3NldEFtb3VudDogYW1vdW50VG9TZW5kCglmcmFtZV9kaWcgLTMgLy8gYW1vdW50VG9TZW5kOiB1aW50NjQKCWl0eG5fZmllbGQgQXNzZXRBbW91bnQKCgkvLyBGZWUgZmllbGQgbm90IHNldCwgZGVmYXVsdGluZyB0byAwCglpbnRjIDEgLy8gMAoJaXR4bl9maWVsZCBGZWUKCgkvLyBTdWJtaXQgaW5uZXIgdHJhbnNhY3Rpb24KCWl0eG5fc3VibWl0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjQ2NwoJLy8gcmVtYWluaW5nID0gZHJvcEluZm8uQW1vdW50UmVtYWluaW5nIC0gYW1vdW50VG9TZW5kCglmcmFtZV9kaWcgLTEgLy8gZHJvcEluZm86IFRva2VuRHJvcEluZm8KCWV4dHJhY3QgNDAgOAoJYnRvaQoJZnJhbWVfZGlnIC0zIC8vIGFtb3VudFRvU2VuZDogdWludDY0CgktCglmcmFtZV9idXJ5IDAgLy8gcmVtYWluaW5nOiB1aW50NjQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NDY4CgkvLyB0aGlzLmFsbERyb3BzKGRyb3BJbmZvLkRyb3BJZCkudmFsdWUuQW1vdW50UmVtYWluaW5nID0gcmVtYWluaW5nCglpbnRjIDEwIC8vICBoZWFkT2Zmc2V0CglmcmFtZV9kaWcgMCAvLyByZW1haW5pbmc6IHVpbnQ2NAoJaXRvYgoJYnl0ZWMgMSAvLyAgImQiCglmcmFtZV9kaWcgLTEgLy8gZHJvcEluZm86IFRva2VuRHJvcEluZm8KCWV4dHJhY3QgMCA4CglidG9pCglpdG9iCgljb25jYXQKCWNvdmVyIDIKCWJveF9yZXBsYWNlCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjQ2OQoJLy8gdGhpcy5hbGxEcm9wcyhkcm9wSW5mby5Ecm9wSWQpLnZhbHVlLk51bUNsYWltcyArPSAxCglpbnRjIDExIC8vICBoZWFkT2Zmc2V0CglkdXAKCWludGMgMiAvLyA4CglieXRlYyAxIC8vICAiZCIKCWZyYW1lX2RpZyAtMSAvLyBkcm9wSW5mbzogVG9rZW5Ecm9wSW5mbwoJZXh0cmFjdCAwIDgKCWJ0b2kKCWl0b2IKCWNvbmNhdAoJY292ZXIgMgoJYm94X2V4dHJhY3QKCWJ0b2kKCWludGMgMCAvLyAxCgkrCglpdG9iCglieXRlYyAxIC8vICAiZCIKCWZyYW1lX2RpZyAtMSAvLyBkcm9wSW5mbzogVG9rZW5Ecm9wSW5mbwoJZXh0cmFjdCAwIDgKCWJ0b2kKCWl0b2IKCWNvbmNhdAoJY292ZXIgMgoJYm94X3JlcGxhY2UKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NDcxCgkvLyByZXR1cm4gcmVtYWluaW5nCglmcmFtZV9kaWcgMCAvLyByZW1haW5pbmc6IHVpbnQ2NAoKCS8vIHNldCB0aGUgc3Vicm91dGluZSByZXR1cm4gdmFsdWUKCWZyYW1lX2J1cnkgMAoJcmV0c3ViCgovLyBpc0Ryb3BFeHBpcmVkT3JFbXB0eShkcm9wSW5mbzogVG9rZW5Ecm9wSW5mbyk6IGJvb2xlYW4KLy8KLy8gQ2hlY2tzIGlmIHRoZSBkcm9wIGlzIGVpdGhlciBleHBpcmVkIG9yIGVtcHR5IChhbGwgdG9rZW5zIGRpc3RyaWJ1dGVkKSBiYXNlZCBvbiB0aGUgY3VycmVudCB0aW1lc3RhbXAuCi8vCi8vIEBwYXJhbSB7VG9rZW5Ecm9wSW5mb30gZHJvcEluZm8gLSBUaGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHRva2VuIGRyb3AsIGluY2x1ZGluZyBjb25maWd1cmF0aW9uIGRldGFpbHMgbGlrZSB0aGUgYWlyZHJvcCBlbmQgdGltZS4KLy8gQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZSBhaXJkcm9wIGlzIGV4cGlyZWQgYmFzZWQgb24gdGhlIGxhdGVzdCB0aW1lc3RhbXAgb3IgaWYgaXQgaXMgY29uc2lkZXJlZCBlbXB0eTsgb3RoZXJ3aXNlLCBmYWxzZS4KaXNEcm9wRXhwaXJlZE9yRW1wdHk6Cglwcm90byAxIDEKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NDgxCgkvLyByZXR1cm4gZHJvcEluZm8uQW1vdW50UmVtYWluaW5nID09PSAwIHx8IGdsb2JhbHMubGF0ZXN0VGltZXN0YW1wID4gZHJvcEluZm8uQ29uZmlnLkFpcmRyb3BFbmRUaW1lCglmcmFtZV9kaWcgLTEgLy8gZHJvcEluZm86IFRva2VuRHJvcEluZm8KCWV4dHJhY3QgNDAgOAoJYnRvaQoJaW50YyAxIC8vIDAKCT09CglkdXAKCWJueiAqc2tpcF9vcjAKCWdsb2JhbCBMYXRlc3RUaW1lc3RhbXAKCWZyYW1lX2RpZyAtMSAvLyBkcm9wSW5mbzogVG9rZW5Ecm9wSW5mbwoJZXh0cmFjdCA4MCA4CglidG9pCgk+Cgl8fAoKKnNraXBfb3IwOgoJcmV0c3ViCgovLyBkb2VzQ2xhaW1BY2NvdW50TWVldEdhdGluZyh0b2tlbkRyb3BJZDogVG9rZW5Ecm9wSWQsIHZhbHVlVG9WZXJpZnk6IHVpbnQ2NCk6IHZvaWQKLy8KLy8gQ2hlY2tzIGlmIGFuIGFjY291bnQgd2FudGluZyB0byBjbGFpbSB0b2tlbnMgbWVldHMgdGhlIGdhdGluZyByZXF1aXJlbWVudHMgc3BlY2lmaWVkIGJ5IHRoZSBhaXJkcm9wIGNyZWF0b3IuCi8vCi8vIEBwYXJhbSB7VG9rZW5Ecm9wSWR9IHRva2VuRHJvcElkIC0gVGhlIGlkIG9mIHRoZSB2YWxpZGF0b3IuCi8vIEBwYXJhbSB7dWludDY0fSB2YWx1ZVRvVmVyaWZ5IC0gVGhlIHZhbHVlIHRvIHZlcmlmeSBhZ2FpbnN0IHRoZSBnYXRpbmcgcmVxdWlyZW1lbnRzLgovLyBAcmV0dXJucyB7dm9pZH0gb3IgYXNzZXJ0cyBpZiByZXF1aXJlbWVudHMgbm90IG1ldC4KZG9lc0NsYWltQWNjb3VudE1lZXRHYXRpbmc6Cglwcm90byAyIDAKCgkvLyBQdXNoIGVtcHR5IGJ5dGVzIGFmdGVyIHRoZSBmcmFtZSBwb2ludGVyIHRvIHJlc2VydmUgc3BhY2UgZm9yIGxvY2FsIHZhcmlhYmxlcwoJYnl0ZWMgMCAvLyAweAoJZHVwbiAxMQoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo0OTIKCS8vIHR5cGUgPSB0aGlzLmFsbERyb3BzKHRva2VuRHJvcElkKS52YWx1ZS5Db25maWcuZW50cnlHYXRpbmdUeXBlCglwdXNoaW50IDg4CglpbnRjIDAgLy8gMQoJYnl0ZWMgMSAvLyAgImQiCglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkCglpdG9iCgljb25jYXQKCWNvdmVyIDIKCWJveF9leHRyYWN0CglidG9pCglmcmFtZV9idXJ5IDAgLy8gdHlwZTogdWludDgKCgkvLyAqaWY2X2NvbmRpdGlvbgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjQ5MwoJLy8gdHlwZSA9PT0gR0FUSU5HX1RZUEVfTk9ORQoJZnJhbWVfZGlnIDAgLy8gdHlwZTogdWludDgKCWludGMgMSAvLyAwCgk9PQoJYnogKmlmNl9lbmQKCgkvLyAqaWY2X2NvbnNlcXVlbnQKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo0OTQKCS8vIHJldHVybgoJcmV0c3ViCgoqaWY2X2VuZDoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo0OTYKCS8vIGNsYWltZXIgPSB0aGlzLnR4bi5zZW5kZXIKCXR4biBTZW5kZXIKCWZyYW1lX2J1cnkgMSAvLyBjbGFpbWVyOiBhZGRyZXNzCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjQ5NwoJLy8gdG9rZW5Ecm9wSW5mbyA9IGNsb25lKHRoaXMuYWxsRHJvcHModG9rZW5Ecm9wSWQpLnZhbHVlKQoJYnl0ZWMgMSAvLyAgImQiCglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSWQ6IFRva2VuRHJvcElkCglpdG9iCgljb25jYXQKCWJveF9nZXQKCgkvLyBib3ggdmFsdWUgZG9lcyBub3QgZXhpc3Q6IHRoaXMuYWxsRHJvcHModG9rZW5Ecm9wSWQpLnZhbHVlCglhc3NlcnQKCWZyYW1lX2J1cnkgMiAvLyB0b2tlbkRyb3BJbmZvOiAodWludDY0LGFkZHJlc3MsdWludDY0LHVpbnQ2NCx1aW50NjQsKHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ4LGFkZHJlc3MsdWludDY0WzRdLHVpbnQ2NCkpCgoJLy8gKmlmN19jb25kaXRpb24KCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo1MDEKCS8vIHR5cGUgPT09IEdBVElOR19UWVBFX0FTU0VUU19DUkVBVEVEX0JZIHx8CgkvLyAgICAgICAgICAgICB0eXBlID09PSBHQVRJTkdfVFlQRV9BU1NFVF9JRCB8fAoJLy8gICAgICAgICAgICAgdHlwZSA9PT0gR0FUSU5HX1RZUEVfQ1JFQVRFRF9CWV9ORkRfQUREUkVTU0VTCglmcmFtZV9kaWcgMCAvLyB0eXBlOiB1aW50OAoJaW50YyAwIC8vIDEKCT09CglkdXAKCWJueiAqc2tpcF9vcjEKCWZyYW1lX2RpZyAwIC8vIHR5cGU6IHVpbnQ4CglpbnRjIDQgLy8gMgoJPT0KCXx8Cgoqc2tpcF9vcjE6CglkdXAKCWJueiAqc2tpcF9vcjIKCWZyYW1lX2RpZyAwIC8vIHR5cGU6IHVpbnQ4CglpbnRjIDggLy8gMwoJPT0KCXx8Cgoqc2tpcF9vcjI6CglieiAqaWY3X2VuZAoKCS8vICppZjdfY29uc2VxdWVudAoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjUwNQoJLy8gYXNzZXJ0KHZhbHVlVG9WZXJpZnkgIT09IDApCglmcmFtZV9kaWcgLTIgLy8gdmFsdWVUb1ZlcmlmeTogdWludDY0CglpbnRjIDEgLy8gMAoJIT0KCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo1MDYKCS8vIGJhbFJlcXVpcmVkID0gdG9rZW5Ecm9wSW5mby5Db25maWcuZ2F0aW5nQXNzZXRNaW5CYWxhbmNlCglmcmFtZV9kaWcgMiAvLyB0b2tlbkRyb3BJbmZvOiAodWludDY0LGFkZHJlc3MsdWludDY0LHVpbnQ2NCx1aW50NjQsKHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ4LGFkZHJlc3MsdWludDY0WzRdLHVpbnQ2NCkpCglleHRyYWN0IDE1MyA4CglidG9pCglmcmFtZV9idXJ5IDMgLy8gYmFsUmVxdWlyZWQ6IHVpbnQ2NAoKCS8vICppZjhfY29uZGl0aW9uCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NTA3CgkvLyBiYWxSZXF1aXJlZCA9PT0gMAoJZnJhbWVfZGlnIDMgLy8gYmFsUmVxdWlyZWQ6IHVpbnQ2NAoJaW50YyAxIC8vIDAKCT09CglieiAqaWY4X2VuZAoKCS8vICppZjhfY29uc2VxdWVudAoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjUwOAoJLy8gYmFsUmVxdWlyZWQgPSAxCglpbnRjIDAgLy8gMQoJZnJhbWVfYnVyeSAzIC8vIGJhbFJlcXVpcmVkOiB1aW50NjQKCippZjhfZW5kOgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjUxMAoJLy8gYXNzZXJ0KAoJLy8gICAgICAgICAgICAgICAgIGNsYWltZXIuYXNzZXRCYWxhbmNlKEFzc2V0SUQuZnJvbVVpbnQ2NCh2YWx1ZVRvVmVyaWZ5KSkgPj0gYmFsUmVxdWlyZWQsCgkvLyAgICAgICAgICAgICAgICAgJ211c3QgaGF2ZSByZXF1aXJlZCBtaW5pbXVtIGJhbGFuY2Ugb2YgdmFsaWRhdG9yIGRlZmluZWQgdG9rZW4gdG8gYWRkIHN0YWtlJywKCS8vICAgICAgICAgICAgICkKCWZyYW1lX2RpZyAxIC8vIGNsYWltZXI6IGFkZHJlc3MKCWZyYW1lX2RpZyAtMiAvLyB2YWx1ZVRvVmVyaWZ5OiB1aW50NjQKCWFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQoJcG9wCglmcmFtZV9kaWcgMyAvLyBiYWxSZXF1aXJlZDogdWludDY0Cgk+PQoKCS8vIG11c3QgaGF2ZSByZXF1aXJlZCBtaW5pbXVtIGJhbGFuY2Ugb2YgdmFsaWRhdG9yIGRlZmluZWQgdG9rZW4gdG8gYWRkIHN0YWtlCglhc3NlcnQKCippZjdfZW5kOgoJLy8gKmlmOV9jb25kaXRpb24KCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo1MTUKCS8vIHR5cGUgPT09IEdBVElOR19UWVBFX0FTU0VUU19DUkVBVEVEX0JZCglmcmFtZV9kaWcgMCAvLyB0eXBlOiB1aW50OAoJaW50YyAwIC8vIDEKCT09CglieiAqaWY5X2VuZAoKCS8vICppZjlfY29uc2VxdWVudAoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjUxNgoJLy8gYXNzZXJ0KAoJLy8gICAgICAgICAgICAgICAgIEFzc2V0SUQuZnJvbVVpbnQ2NCh2YWx1ZVRvVmVyaWZ5KS5jcmVhdG9yID09PSB0b2tlbkRyb3BJbmZvLkNvbmZpZy5lbnRyeUdhdGluZ0FkZHJlc3MsCgkvLyAgICAgICAgICAgICAgICAgJ3NwZWNpZmllZCBhc3NldCBtdXN0IGJlIGNyZWF0ZWQgYnkgY3JlYXRvciB0aGF0IHRoZSB2YWxpZGF0b3IgZGVmaW5lZCBhcyBhIHJlcXVpcmVtZW50IHRvIHN0YWtlJywKCS8vICAgICAgICAgICAgICkKCWZyYW1lX2RpZyAtMiAvLyB2YWx1ZVRvVmVyaWZ5OiB1aW50NjQKCWFzc2V0X3BhcmFtc19nZXQgQXNzZXRDcmVhdG9yCglwb3AKCWZyYW1lX2RpZyAyIC8vIHRva2VuRHJvcEluZm86ICh1aW50NjQsYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCwodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDgsYWRkcmVzcyx1aW50NjRbNF0sdWludDY0KSkKCWV4dHJhY3QgODkgMzIKCT09CgoJLy8gc3BlY2lmaWVkIGFzc2V0IG11c3QgYmUgY3JlYXRlZCBieSBjcmVhdG9yIHRoYXQgdGhlIHZhbGlkYXRvciBkZWZpbmVkIGFzIGEgcmVxdWlyZW1lbnQgdG8gc3Rha2UKCWFzc2VydAoKKmlmOV9lbmQ6CgkvLyAqaWYxMF9jb25kaXRpb24KCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo1MjEKCS8vIHR5cGUgPT09IEdBVElOR19UWVBFX0FTU0VUX0lECglmcmFtZV9kaWcgMCAvLyB0eXBlOiB1aW50OAoJaW50YyA0IC8vIDIKCT09CglieiAqaWYxMF9lbmQKCgkvLyAqaWYxMF9jb25zZXF1ZW50CgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NTIyCgkvLyBmb3VuZCA9IGZhbHNlCglpbnRjIDEgLy8gMAoJZnJhbWVfYnVyeSA0IC8vIGZvdW5kOiBib29sCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjUyMwoJLy8gdG9rZW5Ecm9wSW5mby5Db25maWcuZW50cnlHYXRpbmdBc3NldHMKCWZyYW1lX2RpZyAyIC8vIHRva2VuRHJvcEluZm86ICh1aW50NjQsYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCwodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDgsYWRkcmVzcyx1aW50NjRbNF0sdWludDY0KSkKCWV4dHJhY3QgMTIxIDMyCglkdXAKCWZyYW1lX2J1cnkgNSAvLyBjb3B5IG9mIHRoZSBhcnJheSB3ZSBhcmUgaXRlcmF0aW5nIG92ZXIKCWV4dHJhY3QgMCA4CglidG9pCglmcmFtZV9idXJ5IDYgLy8gYXNzZXRJZDogdWludDY0CglpbnRjIDEgLy8gMAoJZnJhbWVfYnVyeSA3IC8vIHRoZSBvZmZzZXQgd2UgYXJlIGV4dHJhY3RpbmcgdGhlIG5leHQgZWxlbWVudCBmcm9tCgoqZm9yT2ZfMDoKCS8vICppZjExX2NvbmRpdGlvbgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjUyNAoJLy8gdmFsdWVUb1ZlcmlmeSA9PT0gYXNzZXRJZAoJZnJhbWVfZGlnIC0yIC8vIHZhbHVlVG9WZXJpZnk6IHVpbnQ2NAoJZnJhbWVfZGlnIDYgLy8gYXNzZXRJZDogdWludDY0Cgk9PQoJYnogKmlmMTFfZW5kCgoJLy8gKmlmMTFfY29uc2VxdWVudAoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjUyNQoJLy8gZm91bmQgPSB0cnVlCglpbnRjIDAgLy8gMQoJZnJhbWVfYnVyeSA0IC8vIGZvdW5kOiBib29sCgliICpmb3JPZl8wX2VuZAoKKmlmMTFfZW5kOgoKKmZvck9mXzBfY29udGludWU6CgkvLyBpbmNyZW1lbnQgb2Zmc2V0IGFuZCBsb29wIGlmIG5vdCBvdXQgb2YgYm91bmRzCglmcmFtZV9kaWcgNyAvLyB0aGUgb2Zmc2V0IHdlIGFyZSBleHRyYWN0aW5nIHRoZSBuZXh0IGVsZW1lbnQgZnJvbQoJaW50YyAyIC8vIDgKCSsKCWR1cAoJaW50YyAzIC8vICBvZmZzZXQgb2YgbGFzdCBlbGVtZW50Cgk8CglieiAqZm9yT2ZfMF9lbmQKCWZyYW1lX2J1cnkgNyAvLyB0aGUgb2Zmc2V0IHdlIGFyZSBleHRyYWN0aW5nIHRoZSBuZXh0IGVsZW1lbnQgZnJvbQoJZnJhbWVfZGlnIDUgLy8gY29weSBvZiB0aGUgYXJyYXkgd2UgYXJlIGl0ZXJhdGluZyBvdmVyCglmcmFtZV9kaWcgNyAvLyB0aGUgb2Zmc2V0IHdlIGFyZSBleHRyYWN0aW5nIHRoZSBuZXh0IGVsZW1lbnQgZnJvbQoJaW50YyAyIC8vIDgKCWV4dHJhY3QKCWJ0b2kKCWZyYW1lX2J1cnkgNiAvLyBhc3NldElkOiB1aW50NjQKCWIgKmZvck9mXzAKCipmb3JPZl8wX2VuZDoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo1MjkKCS8vIGFzc2VydChmb3VuZCwgJ3NwZWNpZmllZCBhc3NldCBtdXN0IGJlIGlkZW50aWNhbCB0byB0aGUgYXNzZXQgaWQgZGVmaW5lZCBhcyBhIHJlcXVpcmVtZW50IHRvIHN0YWtlJykKCWZyYW1lX2RpZyA0IC8vIGZvdW5kOiBib29sCgoJLy8gc3BlY2lmaWVkIGFzc2V0IG11c3QgYmUgaWRlbnRpY2FsIHRvIHRoZSBhc3NldCBpZCBkZWZpbmVkIGFzIGEgcmVxdWlyZW1lbnQgdG8gc3Rha2UKCWFzc2VydAoKKmlmMTBfZW5kOgoJLy8gKmlmMTJfY29uZGl0aW9uCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NTMxCgkvLyB0eXBlID09PSBHQVRJTkdfVFlQRV9DUkVBVEVEX0JZX05GRF9BRERSRVNTRVMKCWZyYW1lX2RpZyAwIC8vIHR5cGU6IHVpbnQ4CglpbnRjIDggLy8gMwoJPT0KCWJ6ICppZjEyX2VuZAoKCS8vICppZjEyX2NvbnNlcXVlbnQKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo1MzQKCS8vIGFzc2VydCgKCS8vICAgICAgICAgICAgICAgICB0aGlzLmlzQWRkcmVzc0luTkZEQ0FBbGdvTGlzdCgKCS8vICAgICAgICAgICAgICAgICAgICAgdG9rZW5Ecm9wSW5mby5Db25maWcuZW50cnlHYXRpbmdBc3NldHNbMF0sCgkvLyAgICAgICAgICAgICAgICAgICAgIEFzc2V0SUQuZnJvbVVpbnQ2NCh2YWx1ZVRvVmVyaWZ5KS5jcmVhdG9yLAoJLy8gICAgICAgICAgICAgICAgICksCgkvLyAgICAgICAgICAgICAgICAgJ3NwZWNpZmllZCBhc3NldCBtdXN0IGJlIGNyZWF0ZWQgYnkgY3JlYXRvciB0aGF0IGlzIG9uZSBvZiB0aGUgbGlua2VkIGFkZHJlc3NlcyBpbiBhbiBuZmQnLAoJLy8gICAgICAgICAgICAgKQoJZnJhbWVfZGlnIC0yIC8vIHZhbHVlVG9WZXJpZnk6IHVpbnQ2NAoJYXNzZXRfcGFyYW1zX2dldCBBc3NldENyZWF0b3IKCXBvcAoJZnJhbWVfZGlnIDIgLy8gdG9rZW5Ecm9wSW5mbzogKHVpbnQ2NCxhZGRyZXNzLHVpbnQ2NCx1aW50NjQsdWludDY0LCh1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50OCxhZGRyZXNzLHVpbnQ2NFs0XSx1aW50NjQpKQoJZXh0cmFjdCAxMjEgOAoJYnRvaQoJY2FsbHN1YiBpc0FkZHJlc3NJbk5GRENBQWxnb0xpc3QKCgkvLyBzcGVjaWZpZWQgYXNzZXQgbXVzdCBiZSBjcmVhdGVkIGJ5IGNyZWF0b3IgdGhhdCBpcyBvbmUgb2YgdGhlIGxpbmtlZCBhZGRyZXNzZXMgaW4gYW4gbmZkCglhc3NlcnQKCippZjEyX2VuZDoKCS8vICppZjEzX2NvbmRpdGlvbgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjU0MgoJLy8gdHlwZSA9PT0gR0FUSU5HX1RZUEVfU0VHTUVOVF9PRl9ORkQKCWZyYW1lX2RpZyAwIC8vIHR5cGU6IHVpbnQ4CglpbnRjIDUgLy8gNAoJPT0KCWJ6ICppZjEzX2VuZAoKCS8vICppZjEzX2NvbnNlcXVlbnQKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo1NDQKCS8vIHVzZXJPZmZlcmVkTkZEQXBwSWQgPSB2YWx1ZVRvVmVyaWZ5CglmcmFtZV9kaWcgLTIgLy8gdmFsdWVUb1ZlcmlmeTogdWludDY0CglmcmFtZV9idXJ5IDggLy8gdXNlck9mZmVyZWRORkRBcHBJZDogdWludDY0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjU0NQoJLy8gYXNzZXJ0KHRoaXMuaXNOZmRBcHBJZFZhbGlkKHVzZXJPZmZlcmVkTkZEQXBwSWQpLCAncHJvdmlkZWQgTkZEIG11c3QgYmUgdmFsaWQnKQoJZnJhbWVfZGlnIDggLy8gdXNlck9mZmVyZWRORkRBcHBJZDogdWludDY0CgljYWxsc3ViIGlzTmZkQXBwSWRWYWxpZAoKCS8vIHByb3ZpZGVkIE5GRCBtdXN0IGJlIHZhbGlkCglhc3NlcnQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NTQ4CgkvLyBhc3NlcnQoCgkvLyAgICAgICAgICAgICAgICAgcmF3Qnl0ZXMoQXBwSUQuZnJvbVVpbnQ2NCh1c2VyT2ZmZXJlZE5GREFwcElkKS5nbG9iYWxTdGF0ZSgnaS5vd25lci5hJykgYXMgQWRkcmVzcykgPT09CgkvLyAgICAgICAgICAgICAgICAgICAgIHJhd0J5dGVzKGNsYWltZXIpIHx8IHRoaXMuaXNBZGRyZXNzSW5ORkRDQUFsZ29MaXN0KHVzZXJPZmZlcmVkTkZEQXBwSWQsIGNsYWltZXIpLAoJLy8gICAgICAgICAgICAgICAgICJwcm92aWRlZCBuZmQgZm9yIGVudHJ5IGlzbid0IG93bmVkIG9yIGxpbmtlZCB0byB0aGUgY2xhaW1lciIsCgkvLyAgICAgICAgICAgICApCglmcmFtZV9kaWcgOCAvLyB1c2VyT2ZmZXJlZE5GREFwcElkOiB1aW50NjQKCWJ5dGVjIDEyIC8vICAiaS5vd25lci5hIgoJYXBwX2dsb2JhbF9nZXRfZXgKCgkvLyBnbG9iYWwgc3RhdGUgdmFsdWUgZG9lcyBub3QgZXhpc3Q6IEFwcElELmZyb21VaW50NjQodXNlck9mZmVyZWRORkRBcHBJZCkuZ2xvYmFsU3RhdGUoJ2kub3duZXIuYScpCglhc3NlcnQKCWZyYW1lX2RpZyAxIC8vIGNsYWltZXI6IGFkZHJlc3MKCT09CglkdXAKCWJueiAqc2tpcF9vcjMKCWZyYW1lX2RpZyAxIC8vIGNsYWltZXI6IGFkZHJlc3MKCWZyYW1lX2RpZyA4IC8vIHVzZXJPZmZlcmVkTkZEQXBwSWQ6IHVpbnQ2NAoJY2FsbHN1YiBpc0FkZHJlc3NJbk5GRENBQWxnb0xpc3QKCXx8Cgoqc2tpcF9vcjM6CgkvLyBwcm92aWRlZCBuZmQgZm9yIGVudHJ5IGlzbid0IG93bmVkIG9yIGxpbmtlZCB0byB0aGUgY2xhaW1lcgoJYXNzZXJ0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjU1NQoJLy8gYXNzZXJ0KAoJLy8gICAgICAgICAgICAgICAgIGJ0b2koQXBwSUQuZnJvbVVpbnQ2NCh1c2VyT2ZmZXJlZE5GREFwcElkKS5nbG9iYWxTdGF0ZSgnaS5wYXJlbnRBcHBJRCcpIGFzIGJ5dGVzKSA9PT0KCS8vICAgICAgICAgICAgICAgICAgICAgdG9rZW5Ecm9wSW5mby5Db25maWcuZW50cnlHYXRpbmdBc3NldHNbMF0sCgkvLyAgICAgICAgICAgICAgICAgJ3NwZWNpZmllZCBuZmQgbXVzdCBiZSBhIHNlZ21lbnQgb2YgdGhlIG5mZCB0aGUgdmFsaWRhdG9yIHNwZWNpZmllZCBhcyBhIHJlcXVpcmVtZW50JywKCS8vICAgICAgICAgICAgICkKCWZyYW1lX2RpZyA4IC8vIHVzZXJPZmZlcmVkTkZEQXBwSWQ6IHVpbnQ2NAoJcHVzaGJ5dGVzIDB4NjkyZTcwNjE3MjY1NmU3NDQxNzA3MDQ5NDQgLy8gImkucGFyZW50QXBwSUQiCglhcHBfZ2xvYmFsX2dldF9leAoKCS8vIGdsb2JhbCBzdGF0ZSB2YWx1ZSBkb2VzIG5vdCBleGlzdDogQXBwSUQuZnJvbVVpbnQ2NCh1c2VyT2ZmZXJlZE5GREFwcElkKS5nbG9iYWxTdGF0ZSgnaS5wYXJlbnRBcHBJRCcpCglhc3NlcnQKCWJ0b2kKCWZyYW1lX2RpZyAyIC8vIHRva2VuRHJvcEluZm86ICh1aW50NjQsYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCwodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDgsYWRkcmVzcyx1aW50NjRbNF0sdWludDY0KSkKCWV4dHJhY3QgMTIxIDgKCWJ0b2kKCT09CgoJLy8gc3BlY2lmaWVkIG5mZCBtdXN0IGJlIGEgc2VnbWVudCBvZiB0aGUgbmZkIHRoZSB2YWxpZGF0b3Igc3BlY2lmaWVkIGFzIGEgcmVxdWlyZW1lbnQKCWFzc2VydAoKKmlmMTNfZW5kOgoJLy8gKmlmMTRfY29uZGl0aW9uCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NTYxCgkvLyB0eXBlID09PSBHQVRJTkdfVFlQRV9ORkRfV19WRVJJRklFRF9UV0lUVEVSCglmcmFtZV9kaWcgMCAvLyB0eXBlOiB1aW50OAoJcHVzaGludCA1Cgk9PQoJYnogKmlmMTRfZW5kCgoJLy8gKmlmMTRfY29uc2VxdWVudAoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjU2MgoJLy8gdGhpcy5jaGVja1ZhbGlkVjNOZmRBbmRPd25lZEJ5Q2xhaW1lcih2YWx1ZVRvVmVyaWZ5LCBjbGFpbWVyKQoJZnJhbWVfZGlnIDEgLy8gY2xhaW1lcjogYWRkcmVzcwoJZnJhbWVfZGlnIC0yIC8vIHZhbHVlVG9WZXJpZnk6IHVpbnQ2NAoJY2FsbHN1YiBjaGVja1ZhbGlkVjNOZmRBbmRPd25lZEJ5Q2xhaW1lcgoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo1NjMKCS8vIHR3aXR0ZXJWYWwgPSBzZW5kTWV0aG9kQ2FsbDxbYnl0ZXNdLCBieXRlcz4oewoJLy8gICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uSUQ6IEFwcElELmZyb21VaW50NjQodmFsdWVUb1ZlcmlmeSksCgkvLyAgICAgICAgICAgICAgICAgbmFtZTogJ3JlYWRGaWVsZCcsCgkvLyAgICAgICAgICAgICAgICAgbWV0aG9kQXJnczogWyd2LnR3aXR0ZXInXSwKCS8vICAgICAgICAgICAgIH0pCglpdHhuX2JlZ2luCglpbnRjIDYgLy8gIGFwcGwKCWl0eG5fZmllbGQgVHlwZUVudW0KCWJ5dGVjIDEzIC8vICBtZXRob2QgInJlYWRGaWVsZChieXRlW10pYnl0ZVtdIgoJaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NTY0CgkvLyBhcHBsaWNhdGlvbklEOiBBcHBJRC5mcm9tVWludDY0KHZhbHVlVG9WZXJpZnkpCglmcmFtZV9kaWcgLTIgLy8gdmFsdWVUb1ZlcmlmeTogdWludDY0CglpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NTY2CgkvLyBtZXRob2RBcmdzOiBbJ3YudHdpdHRlciddCglwdXNoYnl0ZXMgMHgwMDA5NzYyZTc0Nzc2OTc0NzQ2NTcyCglpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwoKCS8vIEZlZSBmaWVsZCBub3Qgc2V0LCBkZWZhdWx0aW5nIHRvIDAKCWludGMgMSAvLyAwCglpdHhuX2ZpZWxkIEZlZQoKCS8vIFN1Ym1pdCBpbm5lciB0cmFuc2FjdGlvbgoJaXR4bl9zdWJtaXQKCWl0eG4gTnVtTG9ncwoJaW50YyAwIC8vIDEKCS0KCWl0eG5hcyBMb2dzCglleHRyYWN0IDQgMAoJZXh0cmFjdCAyIDAKCWZyYW1lX2J1cnkgOSAvLyB0d2l0dGVyVmFsOiBieXRlW10KCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NTY4CgkvLyBhc3NlcnQodHdpdHRlclZhbCAhPT0gJycsICdtdXN0IGhhdmUgdmVyaWZpZWQgdHdpdHRlcicpCglmcmFtZV9kaWcgOSAvLyB0d2l0dGVyVmFsOiBieXRlW10KCWJ5dGVjIDAgLy8gICIiCgkhPQoKCS8vIG11c3QgaGF2ZSB2ZXJpZmllZCB0d2l0dGVyCglhc3NlcnQKCippZjE0X2VuZDoKCS8vICppZjE1X2NvbmRpdGlvbgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjU3MAoJLy8gdHlwZSA9PT0gR0FUSU5HX1RZUEVfTkZEX1dfVkVSSUZJRURfQkxVRVNLWQoJZnJhbWVfZGlnIDAgLy8gdHlwZTogdWludDgKCWludGMgNiAvLyA2Cgk9PQoJYnogKmlmMTVfZW5kCgoJLy8gKmlmMTVfY29uc2VxdWVudAoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjU3MQoJLy8gdGhpcy5jaGVja1ZhbGlkVjNOZmRBbmRPd25lZEJ5Q2xhaW1lcih2YWx1ZVRvVmVyaWZ5LCBjbGFpbWVyKQoJZnJhbWVfZGlnIDEgLy8gY2xhaW1lcjogYWRkcmVzcwoJZnJhbWVfZGlnIC0yIC8vIHZhbHVlVG9WZXJpZnk6IHVpbnQ2NAoJY2FsbHN1YiBjaGVja1ZhbGlkVjNOZmRBbmRPd25lZEJ5Q2xhaW1lcgoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo1NzIKCS8vIHR3aXR0ZXJWYWwgPSBzZW5kTWV0aG9kQ2FsbDxbYnl0ZXNdLCBieXRlcz4oewoJLy8gICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uSUQ6IEFwcElELmZyb21VaW50NjQodmFsdWVUb1ZlcmlmeSksCgkvLyAgICAgICAgICAgICAgICAgbmFtZTogJ3JlYWRGaWVsZCcsCgkvLyAgICAgICAgICAgICAgICAgbWV0aG9kQXJnczogWyd2LmJsdWVza3lkaWQnXSwKCS8vICAgICAgICAgICAgIH0pCglpdHhuX2JlZ2luCglpbnRjIDYgLy8gIGFwcGwKCWl0eG5fZmllbGQgVHlwZUVudW0KCWJ5dGVjIDEzIC8vICBtZXRob2QgInJlYWRGaWVsZChieXRlW10pYnl0ZVtdIgoJaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NTczCgkvLyBhcHBsaWNhdGlvbklEOiBBcHBJRC5mcm9tVWludDY0KHZhbHVlVG9WZXJpZnkpCglmcmFtZV9kaWcgLTIgLy8gdmFsdWVUb1ZlcmlmeTogdWludDY0CglpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NTc1CgkvLyBtZXRob2RBcmdzOiBbJ3YuYmx1ZXNreWRpZCddCglwdXNoYnl0ZXMgMHgwMDBjNzYyZTYyNmM3NTY1NzM2Yjc5NjQ2OTY0CglpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwoKCS8vIEZlZSBmaWVsZCBub3Qgc2V0LCBkZWZhdWx0aW5nIHRvIDAKCWludGMgMSAvLyAwCglpdHhuX2ZpZWxkIEZlZQoKCS8vIFN1Ym1pdCBpbm5lciB0cmFuc2FjdGlvbgoJaXR4bl9zdWJtaXQKCWl0eG4gTnVtTG9ncwoJaW50YyAwIC8vIDEKCS0KCWl0eG5hcyBMb2dzCglleHRyYWN0IDQgMAoJZXh0cmFjdCAyIDAKCWZyYW1lX2J1cnkgMTAgLy8gdHdpdHRlclZhbDogYnl0ZVtdCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjU3NwoJLy8gYXNzZXJ0KHR3aXR0ZXJWYWwgIT09ICcnLCAnbXVzdCBoYXZlIHZlcmlmaWVkIGJsdWVza3knKQoJZnJhbWVfZGlnIDEwIC8vIHR3aXR0ZXJWYWw6IGJ5dGVbXQoJYnl0ZWMgMCAvLyAgIiIKCSE9CgoJLy8gbXVzdCBoYXZlIHZlcmlmaWVkIGJsdWVza3kKCWFzc2VydAoKKmlmMTVfZW5kOgoJLy8gKmlmMTZfY29uZGl0aW9uCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NTc5CgkvLyB0eXBlID09PSBHQVRJTkdfVFlQRV9ORkRfSE9MRElOR19BR0UKCWZyYW1lX2RpZyAwIC8vIHR5cGU6IHVpbnQ4CglpbnRjIDkgLy8gNwoJPT0KCWJ6ICppZjE2X2VuZAoKCS8vICppZjE2X2NvbnNlcXVlbnQKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo1ODAKCS8vIHRoaXMuY2hlY2tWYWxpZFYzTmZkQW5kT3duZWRCeUNsYWltZXIodmFsdWVUb1ZlcmlmeSwgY2xhaW1lcikKCWZyYW1lX2RpZyAxIC8vIGNsYWltZXI6IGFkZHJlc3MKCWZyYW1lX2RpZyAtMiAvLyB2YWx1ZVRvVmVyaWZ5OiB1aW50NjQKCWNhbGxzdWIgY2hlY2tWYWxpZFYzTmZkQW5kT3duZWRCeUNsYWltZXIKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NTgxCgkvLyB0aW1lUHVyY2hhc2VkID0gYnRvaShBcHBJRC5mcm9tVWludDY0KHZhbHVlVG9WZXJpZnkpLmdsb2JhbFN0YXRlKCdpLnRpbWVQdXJjaGFzZWQnKSBhcyBieXRlcykKCWZyYW1lX2RpZyAtMiAvLyB2YWx1ZVRvVmVyaWZ5OiB1aW50NjQKCXB1c2hieXRlcyAweDY5MmU3NDY5NmQ2NTUwNzU3MjYzNjg2MTczNjU2NCAvLyAiaS50aW1lUHVyY2hhc2VkIgoJYXBwX2dsb2JhbF9nZXRfZXgKCgkvLyBnbG9iYWwgc3RhdGUgdmFsdWUgZG9lcyBub3QgZXhpc3Q6IEFwcElELmZyb21VaW50NjQodmFsdWVUb1ZlcmlmeSkuZ2xvYmFsU3RhdGUoJ2kudGltZVB1cmNoYXNlZCcpCglhc3NlcnQKCWJ0b2kKCWZyYW1lX2J1cnkgMTEgLy8gdGltZVB1cmNoYXNlZDogdWludDY0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjU4MgoJLy8gYXNzZXJ0KAoJLy8gICAgICAgICAgICAgICAgIHRpbWVQdXJjaGFzZWQgKyB0b2tlbkRyb3BJbmZvLkNvbmZpZy5nYXRpbmdBc3NldE1pbkJhbGFuY2UgKiAyNCAqIDYwICogNjAgPD0gZ2xvYmFscy5sYXRlc3RUaW1lc3RhbXAsCgkvLyAgICAgICAgICAgICAgICAgJ25mZCBtdXN0IGJlIGhlbGQgZm9yIG1pbiBudW0gb2YgZGF5cycsCgkvLyAgICAgICAgICAgICApCglmcmFtZV9kaWcgMTEgLy8gdGltZVB1cmNoYXNlZDogdWludDY0CglmcmFtZV9kaWcgMiAvLyB0b2tlbkRyb3BJbmZvOiAodWludDY0LGFkZHJlc3MsdWludDY0LHVpbnQ2NCx1aW50NjQsKHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ4LGFkZHJlc3MsdWludDY0WzRdLHVpbnQ2NCkpCglleHRyYWN0IDE1MyA4CglidG9pCglwdXNoaW50IDI0CgkqCglpbnRjIDEyIC8vIDYwCgkqCglpbnRjIDEyIC8vIDYwCgkqCgkrCglnbG9iYWwgTGF0ZXN0VGltZXN0YW1wCgk8PQoKCS8vIG5mZCBtdXN0IGJlIGhlbGQgZm9yIG1pbiBudW0gb2YgZGF5cwoJYXNzZXJ0CgoqaWYxNl9lbmQ6CglyZXRzdWIKCi8vIGNoZWNrVmFsaWRWM05mZEFuZE93bmVkQnlDbGFpbWVyKHZhbHVlVG9WZXJpZnk6IHVpbnQ2NCwgY2xhaW1lcjogQWRkcmVzcyk6IHZvaWQKY2hlY2tWYWxpZFYzTmZkQW5kT3duZWRCeUNsYWltZXI6Cglwcm90byAyIDAKCgkvLyBQdXNoIGVtcHR5IGJ5dGVzIGFmdGVyIHRoZSBmcmFtZSBwb2ludGVyIHRvIHJlc2VydmUgc3BhY2UgZm9yIGxvY2FsIHZhcmlhYmxlcwoJYnl0ZWMgMCAvLyAweAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo1OTEKCS8vIHVzZXJPZmZlcmVkTkZEQXBwSWQgPSB2YWx1ZVRvVmVyaWZ5CglmcmFtZV9kaWcgLTEgLy8gdmFsdWVUb1ZlcmlmeTogdWludDY0CglmcmFtZV9idXJ5IDAgLy8gdXNlck9mZmVyZWRORkRBcHBJZDogdWludDY0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjU5MgoJLy8gYXNzZXJ0KHRoaXMuaXNOZmRBcHBJZFZhbGlkKHVzZXJPZmZlcmVkTkZEQXBwSWQpLCAncHJvdmlkZWQgTkZEIG11c3QgYmUgdmFsaWQnKQoJZnJhbWVfZGlnIDAgLy8gdXNlck9mZmVyZWRORkRBcHBJZDogdWludDY0CgljYWxsc3ViIGlzTmZkQXBwSWRWYWxpZAoKCS8vIHByb3ZpZGVkIE5GRCBtdXN0IGJlIHZhbGlkCglhc3NlcnQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NTk0CgkvLyBhc3NlcnQoIXRoaXMuaXNOZmRQcmVWMyh1c2VyT2ZmZXJlZE5GREFwcElkKSwgJ05GRCBtdXN0IGJlIFYzIG9yIGxhdGVyJykKCWZyYW1lX2RpZyAwIC8vIHVzZXJPZmZlcmVkTkZEQXBwSWQ6IHVpbnQ2NAoJY2FsbHN1YiBpc05mZFByZVYzCgkhCgoJLy8gTkZEIG11c3QgYmUgVjMgb3IgbGF0ZXIKCWFzc2VydAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo1OTYKCS8vIGFzc2VydCghdGhpcy5pc05mZEZvclNhbGUodXNlck9mZmVyZWRORkRBcHBJZCksICdORkQgbXVzdCBub3QgYmUgZm9yIHNhbGUnKQoJZnJhbWVfZGlnIDAgLy8gdXNlck9mZmVyZWRORkRBcHBJZDogdWludDY0CgljYWxsc3ViIGlzTmZkRm9yU2FsZQoJIQoKCS8vIE5GRCBtdXN0IG5vdCBiZSBmb3Igc2FsZQoJYXNzZXJ0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjU5NwoJLy8gYXNzZXJ0KCF0aGlzLmlzTmZkRXhwaXJlZCh1c2VyT2ZmZXJlZE5GREFwcElkKSwgJ05GRCBtdXN0IG5vdCBiZSBleHBpcmVkJykKCWZyYW1lX2RpZyAwIC8vIHVzZXJPZmZlcmVkTkZEQXBwSWQ6IHVpbnQ2NAoJY2FsbHN1YiBpc05mZEV4cGlyZWQKCSEKCgkvLyBORkQgbXVzdCBub3QgYmUgZXhwaXJlZAoJYXNzZXJ0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjU5OQoJLy8gYXNzZXJ0KAoJLy8gICAgICAgICAgICAgcmF3Qnl0ZXMoQXBwSUQuZnJvbVVpbnQ2NCh1c2VyT2ZmZXJlZE5GREFwcElkKS5nbG9iYWxTdGF0ZSgnaS5vd25lci5hJykgYXMgQWRkcmVzcykgPT09IHJhd0J5dGVzKGNsYWltZXIpLAoJLy8gICAgICAgICAgICAgInByb3ZpZGVkIG5mZCBmb3IgZW50cnkgaXNuJ3Qgb3duZWQgYnkgdGhlIGNsYWltZXIiLAoJLy8gICAgICAgICApCglmcmFtZV9kaWcgMCAvLyB1c2VyT2ZmZXJlZE5GREFwcElkOiB1aW50NjQKCWJ5dGVjIDEyIC8vICAiaS5vd25lci5hIgoJYXBwX2dsb2JhbF9nZXRfZXgKCgkvLyBnbG9iYWwgc3RhdGUgdmFsdWUgZG9lcyBub3QgZXhpc3Q6IEFwcElELmZyb21VaW50NjQodXNlck9mZmVyZWRORkRBcHBJZCkuZ2xvYmFsU3RhdGUoJ2kub3duZXIuYScpCglhc3NlcnQKCWZyYW1lX2RpZyAtMiAvLyBjbGFpbWVyOiBBZGRyZXNzCgk9PQoKCS8vIHByb3ZpZGVkIG5mZCBmb3IgZW50cnkgaXNuJ3Qgb3duZWQgYnkgdGhlIGNsYWltZXIKCWFzc2VydAoJcmV0c3ViCgovLyBpc05mZEFwcElkVmFsaWQobmZkQXBwSWQ6IHVpbnQ2NCk6IGJvb2xlYW4KLy8KLy8gQ2hlY2tzIGlmIHRoZSBnaXZlbiBORkQgQXBwIGlkIGlzIHZhbGlkLiAgVXNpbmcgb25seSB0aGUgQXBwIGlkIHRoZXJlJ3Mgbm8gdmFsaWRhdGlvbiBhZ2FpbnN0IHRoZSBuYW1lIChpZTogdGhhdCBuZmQgWCBpcyBuYW1lIFkpCi8vIFNvIGl0J3MgYXNzdW1lZCBmb3IgdGhlIGNhbGxlciwgdGhlIGFwcCBpZCBhbG9uZSBpcyBmaW5lLiAgVGhlIG5hbWUgaXMgZmV0Y2hlZCBmcm9tIHRoZSBzcGVjaWZpZWQgYXBwIGlkIGFuZCB0aGUgdHdvCi8vIHRvZ2V0aGVyIGFyZSB1c2VkIGZvciB2YWxpZGl0eSBjaGVjayBjYWxsIHRvIHRoZSBuZmQgcmVnaXN0cnkuCi8vCi8vIEBwYXJhbSB7dWludDY0fSBuZmRBcHBJZCAtIFRoZSBORkQgQXBwIGlkIHRvIHZlcmlmeS4KLy8KLy8gQHJldHVybnMge2Jvb2xlYW59IC0gUmV0dXJucyB0cnVlIGlmIHRoZSBORkQgQXBwIGlkIGlzIHZhbGlkLCBvdGhlcndpc2UgZmFsc2UuCmlzTmZkQXBwSWRWYWxpZDoKCXByb3RvIDEgMQoKCS8vIFB1c2ggZW1wdHkgYnl0ZXMgYWZ0ZXIgdGhlIGZyYW1lIHBvaW50ZXIgdG8gcmVzZXJ2ZSBzcGFjZSBmb3IgbG9jYWwgdmFyaWFibGVzCglieXRlYyAwIC8vIDB4CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjYxNgoJLy8gdXNlck9mZmVyZWRORkROYW1lID0gQXBwSUQuZnJvbVVpbnQ2NChuZmRBcHBJZCkuZ2xvYmFsU3RhdGUoJ2kubmFtZScpIGFzIHN0cmluZwoJZnJhbWVfZGlnIC0xIC8vIG5mZEFwcElkOiB1aW50NjQKCXB1c2hieXRlcyAweDY5MmU2ZTYxNmQ2NSAvLyAiaS5uYW1lIgoJYXBwX2dsb2JhbF9nZXRfZXgKCgkvLyBnbG9iYWwgc3RhdGUgdmFsdWUgZG9lcyBub3QgZXhpc3Q6IEFwcElELmZyb21VaW50NjQobmZkQXBwSWQpLmdsb2JhbFN0YXRlKCdpLm5hbWUnKQoJYXNzZXJ0CglmcmFtZV9idXJ5IDAgLy8gdXNlck9mZmVyZWRORkROYW1lOiBzdHJpbmcKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NjE4CgkvLyByZXR1cm4gc2VuZE1ldGhvZENhbGw8W3N0cmluZywgdWludDY0XSwgYm9vbGVhbj4oewoJLy8gICAgICAgICAgICAgYXBwbGljYXRpb25JRDogdGhpcy5uZmRSZWdpc3RyeUFwcElkLnZhbHVlLAoJLy8gICAgICAgICAgICAgbmFtZTogJ2lzVmFsaWROZmRBcHBJZCcsCgkvLyAgICAgICAgICAgICBtZXRob2RBcmdzOiBbdXNlck9mZmVyZWRORkROYW1lLCBuZmRBcHBJZF0sCgkvLyAgICAgICAgIH0pCglpdHhuX2JlZ2luCglpbnRjIDYgLy8gIGFwcGwKCWl0eG5fZmllbGQgVHlwZUVudW0KCXB1c2hieXRlcyAweDRiZTIyZmM2IC8vIG1ldGhvZCAiaXNWYWxpZE5mZEFwcElkKHN0cmluZyx1aW50NjQpYm9vbCIKCWl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjYxOQoJLy8gYXBwbGljYXRpb25JRDogdGhpcy5uZmRSZWdpc3RyeUFwcElkLnZhbHVlCglieXRlYyAxMSAvLyAgIm5mZFJlZ2lzdHJ5SWQiCglhcHBfZ2xvYmFsX2dldAoJaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjYyMQoJLy8gbWV0aG9kQXJnczogW3VzZXJPZmZlcmVkTkZETmFtZSwgbmZkQXBwSWRdCglmcmFtZV9kaWcgMCAvLyB1c2VyT2ZmZXJlZE5GRE5hbWU6IHN0cmluZwoJZHVwCglsZW4KCWl0b2IKCWV4dHJhY3QgNiAyCglzd2FwCgljb25jYXQKCWl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCglmcmFtZV9kaWcgLTEgLy8gbmZkQXBwSWQ6IHVpbnQ2NAoJaXRvYgoJaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKCgkvLyBGZWUgZmllbGQgbm90IHNldCwgZGVmYXVsdGluZyB0byAwCglpbnRjIDEgLy8gMAoJaXR4bl9maWVsZCBGZWUKCgkvLyBTdWJtaXQgaW5uZXIgdHJhbnNhY3Rpb24KCWl0eG5fc3VibWl0CglpdHhuIE51bUxvZ3MKCWludGMgMCAvLyAxCgktCglpdHhuYXMgTG9ncwoJZXh0cmFjdCA0IDAKCWludGMgMSAvLyAwCglnZXRiaXQKCgkvLyBzZXQgdGhlIHN1YnJvdXRpbmUgcmV0dXJuIHZhbHVlCglmcmFtZV9idXJ5IDAKCXJldHN1YgoKLy8gaXNOZmRQcmVWMyhuZmRBcHBJZDogdWludDY0KTogYm9vbGVhbgppc05mZFByZVYzOgoJcHJvdG8gMSAxCgoJLy8gUHVzaCBlbXB0eSBieXRlcyBhZnRlciB0aGUgZnJhbWUgcG9pbnRlciB0byByZXNlcnZlIHNwYWNlIGZvciBsb2NhbCB2YXJpYWJsZXMKCWJ5dGVjIDAgLy8gMHgKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NjI2CgkvLyBtYWpWZXIgPSBleHRyYWN0MyhBcHBJRC5mcm9tVWludDY0KG5mZEFwcElkKS5nbG9iYWxTdGF0ZSgnaS52ZXInKSBhcyBieXRlcywgMCwgMikKCWZyYW1lX2RpZyAtMSAvLyBuZmRBcHBJZDogdWludDY0CglwdXNoYnl0ZXMgMHg2OTJlNzY2NTcyIC8vICJpLnZlciIKCWFwcF9nbG9iYWxfZ2V0X2V4CgoJLy8gZ2xvYmFsIHN0YXRlIHZhbHVlIGRvZXMgbm90IGV4aXN0OiBBcHBJRC5mcm9tVWludDY0KG5mZEFwcElkKS5nbG9iYWxTdGF0ZSgnaS52ZXInKQoJYXNzZXJ0CglleHRyYWN0IDAgMgoJZnJhbWVfYnVyeSAwIC8vIG1halZlcjogYnl0ZVtdCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjYyNwoJLy8gcmV0dXJuIG1halZlciA9PT0gJzEuJyB8fCBtYWpWZXIgPT09ICcyLicKCWZyYW1lX2RpZyAwIC8vIG1halZlcjogYnl0ZVtdCglwdXNoYnl0ZXMgMHgzMTJlIC8vICIxLiIKCT09CglkdXAKCWJueiAqc2tpcF9vcjQKCWZyYW1lX2RpZyAwIC8vIG1halZlcjogYnl0ZVtdCglwdXNoYnl0ZXMgMHgzMjJlIC8vICIyLiIKCT09Cgl8fAoKKnNraXBfb3I0OgoJLy8gc2V0IHRoZSBzdWJyb3V0aW5lIHJldHVybiB2YWx1ZQoJZnJhbWVfYnVyeSAwCglyZXRzdWIKCi8vIGlzTmZkRm9yU2FsZShuZmRBcHBJZDogdWludDY0KTogYm9vbGVhbgppc05mZEZvclNhbGU6Cglwcm90byAxIDEKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NjMxCgkvLyByZXR1cm4gdGhpcy5zYWZlR2xvYmFsSW50R2V0KG5mZEFwcElkLCAnaS5zZWxsYW10JykgIT09IDAKCXB1c2hieXRlcyAweDY5MmU3MzY1NmM2YzYxNmQ3NCAvLyAiaS5zZWxsYW10IgoJZnJhbWVfZGlnIC0xIC8vIG5mZEFwcElkOiB1aW50NjQKCWNhbGxzdWIgc2FmZUdsb2JhbEludEdldAoJaW50YyAxIC8vIDAKCSE9CglyZXRzdWIKCi8vIGlzTmZkRXhwaXJlZChuZmRBcHBJZDogdWludDY0KTogYm9vbGVhbgppc05mZEV4cGlyZWQ6Cglwcm90byAxIDEKCgkvLyBQdXNoIGVtcHR5IGJ5dGVzIGFmdGVyIHRoZSBmcmFtZSBwb2ludGVyIHRvIHJlc2VydmUgc3BhY2UgZm9yIGxvY2FsIHZhcmlhYmxlcwoJYnl0ZWMgMCAvLyAweAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo2MzYKCS8vIGV4cFRpbWUgPSB0aGlzLnNhZmVHbG9iYWxJbnRHZXQobmZkQXBwSWQsICdpLmV4cGlyYXRpb25UaW1lJykKCXB1c2hieXRlcyAweDY5MmU2NTc4NzA2OTcyNjE3NDY5NmY2ZTU0Njk2ZDY1IC8vICJpLmV4cGlyYXRpb25UaW1lIgoJZnJhbWVfZGlnIC0xIC8vIG5mZEFwcElkOiB1aW50NjQKCWNhbGxzdWIgc2FmZUdsb2JhbEludEdldAoJZnJhbWVfYnVyeSAwIC8vIGV4cFRpbWU6IHVpbnQ2NAoKCS8vICppZjE3X2NvbmRpdGlvbgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjYzNwoJLy8gZXhwVGltZSA9PT0gMAoJZnJhbWVfZGlnIDAgLy8gZXhwVGltZTogdWludDY0CglpbnRjIDEgLy8gMAoJPT0KCWJ6ICppZjE3X2VuZAoKCS8vICppZjE3X2NvbnNlcXVlbnQKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo2MzkKCS8vIHJldHVybiBmYWxzZQoJaW50YyAxIC8vIDAKCWIgKmlzTmZkRXhwaXJlZCpyZXR1cm4KCippZjE3X2VuZDoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo2NDEKCS8vIHJldHVybiBnbG9iYWxzLmxhdGVzdFRpbWVzdGFtcCA+IGV4cFRpbWUKCWdsb2JhbCBMYXRlc3RUaW1lc3RhbXAKCWZyYW1lX2RpZyAwIC8vIGV4cFRpbWU6IHVpbnQ2NAoJPgoKKmlzTmZkRXhwaXJlZCpyZXR1cm46CgkvLyBzZXQgdGhlIHN1YnJvdXRpbmUgcmV0dXJuIHZhbHVlCglmcmFtZV9idXJ5IDAKCXJldHN1YgoKLy8gc2FmZUdsb2JhbEludEdldChhcHBJZDogdWludDY0LCBrZXk6IGJ5dGVzKTogdWludDY0CnNhZmVHbG9iYWxJbnRHZXQ6Cglwcm90byAyIDEKCgkvLyAqaWYxOF9jb25kaXRpb24KCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo2NDUKCS8vICFBcHBJRC5mcm9tVWludDY0KGFwcElkKS5nbG9iYWxTdGF0ZUV4aXN0cyhrZXkpCglmcmFtZV9kaWcgLTEgLy8gYXBwSWQ6IHVpbnQ2NAoJZnJhbWVfZGlnIC0yIC8vIGtleTogYnl0ZXMKCWFwcF9nbG9iYWxfZ2V0X2V4Cglzd2FwCglwb3AKCSEKCWJ6ICppZjE4X2VuZAoKCS8vICppZjE4X2NvbnNlcXVlbnQKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo2NDYKCS8vIHJldHVybiAwCglpbnRjIDEgLy8gMAoJcmV0c3ViCgoqaWYxOF9lbmQ6CgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NjQ4CgkvLyByZXR1cm4gYnRvaShBcHBJRC5mcm9tVWludDY0KGFwcElkKS5nbG9iYWxTdGF0ZShrZXkpIGFzIGJ5dGVzKQoJZnJhbWVfZGlnIC0xIC8vIGFwcElkOiB1aW50NjQKCWZyYW1lX2RpZyAtMiAvLyBrZXk6IGJ5dGVzCglhcHBfZ2xvYmFsX2dldF9leAoKCS8vIGdsb2JhbCBzdGF0ZSB2YWx1ZSBkb2VzIG5vdCBleGlzdDogQXBwSUQuZnJvbVVpbnQ2NChhcHBJZCkuZ2xvYmFsU3RhdGUoa2V5KQoJYXNzZXJ0CglidG9pCglyZXRzdWIKCi8vIGlzQWRkcmVzc0luTkZEQ0FBbGdvTGlzdChuZmRBcHBJZDogdWludDY0LCBhZGRyVG9GaW5kOiBBZGRyZXNzKTogYm9vbGVhbgovLwovLyBDaGVja3MgaWYgdGhlIHNwZWNpZmllZCBhZGRyZXNzIGlzIHByZXNlbnQgaW4gYW4gTkZEcyBsaXN0IG9mIHZlcmlmaWVkIGFkZHJlc3Nlcy4KLy8gVGhlIE5GRCBpcyBhc3N1bWVkIHRvIGhhdmUgYWxyZWFkeSBiZWVuIHZhbGlkYXRlZCBhcyBvZmZpY2lhbC4KLy8KLy8gQHBhcmFtIHt1aW50NjR9IG5mZEFwcElkIC0gVGhlIE5GRCBhcHBsaWNhdGlvbiBpZC4KLy8gQHBhcmFtIHtBZGRyZXNzfSBhZGRyVG9GaW5kIC0gVGhlIGFkZHJlc3MgdG8gZmluZCBpbiB0aGUgdi5jYUFsZ28uMC5hcyBwcm9wZXJ0eQovLyBAcmV0dXJuIHtib29sZWFufSAtIGB0cnVlYCBpZiB0aGUgYWRkcmVzcyBpcyBwcmVzZW50LCBgZmFsc2VgIG90aGVyd2lzZS4KaXNBZGRyZXNzSW5ORkRDQUFsZ29MaXN0OgoJcHJvdG8gMiAxCgoJLy8gUHVzaCBlbXB0eSBieXRlcyBhZnRlciB0aGUgZnJhbWUgcG9pbnRlciB0byByZXNlcnZlIHNwYWNlIGZvciBsb2NhbCB2YXJpYWJsZXMKCWJ5dGVjIDAgLy8gMHgKCWR1cG4gMgoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo2NjAKCS8vIHNlbmRBcHBDYWxsKHsKCS8vICAgICAgICAgICAgIGFwcGxpY2F0aW9uSUQ6IEFwcElELmZyb21VaW50NjQobmZkQXBwSWQpLAoJLy8gICAgICAgICAgICAgYXBwbGljYXRpb25BcmdzOiBbJ3JlYWRfcHJvcGVydHknLCAndi5jYUFsZ28uMC5hcyddLAoJLy8gICAgICAgICB9KQoJaXR4bl9iZWdpbgoJaW50YyA2IC8vICBhcHBsCglpdHhuX2ZpZWxkIFR5cGVFbnVtCgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjY2MQoJLy8gYXBwbGljYXRpb25JRDogQXBwSUQuZnJvbVVpbnQ2NChuZmRBcHBJZCkKCWZyYW1lX2RpZyAtMSAvLyBuZmRBcHBJZDogdWludDY0CglpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NjYyCgkvLyBhcHBsaWNhdGlvbkFyZ3M6IFsncmVhZF9wcm9wZXJ0eScsICd2LmNhQWxnby4wLmFzJ10KCXB1c2hieXRlcyAweDcyNjU2MTY0NWY3MDcyNmY3MDY1NzI3NDc5IC8vICJyZWFkX3Byb3BlcnR5IgoJaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKCXB1c2hieXRlcyAweDc2MmU2MzYxNDE2YzY3NmYyZTMwMmU2MTczIC8vICJ2LmNhQWxnby4wLmFzIgoJaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKCgkvLyBGZWUgZmllbGQgbm90IHNldCwgZGVmYXVsdGluZyB0byAwCglpbnRjIDEgLy8gMAoJaXR4bl9maWVsZCBGZWUKCgkvLyBTdWJtaXQgaW5uZXIgdHJhbnNhY3Rpb24KCWl0eG5fc3VibWl0CgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjY2NAoJLy8gY2FBbGdvRGF0YSA9IHRoaXMuaXR4bi5sYXN0TG9nCglpdHhuIExhc3RMb2cKCWZyYW1lX2J1cnkgMCAvLyBjYUFsZ29EYXRhOiBieXRlW10KCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NjY1CgkvLyBmb3IgKGxldCBpID0gMDsgaSA8IGNhQWxnb0RhdGEubGVuZ3RoOyBpICs9IDMyKQoJaW50YyAxIC8vIDAKCWZyYW1lX2J1cnkgMSAvLyBpOiB1aW50NjQKCipmb3JfMDoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo2NjUKCS8vIGkgPCBjYUFsZ29EYXRhLmxlbmd0aAoJZnJhbWVfZGlnIDEgLy8gaTogdWludDY0CglmcmFtZV9kaWcgMCAvLyBjYUFsZ29EYXRhOiBieXRlW10KCWxlbgoJPAoJYnogKmZvcl8wX2VuZAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo2NjYKCS8vIGFkZHIgPSBleHRyYWN0MyhjYUFsZ29EYXRhLCBpLCAzMikKCWZyYW1lX2RpZyAwIC8vIGNhQWxnb0RhdGE6IGJ5dGVbXQoJZnJhbWVfZGlnIDEgLy8gaTogdWludDY0CglpbnRjIDMgLy8gMzIKCWV4dHJhY3QzCglmcmFtZV9idXJ5IDIgLy8gYWRkcjogYnl0ZVtdCgoJLy8gKmlmMTlfY29uZGl0aW9uCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NjY3CgkvLyBhZGRyICE9PSByYXdCeXRlcyhnbG9iYWxzLnplcm9BZGRyZXNzKSAmJiBhZGRyID09PSByYXdCeXRlcyhhZGRyVG9GaW5kKQoJZnJhbWVfZGlnIDIgLy8gYWRkcjogYnl0ZVtdCglnbG9iYWwgWmVyb0FkZHJlc3MKCSE9CglkdXAKCWJ6ICpza2lwX2FuZDAKCWZyYW1lX2RpZyAyIC8vIGFkZHI6IGJ5dGVbXQoJZnJhbWVfZGlnIC0yIC8vIGFkZHJUb0ZpbmQ6IEFkZHJlc3MKCT09CgkmJgoKKnNraXBfYW5kMDoKCWJ6ICppZjE5X2VuZAoKCS8vICppZjE5X2NvbnNlcXVlbnQKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo2NjgKCS8vIHJldHVybiB0cnVlCglpbnRjIDAgLy8gMQoJYiAqaXNBZGRyZXNzSW5ORkRDQUFsZ29MaXN0KnJldHVybgoKKmlmMTlfZW5kOgoKKmZvcl8wX2NvbnRpbnVlOgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjY2NQoJLy8gaSArPSAzMgoJZnJhbWVfZGlnIDEgLy8gaTogdWludDY0CglpbnRjIDMgLy8gMzIKCSsKCWZyYW1lX2J1cnkgMSAvLyBpOiB1aW50NjQKCWIgKmZvcl8wCgoqZm9yXzBfZW5kOgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjY3MQoJLy8gcmV0dXJuIGZhbHNlCglpbnRjIDEgLy8gMAoKKmlzQWRkcmVzc0luTkZEQ0FBbGdvTGlzdCpyZXR1cm46CgkvLyBzZXQgdGhlIHN1YnJvdXRpbmUgcmV0dXJuIHZhbHVlCglmcmFtZV9idXJ5IDAKCgkvLyBwb3AgYWxsIGxvY2FsIHZhcmlhYmxlcyBmcm9tIHRoZSBzdGFjawoJcG9wbiAyCglyZXRzdWIKCi8vIGNoZWNrR2F0aW5nSW5mbyh0b2tlbkRyb3BJbmZvOiBUb2tlbkRyb3BDb25maWcpOiB2b2lkCmNoZWNrR2F0aW5nSW5mbzoKCXByb3RvIDEgMAoKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo2NzUKCS8vIGFzc2VydCgKCS8vICAgICAgICAgICAgIHRva2VuRHJvcEluZm8uZW50cnlHYXRpbmdUeXBlID49IEdBVElOR19UWVBFX05PTkUgJiYgdG9rZW5Ecm9wSW5mby5lbnRyeUdhdGluZ1R5cGUgPD0gR0FUSU5HX1RZUEVfQ09OU1RfTUFYLAoJLy8gICAgICAgICApCglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSW5mbzogVG9rZW5Ecm9wQ29uZmlnCglleHRyYWN0IDI0IDEKCWJ0b2kKCWludGMgMSAvLyAwCgk+PQoJZHVwCglieiAqc2tpcF9hbmQxCglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSW5mbzogVG9rZW5Ecm9wQ29uZmlnCglleHRyYWN0IDI0IDEKCWJ0b2kKCWludGMgOSAvLyA3Cgk8PQoJJiYKCipza2lwX2FuZDE6Cglhc3NlcnQKCgkvLyAqaWYyMF9jb25kaXRpb24KCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo2NzkKCS8vIHRva2VuRHJvcEluZm8uZW50cnlHYXRpbmdUeXBlID09PSBHQVRJTkdfVFlQRV9DUkVBVEVEX0JZX05GRF9BRERSRVNTRVMgfHwKCS8vICAgICAgICAgICAgIHRva2VuRHJvcEluZm8uZW50cnlHYXRpbmdUeXBlID09PSBHQVRJTkdfVFlQRV9TRUdNRU5UX09GX05GRAoJZnJhbWVfZGlnIC0xIC8vIHRva2VuRHJvcEluZm86IFRva2VuRHJvcENvbmZpZwoJZXh0cmFjdCAyNCAxCglidG9pCglpbnRjIDggLy8gMwoJPT0KCWR1cAoJYm56ICpza2lwX29yNQoJZnJhbWVfZGlnIC0xIC8vIHRva2VuRHJvcEluZm86IFRva2VuRHJvcENvbmZpZwoJZXh0cmFjdCAyNCAxCglidG9pCglpbnRjIDUgLy8gNAoJPT0KCXx8Cgoqc2tpcF9vcjU6CglieiAqaWYyMF9lbmQKCgkvLyAqaWYyMF9jb25zZXF1ZW50CgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6NjgzCgkvLyBhc3NlcnQoCgkvLyAgICAgICAgICAgICAgICAgdGhpcy5pc05mZEFwcElkVmFsaWQodG9rZW5Ecm9wSW5mby5lbnRyeUdhdGluZ0Fzc2V0c1swXSksCgkvLyAgICAgICAgICAgICAgICAgJ3Byb3ZpZGVkIE5GRCBBcHAgaWQgZm9yIGdhdGluZyBtdXN0IGJlIHZhbGlkIE5GRCcsCgkvLyAgICAgICAgICAgICApCglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSW5mbzogVG9rZW5Ecm9wQ29uZmlnCglleHRyYWN0IDU3IDgKCWJ0b2kKCWNhbGxzdWIgaXNOZmRBcHBJZFZhbGlkCgoJLy8gcHJvdmlkZWQgTkZEIEFwcCBpZCBmb3IgZ2F0aW5nIG11c3QgYmUgdmFsaWQgTkZECglhc3NlcnQKCippZjIwX2VuZDoKCS8vICppZjIxX2NvbmRpdGlvbgoJLy8gY29udHJhY3RzL1Rva2VuRHJvcC5hbGdvLnRzOjY4OAoJLy8gdG9rZW5Ecm9wSW5mby5lbnRyeUdhdGluZ1R5cGUgPT09IEdBVElOR19UWVBFX05GRF9IT0xESU5HX0FHRQoJZnJhbWVfZGlnIC0xIC8vIHRva2VuRHJvcEluZm86IFRva2VuRHJvcENvbmZpZwoJZXh0cmFjdCAyNCAxCglidG9pCglpbnRjIDkgLy8gNwoJPT0KCWJ6ICppZjIxX2VuZAoKCS8vICppZjIxX2NvbnNlcXVlbnQKCS8vIGNvbnRyYWN0cy9Ub2tlbkRyb3AuYWxnby50czo2ODkKCS8vIGFzc2VydCh0b2tlbkRyb3BJbmZvLmdhdGluZ0Fzc2V0TWluQmFsYW5jZSA+IDAsICdhc3NldCBtaW4gYmFsYW5jZSAtIHVzZWQgYXMgbmZkIGhvbGRpbmcgYWdlIC0gbXVzdCBiZSA+MCcpCglmcmFtZV9kaWcgLTEgLy8gdG9rZW5Ecm9wSW5mbzogVG9rZW5Ecm9wQ29uZmlnCglleHRyYWN0IDg5IDgKCWJ0b2kKCWludGMgMSAvLyAwCgk+CgoJLy8gYXNzZXQgbWluIGJhbGFuY2UgLSB1c2VkIGFzIG5mZCBob2xkaW5nIGFnZSAtIG11c3QgYmUgPjAKCWFzc2VydAoKKmlmMjFfZW5kOgoJcmV0c3ViCgovLyBjb3N0Rm9yQm94U3RvcmFnZSh0b3RhbE51bUJ5dGVzOiB1aW50NjQpOiB1aW50NjQKY29zdEZvckJveFN0b3JhZ2U6Cglwcm90byAxIDEKCgkvLyBjb250cmFjdHMvVG9rZW5Ecm9wLmFsZ28udHM6Njk3CgkvLyByZXR1cm4gU0NCT1hfUEVSQk9YICsgdG90YWxOdW1CeXRlcyAqIFNDQk9YX1BFUkJZVEUKCXB1c2hpbnQgMjUwMAoJZnJhbWVfZGlnIC0xIC8vIHRvdGFsTnVtQnl0ZXM6IHVpbnQ2NAoJcHVzaGludCA0MDAKCSoKCSsKCXJldHN1YgoKKmNyZWF0ZV9Ob09wOgoJcHVzaGJ5dGVzIDB4NjAwYTJhNjcgLy8gbWV0aG9kICJjcmVhdGVBcHBsaWNhdGlvbih1aW50NjQsYWRkcmVzcyl2b2lkIgoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAoJbWF0Y2ggKmFiaV9yb3V0ZV9jcmVhdGVBcHBsaWNhdGlvbgoKCS8vIHRoaXMgY29udHJhY3QgZG9lcyBub3QgaW1wbGVtZW50IHRoZSBnaXZlbiBBQkkgbWV0aG9kIGZvciBjcmVhdGUgTm9PcAoJZXJyCgoqY2FsbF9Ob09wOgoJcHVzaGJ5dGVzIDB4MDRlOWNkNDUgLy8gbWV0aG9kICJjaGFuZ2VNYWludGFpbmVyKGFkZHJlc3Mpdm9pZCIKCXB1c2hieXRlcyAweDY0NDYxMWYzIC8vIG1ldGhvZCAiY2hhbmdlRmVlcyh1aW50NjQsdWludDY0KXZvaWQiCglwdXNoYnl0ZXMgMHhkYzJhMTY0NyAvLyBtZXRob2QgIm9wdGluQXNzZXQocGF5LHVpbnQ2NCl2b2lkIgoJcHVzaGJ5dGVzIDB4YWQxNWMyMTkgLy8gbWV0aG9kICJnZXREcm9wQ3JlYXRlQ29zdCgpdWludDY0IgoJcHVzaGJ5dGVzIDB4MTMzZTZkNmMgLy8gbWV0aG9kICJnZXRQZXJDbGFpbWVyTWJyQ29zdCgpdWludDY0IgoJcHVzaGJ5dGVzIDB4NzI5OTAxNTAgLy8gbWV0aG9kICJnZXRQZXJDbGFpbWVyRmVlKCl1aW50NjQiCglwdXNoYnl0ZXMgMHg3NjcxMGFkNCAvLyBtZXRob2QgImdldERyb3BJbmZvKHVpbnQ2NCkodWludDY0LGFkZHJlc3MsdWludDY0LHVpbnQ2NCx1aW50NjQsKHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ4LGFkZHJlc3MsdWludDY0WzRdLHVpbnQ2NCkpIgoJcHVzaGJ5dGVzIDB4ZmNlZWQ2MDUgLy8gbWV0aG9kICJjcmVhdGVEcm9wKHBheSxheGZlciwodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDgsYWRkcmVzcyx1aW50NjRbNF0sdWludDY0KSl1aW50NjQiCglwdXNoYnl0ZXMgMHgzNDhiMjg2YSAvLyBtZXRob2QgImNhbmNlbERyb3AodWludDY0KXZvaWQiCglwdXNoYnl0ZXMgMHhlNmRiNWUwZCAvLyBtZXRob2QgImNsYWltRHJvcChwYXksdWludDY0LHVpbnQ2NCl2b2lkIgoJcHVzaGJ5dGVzIDB4MzYwOTEyOWYgLy8gbWV0aG9kICJjbGFpbUNsYWltZXJCb3hDb3N0KHVpbnQ2NCxhZGRyZXNzLGFkZHJlc3Mpdm9pZCIKCXB1c2hieXRlcyAweDM3ZWFmY2U0IC8vIG1ldGhvZCAiY2xlYW51cERyb3AodWludDY0KXZvaWQiCgl0eG5hIEFwcGxpY2F0aW9uQXJncyAwCgltYXRjaCAqYWJpX3JvdXRlX2NoYW5nZU1haW50YWluZXIgKmFiaV9yb3V0ZV9jaGFuZ2VGZWVzICphYmlfcm91dGVfb3B0aW5Bc3NldCAqYWJpX3JvdXRlX2dldERyb3BDcmVhdGVDb3N0ICphYmlfcm91dGVfZ2V0UGVyQ2xhaW1lck1ickNvc3QgKmFiaV9yb3V0ZV9nZXRQZXJDbGFpbWVyRmVlICphYmlfcm91dGVfZ2V0RHJvcEluZm8gKmFiaV9yb3V0ZV9jcmVhdGVEcm9wICphYmlfcm91dGVfY2FuY2VsRHJvcCAqYWJpX3JvdXRlX2NsYWltRHJvcCAqYWJpX3JvdXRlX2NsYWltQ2xhaW1lckJveENvc3QgKmFiaV9yb3V0ZV9jbGVhbnVwRHJvcAoKCS8vIHRoaXMgY29udHJhY3QgZG9lcyBub3QgaW1wbGVtZW50IHRoZSBnaXZlbiBBQkkgbWV0aG9kIGZvciBjYWxsIE5vT3AKCWVycgoKKmNhbGxfVXBkYXRlQXBwbGljYXRpb246CglwdXNoYnl0ZXMgMHg0NmY3NjUzMyAvLyBtZXRob2QgInVwZGF0ZUFwcGxpY2F0aW9uKCl2b2lkIgoJdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAoJbWF0Y2ggKmFiaV9yb3V0ZV91cGRhdGVBcHBsaWNhdGlvbgoKCS8vIHRoaXMgY29udHJhY3QgZG9lcyBub3QgaW1wbGVtZW50IHRoZSBnaXZlbiBBQkkgbWV0aG9kIGZvciBjYWxsIFVwZGF0ZUFwcGxpY2F0aW9uCgllcnI=",
    "clear": "I3ByYWdtYSB2ZXJzaW9uIDEx"
  },
  "contract": {
    "name": "TokenDrop",
    "desc": "",
    "methods": [
      {
        "name": "createApplication",
        "args": [
          {
            "name": "nfdRegistryId",
            "type": "uint64"
          },
          {
            "name": "maintainerAddress",
            "type": "address"
          }
        ],
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "updateApplication",
        "args": [],
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "changeMaintainer",
        "desc": "Updates the maintainer address of the application.\n\n\nThis method allows the creator of the application to set a new maintainer address for receiving half the creation\nfees",
        "args": [
          {
            "name": "newMaintainer",
            "type": "address"
          }
        ],
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "changeFees",
        "desc": "Updates the creation fee amount required at drop creation (split between maintainer and fee sink)\nThis method can only be called by the creator of the application and the fee must be at least 2 ALGO\n1 ALGO to maintainer address, 1 to fee sink.\nThe per-claim fee has to be at least double the per-claim MBR.\nAt claim, 50% is sent to the maintainer address, the mbr is subtracted out, and remainder goes to fee sink",
        "args": [
          {
            "name": "creationFee",
            "type": "uint64"
          },
          {
            "name": "perClaimFee",
            "type": "uint64"
          }
        ],
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "optinAsset",
        "desc": "Opts in the application to an asset if not already opted in.\nVerifies the provided payment transaction for sufficient funding to cover\nthe minimum balance required for asset opt-in and relevant transaction fees (.102 algo)\nInitiates an asset transfer transaction to complete the opt-in process.",
        "args": [
          {
            "name": "mbrPayment",
            "type": "pay",
            "desc": "The payment transaction covering the minimum balance and fees."
          },
          {
            "name": "assetId",
            "type": "uint64",
            "desc": "The unique identifier of the asset to opt into."
          }
        ],
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "getDropCreateCost",
        "desc": "Calculates the fees required and MBR costs required for box storage for creating a drop with a specified maximum\nnumber of claimers.  This fee must be sent as a payment to the contract prior to the call to createDrop.\nThe actual fee (creationFeeAmount) is split between a maintainer account and the fee sink.  The fee is to help\nprevent 'spam' drops or drops created solely to block drops for specific assets.\n\n\n uint64 The total MBR required to cover the necessary up-front box storage costs.",
        "readonly": true,
        "args": [],
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "getPerClaimerMbrCost",
        "desc": "Returns the MBR box cost for a single claimer (claimable by anyone later)",
        "readonly": true,
        "args": [],
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "getPerClaimerFee",
        "desc": "Returns the per-claim fee paid (not reclaimable)",
        "readonly": true,
        "args": [],
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "getDropInfo",
        "desc": "Retrieves the TokenDropInfo struct for a specific (still active) token drop based on the provided token drop ID.",
        "readonly": true,
        "args": [
          {
            "name": "tokenDropId",
            "type": "uint64",
            "desc": "The unique identifier for the token drop.\n TokenDropInfo An object containing details about the specified token drop."
          }
        ],
        "returns": {
          "type": "(uint64,address,uint64,uint64,uint64,(uint64,uint64,uint64,uint8,address,uint64[4],uint64))"
        }
      },
      {
        "name": "createDrop",
        "desc": "Creates a new token drop and registers it in the system.\n\n\nThis method validates and processes a token drop, ensuring all required conditions\nare met. It registers the token drop with an assigned unique DropId, updates the\nrelevant state variables, and ensures that the drop complies with gating rules\nand limits.",
        "args": [
          {
            "name": "feeAndMbrPayment",
            "type": "pay",
            "desc": "proceeding payment txn into contract account to cover extra mbr needed for box\nstorage as well as FUTURE box storage for all possible claims.  ie: 10K tokens, 1K each - 10 possible claims,\nso the cost per claim - the drop creator has to pay that upfront as well."
          },
          {
            "name": "assetTxn",
            "type": "axfer",
            "desc": "The asset transfer transaction that transfers tokens for this drop."
          },
          {
            "name": "tokenDropConfig",
            "type": "(uint64,uint64,uint64,uint8,address,uint64[4],uint64)",
            "desc": "The metadata related to the token drop, including drop creator, token details,\n                                       amount per claim, airdrop end time, and related gating info.\n uint64 Returns the token drop id assigned for this drop."
          }
        ],
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "cancelDrop",
        "args": [
          {
            "name": "tokenDropId",
            "type": "uint64"
          }
        ],
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "claimDrop",
        "desc": "Processes a claim request for a specific token drop, ensuring compliance with all validation rules and conditions.",
        "args": [
          {
            "name": "feeAndMbrPayment",
            "type": "pay",
            "desc": "The payment transaction object provided by the claimant to cover necessary fees."
          },
          {
            "name": "tokenDropId",
            "type": "uint64",
            "desc": "The unique identifier of the token drop being claimed."
          },
          {
            "name": "valueToVerify",
            "type": "uint64",
            "desc": "An optional value used for claim gating verification."
          }
        ],
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "claimClaimerBoxCost",
        "args": [
          {
            "name": "tokenDropId",
            "type": "uint64"
          },
          {
            "name": "claimerAddress",
            "type": "address"
          },
          {
            "name": "receiver",
            "type": "address"
          }
        ],
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "cleanupDrop",
        "desc": "Cleans up an expired token drop by performing necessary actions such as refunding remaining tokens\nto the drop creator and removing the drop from the active drops.\nCalled if a new drop is created for the same asset id, and by anyone (presumably creator) if a drop is expired/empty.\nAlso called if the creator cancels the drop early.",
        "args": [
          {
            "name": "tokenDropId",
            "type": "uint64",
            "desc": "The identifier of the token drop to be cleaned up.\n void This method does not return a value."
          }
        ],
        "returns": {
          "type": "void"
        }
      }
    ]
  }
}